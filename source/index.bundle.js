(()=>{var e={873:(e,t,n)=>{var o,a,i=n(743),r=n(755);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}o=[n(875),n(788),n(433),n(25),n(759),n(400),n(40),n(814),n(230),n(839),n(335),n(445),n(209),n(851),n(512),n(296),n(441),n(501),n(277)],void 0===(a=function(e,t,o,a,s,d,l,u,m,p,f,v,g,h,b,y,w,I,_){n(424),n(824),n(79),n(707),n(14),i(r);var T=a.setCookie,C=a.setDataToLocalApplication,O=a.getDataToLocalApplication,E=s.ATTRIBUE_SIDEBAR_ROOM,R=s.BODY_BG_THEME,x=s.BODY_FZ,A=s.THEMES,j=s.FONTSIZES,k=s.TOKEN,M=e.set,S=e.get,D=function(e){M("general",e)},P=function(){var e=r("body"),t=O(R)||A[0].name,n=O(x)||j[2];A.forEach((function(t){return e.removeClass(t.name)})),e.addClass(t),e.css("font-size",n)},B=function(e){T(O(k),3650),o.setInfomation(c(c({},e.user),{},{email:null==e?void 0:e.email,erp_url:null==e?void 0:e.erp_url})),o.setRoomsWithAdapter(e.chats),l.onInit(),u.onInit(),f.onInit(),m.onInit(),p.onInit(),v.onInit(),g.onInit(),h.onInit(),b.onInit(),y.onInit(),w.onInit(),d.onInit(),_.onInit()},N=function(){return t.get("version").then((function(e){return o.setVersion(e)}))},U=function(e){var t=(null==e?void 0:e.body_bg_theme)||A[0].name,n=(null==e?void 0:e.body_fz)||j[2],a=(null==e?void 0:e.user_chat_info)||{};o.setRoomInfoWasEdited(a),o.setBodyBgTheme(t),o.setBodyFontSize(n),C(R,t),C(x,n),P()};!function(){if("serviceWorker"in navigator&&(navigator.serviceWorker.addEventListener("controllerchange",(function(){I.onInit()})),navigator.serviceWorker.register("sw.js").then((function(e){setInterval((function(){e.update()}),9e5)}))),r(document).on("click",".input-only-view",(function(e){var t=r(e.currentTarget).prev();t.get(0).select(),t.get(0).setSelectionRange(0,99999),document.execCommand("copy"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()})),window.addEventListener("offline",(function(){return o.setNetworkStatus(!1)})),window.addEventListener("online",(function(){if(o.setNetworkStatus(!0),o.getCurrentRoomId()){var e=r("[".concat(E,'="').concat(o.getCurrentRoomId(),'"]'));o.setCurrentRoomId(null),e.click()}setTimeout((function(){N(),Promise.all([t.post("validate"),t.get("users/preferences")]).then((function(e){r(".xm-page-loading").remove(),D(e),U(e[1]),B(e[0])}))}),1e3)})),P(),!window.navigator.onLine)return o.setNetworkStatus(!1),void S("general").then((function(e){r(".xm-page-loading").remove(),U(e[1]),B(e[0])}));N(),Promise.all([t.post("validate"),t.get("users/preferences")]).then((function(e){r(".xm-page-loading").remove(),D(e),U(e[1]),B(e[0])}))}()}.apply(t,o))||(e.exports=a)},759:(e,t,n)=>{var o,a;o=[n(550)],void 0===(a=function(e){var t={API_URL:"".concat(e,"/api"),SESSION_ID:"sessionId",TOKEN:"token",BODY_BG_THEME:"body_bg_theme",BODY_FZ:"body_fz",THEMES:[{name:"body_theme_blue",color:"#3263d5"},{name:"body_theme_green",color:"#45d866"},{name:"body_theme_black",color:"#000"},{name:"body_theme_gray",color:"#808080"}],FONTSIZES:["12px","14px","16px","18px"],ATTRIBUTE_CHANGE_NAME:"data-userid-name",ATTRIBUTE_CHANGE_IMAGE:"data-userid-image",ATTRIBUTE_CHANGE_IMAGE_GROUP:"data-roomid-image",ATTRIBUE_SIDEBAR_ROOM:"data-room-id"};return Object.freeze(t)}.apply(t,o))||(e.exports=a)},550:(e,t,n)=>{var o;void 0===(o=function(){return"".concat("https://xm.iptp.net/","xm")}.call(t,n,t,e))||(e.exports=o)},512:(e,t,n)=>{var o,a,i=n(755);o=[n(759),n(433),n(436),n(25),n(741)],void 0===(a=function(e,t,n,o,a){var r=e.API_URL,s=e.TOKEN,c=o.getDataToLocalApplication(s)||"",d=i(".btn__attach"),l=i(".--input-up-file"),u=i(".--input-up-media"),m=i("#media-menu"),p=m.find(".js-up-phone"),f=i(".chatbox-progress-upload"),v=f.find("path"),g=f.find("span"),h=i(".dropzone"),b=!1,y=0,w=function(e){var t=e;return e<0&&(t=0),e>100&&(t=100),(100-t)/100*Math.PI*18},I=function(){b=!1,m.hide(),i(document).off(".hideAttachSlide")},_=function(e){e.preventDefault(),e.stopPropagation(),b?I():(b=!0,m.show(),i(document).on("click.hideAttachSlide",(function(e){m.is(e.target)||0!==m.has(e.target).length||I()})))},T=function(e){if(e.lengthComputable){var t=e.total,n=100*e.loaded/t,o=w(n);g.html(Math.round(n)),v.attr("stroke-dashoffset",o)}},C=function(){l.get(0).value="",u.get(0).value="",f.hide(),g.html(Math.round(0)),v.attr("stroke-dashoffset",w(0))},O=function(e,n){var o=new FormData;f.show(),o.append("file",n),o.append("chat_id",t.getCurrentRoomId()),i.ajax({type:"POST",url:"".concat(r,"/").concat(e),data:o,headers:{"X-Authorization-Token":c},xhr:function(){var e=i.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",T,!1),e},cache:!1,contentType:!1,processData:!1,success:C,error:C})},E=function(e,t){if(console.log(e.type),e.size>5e8)return n.show("Maximum file size is 400MB!"),void C();/(gif|jpe?g|tiff?|png|webp|bmp)$/i.test(e.type)?O("imageupload",e):/(mp4)$/i.test(e.type)?O("videoupload",e):/audio/i.test(e.type)?O("audioupload",e):t&&/video/i.test(e.type)?n.show("Only MP4 files supported"):O("fileupload",e)},R=function(e){"fileupload"===e?O(e,l.get(0).files[0]):E(u.get(0).files[0],!0)},x=function(e){if(e.preventDefault(),e.stopPropagation(),y=0,h.hide(),e.originalEvent.dataTransfer.items&&e.originalEvent.dataTransfer.items.length){var t=e.originalEvent.dataTransfer.items[0],n=t.getAsFile();if(!t.type)return;E(n)}return!1},A=function(){a.onInit(),I()};return{onInit:function(){d.click(_),p.click(A),m.find(".menu__item").click(I),l.change((function(){return R("fileupload")})),u.change((function(){return R("imageupload")})),h.on("dragover",!1).on("drop",x),document.addEventListener("dragover",(function(e){e.preventDefault()})),document.addEventListener("dragenter",(function(e){e.preventDefault(),y+=1,h.show()}),!1),document.addEventListener("dragleave",(function(){0===(y-=1)&&h.hide()}),!1),document.addEventListener("drop",(function(e){y=0,h.hide()})),document.onpaste=function(e){var n=(event.clipboardData||event.originalEvent.clipboardData).items;for(index in n){var o=n[index];if("file"===o.kind&&t.getCurrentRoomId()){var a=o.getAsFile();E(a)}}}},markPhone:function(e){e?p.hide():p.show()}}}.apply(t,o))||(e.exports=a)},209:(e,t,n)=>{var o,a,i=n(755);function r(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}o=[n(875),n(381),n(759),n(436),n(788),n(433),n(25),n(960),n(445),n(244)],void 0===(a=function(e,t,n,o,a,s,c,l,u,m){var p=n.API_URL,f=(n.ATTRIBUE_SIDEBAR_ROOM,[]),v=!1,g=!1,h=c.render,b=c.getAvatar,y=c.convertMessagetime,w=c.humanFileSize,I=c.transformLinkTextToHTML,_=c.htmlEncode,T=e.set,C=e.get,O=i(".scroll-to__bottom"),E=i(".messages__list"),R=i(".js_con_list_mess"),x=i(".--load-mess"),A=function(){R.scrollTop()+R.height()<R[0].scrollHeight-400?O.show():O.hide(),v||g||R.scrollTop()>700||P()},j=function(){var e=R.get(0);R.scrollTop(e.scrollHeight)},k=function(){return R.animate({scrollTop:R[0].scrollHeight},200)},M=function(e){return e.posUnread?(e.posUnread=!1,h(l.unread,{})):""},S=function(e,n,o,a){var r=t(e.msgDate),s={},c={};if(0===n)return s.date=r.format("MMMM DD, YYYY"),s.dateCode=r.format("MMDDYYYY"),h(l.rangeDate,s);(c=t(o[n-1].msgDate),n===o.length-1&&a)&&(t(f[0].msgDate).isSame(r,"date")&&i("[data-mess-date-code='".concat(r.format("MMDDYYYY"),"']")).remove());return c.isSame(r,"date")?"":(s.date=r.format("MMMM DD, YYYY"),s.dateCode=r.format("MMDDYYYY"),h(l.rangeDate,s))},D=function(e){var t=s.getInfomation(),n=s.getRoomInfoWasEdited(),o={id:e.id.messageId,chatType:e.type};try{var a;if(7===e.type)return o.who=e.message,h(l.leftGroup,o);if(5===e.type)return o.who=e.message,h(l.joinGroup,o);if(21===e.type||24===e.type)return o.mess=e.message,h(l.call,o);if(o.src=b(e.sender.id),o.name=_((null===(a=n[e.sender.id])||void 0===a?void 0:a.user_name)||e.sender.name),o.officially_name=_(e.sender.name),o.userId=e.sender.id,o.show_internal=e.internal?"":"hidden",o.who=t.id===e.sender.id?"you":"",o.date=y(e.msgDate),e.message.indexOf('"></c>')>-1&&-1===e.message.indexOf('<div class="col-xs-12 comment-box-inline" style="margin-left: 0;">'))try{var i;splitMess=e.message.split('<c style="display:none" ob="');var r=JSON.parse(splitMess[1].replace('"></c>',""));o.comment='<div class="comment-box-inline" style="margin-left: 0;">'.concat(_((null===(i=n[null==r?void 0:r.userId])||void 0===i?void 0:i.user_name)||(null==r?void 0:r.name)),": ").concat(r.mess,"</div>"),o.mess=I(splitMess[0])}catch(t){console.log(t),o.mess=I(e.message)}else o.mess=I(e.message);return e.file&&(o.isFile="have-file",o.mess=function(e){var t={};switch(e.type){case 2:return t.src="".concat(p,"/image?id=").concat(e.id,"&small=1"),h(l.image,t);case 3:return t.src="".concat(p,"/audio?id=").concat(e.id),h(l.audio,t);case 4:return t.src="".concat(p,"/stream?id=").concat(e.id),h(l.video,t);default:return t.src="".concat(p,"/file?id=").concat(e.id),t.fileName=e.filename,t.fileSize=w(e.size),h(l.file,t)}}(e.file)),h(l.mess,o)}catch(t){return console.log("Bug render message"),console.log(t),console.log(e),console.log(f),""}},P=function(){var e,t,n={chatId:s.getCurrentRoomId(),offset:null===(e=f[0])||void 0===e||null===(t=e.id)||void 0===t?void 0:t.messageId};v=!0,a.get("messages",n).then((function(e){var t,n,o,a,i=[];0===e.status&&((null==e||null===(t=e.data)||void 0===t||null===(n=t.messages)||void 0===n?void 0:n.length)<20&&(g=!0),a=(i=i.concat((null==e||null===(o=e.data)||void 0===o?void 0:o.messages)||[]).reverse()).map((function(e,t,n){return S(e,t,n,!0)+D(e)})).join(""),f=[].concat(r(i),r(f)),R.scrollTop(R.scrollTop()+10),E.prepend(a),setTimeout((function(){v=!1}),50))}))},B=function(e){console.log(e),o.show("Unable to connect to the Internet"),s.setCurrentRoomId(null),i(".js_caption").show(),i(".js_wrap_mess").hide(),i("[".concat(n.ATTRIBUE_SIDEBAR_ROOM,"]")).removeClass("active")},N=function(e,t){return a.get("messages",{chatId:e.id,offset:0}).then((function(a){var c,l,m,p,h,b;if(e.id===s.getCurrentRoomId()&&0===a.status){if(2===a.status)return y=s.getCurrentRoomId(),w=s.getRooms().filter((function(e){return e.id!==y})),i(".js_caption").show(),i(".js_wrap_mess").hide(),i("[".concat(n.ATTRIBUE_SIDEBAR_ROOM,'="').concat(y,'"]')).remove(),s.setRooms(w),s.setCurrentRoomId(null),void o.show("This chat room no longer exists");var y,w,I,_,O,A,k=e.unreadMessages>0&&e.unreadMessages<16,P=null;if((null==a||null===(c=a.data)||void 0===c||null===(l=c.messages)||void 0===l?void 0:l.length)<20&&(g=!0),u.onRenderTimeActivity(null==a||null===(m=a.data)||void 0===m?void 0:m.partnerLastTimeActivity),e.group&&a.data.members?s.setCurrentGroupMembers(a.data.members):s.setCurrentGroupMembers(null),k&&null!=a&&null!==(p=a.data)&&void 0!==p&&null!==(h=p.messages)&&void 0!==h&&h.length){var B=e.unreadMessages-1;a.data.messages[B]?(a.data.messages[B].posUnread=!0,P=a.data.messages[B].id.messageId):k=!1}I=(f=f.concat(((null==a||null===(b=a.data)||void 0===b?void 0:b.messages)||[]).reverse())).map((function(e,t,n){return S(e,t,n)+M(e)+D(e)})).join(""),E.html(I),x.hide(),C("chats").then((function(t){var n;(n=t||{})[e.id]=f,T("chats",n)})),k?(_=i('[data-chat-id="'.concat(P,'"]')).offset().top,O=R.offset().top,A=R.scrollTop(),R.scrollTop(_+A-(O+200))):R.scrollTop(R[0].scrollHeight),E.find(".--click-show-popup-up-img").on("load",j),setTimeout((function(){!function(e,t){var n=d({},e),o=r(s.getRooms());i('[data-room-id="'.concat(n.id,'"]')).find(".badge").html(""),n.unreadMessages=0,o[t]=d({},n),s.setRooms(o)}(e,t),v=!1}),50)}})).catch(B)};return{onInit:function(){m.onInit(),R.scroll(A),O.click(k),i(document).on("click",".btn-message-settings",(function(e){return m.onShow(e)}))},onLoadMessage:function(e,t){s.setCurrentGroupMembers(null),x.show(),E.html(""),v=!0,g=!1,f=[],s.getNetworkStatus()?N(d({},e),t):C("chats").then((function(t){if(t&&t[e.id]){var n=t[e.id].map((function(e,t,n){return S(e,t,n)+M(e)+D(e)})).join("");E.html(n),x.hide(),i('[data-room-id="'.concat(e.id,'"]')).find(".badge").html(""),R.scrollTop(R[0].scrollHeight)}else B("")}))},onSync:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(i('[data-chat-id="'.concat(null===(e=n[0])||void 0===e||null===(t=e.id)||void 0===t?void 0:t.messageId,'"]')).length)return!1;var o=R.get(0),a=o.scrollHeight-o.scrollTop<=o.clientHeight,r=n.map((function(e,t){return 0===t&&f.length?S(e,1,[].concat(f[f.length-1],e))+D(e):D(e)})).join("");f=f.concat(n),E.append(r),a&&(R.scrollTop(o.scrollHeight),E.find(".--click-show-popup-up-img").on("load",j))},onSyncRemove:function(e){var t=i('[data-chat-id="'.concat(e,'"]')),n=t.prev(),o=n.prev();n.hasClass("not-mess-li")&&n.remove(),o.hasClass("not-mess-li")&&o.remove(),t.remove(),f=f.filter((function(t){return t.id.messageId!==e}))},onSyncUpdate:function(e){var t=e.id.messageId;i('[data-chat-id="'.concat(t,'"]')).find(".--mess").html(I(e.message)),f=f.map((function(n){return n.id.messageId===t&&(n.message=e.message),n}))}}}.apply(t,o))||(e.exports=a)},960:(e,t,n)=>{var o,a;o=[n(759)],void 0===(a=function(e){var t={unread:'\n            <li class="not-mess-li">\n                <div class="messages__unreadLine">\n                    unread messages\n                </div>\n            </li>\n        ',call:'\n            <li class="not-mess-li call-mess" data-chat-id="{id}">\n                <div class="messages__unreadLine">\n                    {mess}\n                </div>\n            </li>\n        ',rangeDate:'\n            <li class="not-mess-li">\n                <div class="messages__time-chat" data-mess-date-code="{dateCode}">\n                    {date}\n                </div>\n             </li>\n        ',leftGroup:'\n            <li class="js_li_list_mess" data-chat-id="{id}">\n                <div class="messages__left-chat">\n                    {who} - left chat\n                </div>\n            </li>\n        ',joinGroup:'\n            <li class="js_li_list_mess" data-chat-id="{id}">\n                <div class="messages__join-chat">{who}  - joined chat\n                </div>\n            </li>\n        ',file:'<i class="xm xm-download"></i> <a href="{src}" target="_blank">{fileName}</a> {fileSize}',image:'<img class="p-cur --click-show-popup-up-img" src="{src}">',audio:'<audio controls>source src="{src}" type="audio/mpeg">Your browser does not support the audio element.</audio>',video:'<video width="400" controls><source src="{src}" type="video/mp4">Your browser does not support HTML video.</video>',mess:'\n            <li class="js_li_list_mess {who} messages__item {isFile}" data-chat-id="{id}" data-chat-type="{chatType}">\n                <div class="--content">\n                    <div class="--heading">\n                        <img '.concat(e.ATTRIBUTE_CHANGE_IMAGE,'="{userId}" class="--img avatar" src="{src}" onerror="this.src=\'/assets/images/user.jpg\'">\n                        <div class="--name" ').concat(e.ATTRIBUTE_CHANGE_NAME,'="{userId}" data-user-officially-name="{officially_name}">{name}</div>\n                        <div class="messages--internal {show_internal}">Internal</div>\n                    </div>\n                    {comment}\n                    <div class="--mess">{mess}</div>\n                    <div class="messages__bottom">\n                        <div class="--date">{date}</div>\n                        <div class="xm xm-bars --bars --menu p-cur btn-message-settings"></div>\n                    </div>\n                </div>\n            </li>\n        ')};return Object.freeze(t)}.apply(t,o))||(e.exports=a)},851:(e,t,n)=>{var o,a,i=n(755);o=[n(25),n(788),n(433)],void 0===(a=function(e,t,n){var o=e.htmlDecode,a=e.htmlEncode,r=e.stripTags,s=e.transformLinkTextToHTML,c=i(".js_endter_mess"),d=i(".js_con_list_mess"),l=i(".btn__send"),u=i(".mess-comment-box"),m=u.find(".mess-fw-box"),p=u.find(".mess-fw-box-close"),f=[],v=!1,g=!1,h=!1,b=0,y=function(){var e=c.get(0),t=d.get(0),n=t.scrollTop+t.clientHeight>=t.scrollHeight;setTimeout((function(){e.style.cssText="";var o=Math.min(window.outerHeight/5,e.scrollHeight);e.style.cssText="height: ".concat(o,"px"),t.style.cssText="height: calc(100% - ".concat(68+o,"px)"),n&&t.scrollTo(0,t.scrollHeight)}),0)},w=function(e){13!==e.keyCode||e.shiftKey||(e.preventDefault(),C()),y()},I=function(){return y()},_=function(){b=0,g=!1,v=!1,h=!1,c.val(""),c.focus(),u.hide(),y()},T=function e(n){return t.post("messages",n).then((function(){f.shift(),f.length&&e(f[0])})).catch((function(){return setTimeout((function(){return e(f[0])}),5e3)}))},C=function(){var e,t,o=n.getRoomInfoWasEdited(),i=n.getCurrentRoomId(),r=c.val();(new Date).getTime();r.replace(/[\s\n]/g,"")?(r=a(r),h&&(r="".concat(r,'<c style="display:none" ob="').concat(JSON.stringify(h),'"></c>')),t={sender:n.getInfomation(),id:{chatId:i,messageId:b},comment:1,message:r,type:1,deleted:g,updated:v,internal:!(null===(e=o[i])||void 0===e||!e.hide_mess)},_(),f.length||T(t),f=f.concat(t)):_()},O=function(){h=!1,u.hide()};return{onInit:function(){c.keydown(w),c.bind("paste",I),l.click(C),p.click(O)},onUpdate:function(e,t){var n=o(r(t.replace(/<br>/g,"\n")));c.val(n),c.focus(),v=!0,b=e,y()},onRemove:function(e,t){g=!0,b=e,c.val(t),C()},onComment:function(e){h={chatId:e.chatId,mess:e.mess,name:e.officiallyName,userId:e.userId},c.focus(),u.show(),m.html("<b>".concat(e.name,'</b>: <span class="span-mess-cmt span-mess-cmt-ids">').concat(e.hasFile?e.mess:s(e.mess),"</span>"))},onAddEmoji:function(e){c.val(c.val()+e),c.focus()},onClear:_}}.apply(t,o))||(e.exports=a)},445:(e,t,n)=>{var o,a,i=n(755);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}o=[n(381),n(759),n(433),n(788),n(25),n(582),n(908),n(585),n(265)],void 0===(a=function(e,t,n,o,a,r,c,d,l){var u=a.getAvatar,m=i(".js-group-option"),p=i("#chatbox-group-option"),f=p.find(".--edit-group"),v=p.find(".--internal"),g=v.find("span"),h=p.find(".--disabled"),b=h.find("span"),y=p.find(".--leave"),w=p.find(".--remove"),I=i(".js_info_parnter .toolbar-name .--name"),_=i(".js_info_parnter .--img.avatar"),T=i(".js_info_parnter .toolbar-name .--online"),C=function(){p.hide(),i(document).off(".hideChatboxTopBarOptionsSlice")},O=function(e){e.preventDefault(),e.stopPropagation(),p.show(),i(document).on("click.hideChatboxTopBarOptionsSlice",(function(e){p.is(e.target)||0!==p.has(e.target).length||C()}))},E=function(){r.onInit(n.getCurrentRoomId()),C()},R=function(){l.onInit(),C()},x=function(){d.onInit(),C()},A=function(){var e=n.getCurrentRoomId(),t=s({},n.getRoomInfoWasEdited());t[e]=t[e]||{},t[e].hide_mess?(g.html("Enable"),delete t[e].hide_mess):(g.html("Disable"),t[e].hide_mess=!0),n.setRoomInfoWasEdited(t),C(),o.put("users/preferences",{user_chat_info:t}).then((function(){}))},j=function(){var e=n.getCurrentRoomId(),a=i("[".concat(t.ATTRIBUE_SIDEBAR_ROOM,'="').concat(e,'"]')),r=s({},n.getRoomInfoWasEdited());r[e]=r[e]||{},!1===r[e].notification_mess?(a.removeClass("mute"),b.html("Disable"),delete r[e].notification_mess):(a.addClass("mute"),b.html("Enable"),r[e].notification_mess=!1),n.setRoomInfoWasEdited(r),C(),o.put("users/preferences",{user_chat_info:r}).then((function(){}))};return{onInit:function(){m.click(O),f.click(E),y.click(R),w.click(x),h.click(j),v.click(A),_.click(c.onInit)},onRenderInfomation:function(e){var o,a,i=n.getRoomInfoWasEdited();if(_.off("error"),T.html(""),!1===(null===(o=i[e.id])||void 0===o?void 0:o.notification_mess)?b.html("Enable"):b.html("Disable"),null!==(a=i[e.id])&&void 0!==a&&a.hide_mess?g.html("Disable"):g.html("Enable"),e.group)_.attr(t.ATTRIBUTE_CHANGE_IMAGE_GROUP,e.id),_.attr("src",u(e.id,!0)),_.on("error",(function(){return _.attr("src","/assets/images/group.svg")})),I.text(e.subject),I.removeAttr(t.ATTRIBUTE_CHANGE_NAME),f.show(),v.show(),y.show(),w.show(),T.hide();else{var r,s,c=e.partner.id,d=(null===(r=n.getRoomInfoWasEdited()[c])||void 0===r?void 0:r.user_name)||e.partner.name;_.removeAttr(t.ATTRIBUTE_CHANGE_IMAGE_GROUP),_.attr("src",u(null===(s=e.partner)||void 0===s?void 0:s.id)),_.on("error",(function(){return _.attr("src","/assets/images/user.jpg")})),I.text(d),I.attr(t.ATTRIBUTE_CHANGE_NAME,c),f.hide(),v.hide(),y.hide(),w.hide(),T.show()}},onRenderTimeActivity:function(t){t&&(e().diff(e(t),"seconds")<=30?T.html("online"):T.html("last seen ".concat(e(t).fromNow())))},onUpdateTitle:function(e){I.text(e)}}}.apply(t,o))||(e.exports=a)},296:(e,t,n)=>{var o,a,i=n(755);o=[n(851)],void 0===(a=function(e){var t=["ğŸ˜„","ğŸ˜ƒ","ğŸ˜€","ğŸ˜Š","ğŸ˜‰","ğŸ˜","ğŸ˜˜","ğŸ˜š","ğŸ˜—","ğŸ˜™","ğŸ˜œ","ğŸ˜","ğŸ˜›","ğŸ˜³","ğŸ˜","ğŸ˜”","ğŸ˜Œ","ğŸ˜’","ğŸ˜","ğŸ˜£","ğŸ˜¢","ğŸ˜‚","ğŸ˜­","ğŸ˜ª","ğŸ˜¥","ğŸ˜°","ğŸ˜…","ğŸ˜“","ğŸ˜©","ğŸ˜«","ğŸ˜¨","ğŸ˜±","ğŸ˜ ","ğŸ˜¡","ğŸ˜¤","ğŸ˜–","ğŸ˜†","ğŸ˜‹","ğŸ˜·","ğŸ˜","ğŸ˜´","ğŸ˜µ","ğŸ˜²","ğŸ˜Ÿ","ğŸ˜¦","ğŸ˜§","ğŸ˜ˆ","ğŸ‘¿","ğŸ˜®","ğŸ˜¬","ğŸ˜","ğŸ˜•","ğŸ˜¯","ğŸ˜¶","ğŸ˜‡","ğŸ˜","ğŸ˜‘"],n=["ğŸ‘²","ğŸ‘³","ğŸ‘®","ğŸ‘·","ğŸ’‚","ğŸ‘¶","ğŸ‘¦","ğŸ‘§","ğŸ‘¨","ğŸ‘©","ğŸ‘´","ğŸ‘µ","ğŸ‘±","ğŸ‘¼","ğŸ‘¸","ğŸ˜º","ğŸ˜¸","ğŸ˜»","ğŸ˜½","ğŸ˜¼","ğŸ™€","ğŸ˜¿","ğŸ˜¹","ğŸ˜¾","ğŸ‘¹","ğŸ‘º","ğŸ™ˆ","ğŸ™‰","ğŸ™Š","ğŸ’€","ğŸ‘½","ğŸ’©","ğŸ”¥","âœ¨","ğŸŒŸ","ğŸ’«","ğŸ’¥","ğŸ’¢","ğŸ’¦","ğŸ’§","ğŸ’¤","ğŸ’¨","ğŸ‘‚","ğŸ‘€","ğŸ‘ƒ","ğŸ‘…","ğŸ‘„","ğŸ‘","ğŸ‘","ğŸ‘Œ","ğŸ‘Š","âœŠ","âœŒï¸","ğŸ‘‹","âœ‹","ğŸ‘","ğŸ‘†","ğŸ‘‡","ğŸ‘‰","ğŸ‘ˆ","ğŸ™Œ","ğŸ™","â˜ï¸","ğŸ‘","ğŸ’ª","ğŸš¶","ğŸƒ","ğŸ’ƒ","ğŸ‘«","ğŸ‘ª","ğŸ‘¬","ğŸ‘­","ğŸ’","ğŸ’‘","ğŸ‘¯","ğŸ™†","ğŸ™…","ğŸ’","ğŸ™‹","ğŸ’†","ğŸ’‡","ğŸ’…","ğŸ‘°","ğŸ™","ğŸ™","ğŸ™‡","ğŸ©","ğŸ‘‘","ğŸ‘’","ğŸ‘Ÿ","ğŸ‘","ğŸ‘¡","ğŸ‘ ","ğŸ‘¢","ğŸ‘•","ğŸ‘”","ğŸ‘š","ğŸ‘—","ğŸ½","ğŸ‘–","ğŸ‘˜","ğŸ‘™","ğŸ’¼","ğŸ‘œ","ğŸ‘","ğŸ‘›","ğŸ‘“","ğŸ€","ğŸŒ‚","ğŸ’„","ğŸ’›","ğŸ’™","ğŸ’œ","ğŸ’š","â¤ï¸","ğŸ’”","ğŸ’—","ğŸ’“","ğŸ’•","ğŸ’–","ğŸ’","ğŸ’˜","ğŸ’Œ","ğŸ’‹","ğŸ’","ğŸ’","ğŸ‘¤","ğŸ‘¥","ğŸ’¬","ğŸ‘£","ğŸ’­","ğŸ¶","ğŸº","ğŸ±","ğŸ­","ğŸ¹","ğŸ°","ğŸ¸","ğŸ¯","ğŸ¨","ğŸ»","ğŸ·","ğŸ½","ğŸ®","ğŸ—","ğŸµ","ğŸ’","ğŸ´","ğŸ‘","ğŸ˜","ğŸ¼","ğŸ§","ğŸ¦","ğŸ¤","ğŸ¥","ğŸ£","ğŸ”","ğŸ","ğŸ¢","ğŸ›","ğŸ","ğŸœ","ğŸ","ğŸŒ","ğŸ™","ğŸš","ğŸ ","ğŸŸ","ğŸ¬","ğŸ³","ğŸ‹","ğŸ„","ğŸ","ğŸ€","ğŸƒ","ğŸ…","ğŸ‡","ğŸ‰","ğŸ","ğŸ","ğŸ“","ğŸ•","ğŸ–","ğŸ","ğŸ‚","ğŸ²","ğŸ¡","ğŸŠ","ğŸ«","ğŸª","ğŸ†","ğŸˆ","ğŸ©","ğŸ¾","ğŸ’","ğŸŒ¸","ğŸŒ·","ğŸ€","ğŸŒ¹","ğŸŒ»","ğŸŒº","ğŸ","ğŸƒ","ğŸ‚","ğŸŒ¿","ğŸŒ¾","ğŸ„","ğŸŒµ","ğŸŒ´","ğŸŒ²","ğŸŒ³","ğŸŒ°","ğŸŒ±","ğŸŒ¼","ğŸŒ","ğŸŒ","ğŸŒ","ğŸŒš","ğŸŒ‘","ğŸŒ’","ğŸŒ“","ğŸŒ”","ğŸŒ•","ğŸŒ–","ğŸŒ—","ğŸŒ˜","ğŸŒœ","ğŸŒ›","ğŸŒ™","ğŸŒ","ğŸŒ","ğŸŒ","ğŸŒ‹","ğŸŒŒ","ğŸŒ ","â­","â˜€ï¸","â›…","â˜ï¸","âš¡","â˜”","â„ï¸","â›„","ğŸŒ€","ğŸŒ","ğŸŒˆ","ğŸŒŠ","ğŸ","ğŸ’","ğŸ","ğŸ’","ğŸ“","ğŸ","ğŸ†","ğŸ‡","ğŸ","ğŸ‘","ğŸƒ","ğŸ‘»","ğŸ…","ğŸ„","ğŸ","ğŸ‹","ğŸ‰","ğŸŠ","ğŸˆ","ğŸŒ","ğŸ”®","ğŸ¥","ğŸ“·","ğŸ“¹","ğŸ“¼","ğŸ’¿","ğŸ“€","ğŸ’½","ğŸ’¾","ğŸ’»","ğŸ“±","â˜ï¸","ğŸ“","ğŸ“Ÿ","ğŸ“ ","ğŸ“¡","ğŸ“º","ğŸ“»","ğŸ”Š","ğŸ”‰","ğŸ”ˆ","ğŸ”‡","ğŸ””","ğŸ”•","ğŸ“¢","ğŸ“£","â³","âŒ›","â°","âŒš","ğŸ”“","ğŸ”’","ğŸ”","ğŸ”","ğŸ”‘","ğŸ”","ğŸ’¡","ğŸ”¦","ğŸ”†","ğŸ”…","ğŸ”Œ","ğŸ”‹","ğŸ”","ğŸ›","ğŸ›€","ğŸš¿","ğŸš½","ğŸ”§","ğŸ”©","ğŸ”¨","ğŸšª","ğŸš¬","ğŸ’£","ğŸ”«","ğŸ”ª","ğŸ’Š","ğŸ’‰","ğŸ’°","ğŸ’´","ğŸ’µ","ğŸ’·","ğŸ’¶","ğŸ’³","ğŸ’¸","ğŸ“²","ğŸ“§","ğŸ“¥","ğŸ“¤","âœ‰ï¸","ğŸ“©","ğŸ“¨","ğŸ“¯","ğŸ“«","ğŸ“ª","ğŸ“¬","ğŸ“­","ğŸ“®","ğŸ“¦","ğŸ“","ğŸ“„","ğŸ“ƒ","ğŸ“‘","ğŸ“Š","ğŸ“ˆ","ğŸ“‰","ğŸ“œ","ğŸ“‹","ğŸ“…","ğŸ“†","ğŸ“‡","ğŸ“","ğŸ“‚","âœ‚ï¸","ğŸ“Œ","ğŸ“","âœ’ï¸","âœï¸","ğŸ“","ğŸ“","ğŸ“•","ğŸ“—","ğŸ“˜","ğŸ“™","ğŸ““","ğŸ“”","ğŸ“’","ğŸ“š","ğŸ“–","ğŸ”–","ğŸ“›","ğŸ”¬","ğŸ”­","ğŸ“°","ğŸ¨","ğŸ¬","ğŸ¤","ğŸ§","ğŸ¼","ğŸµ","ğŸ¶","ğŸ¹","ğŸ»","ğŸº","ğŸ·","ğŸ¸","ğŸ‘¾","ğŸ®","ğŸƒ","ğŸ´","ğŸ€„","ğŸ²","ğŸ¯","ğŸˆ","ğŸ€","âš½","âš¾ï¸","ğŸ¾","ğŸ±","ğŸ‰","ğŸ³","â›³","ğŸšµ","ğŸš´","ğŸ","ğŸ‡","ğŸ†","ğŸ¿","ğŸ‚","ğŸŠ","ğŸ„","ğŸ£","â˜•","ğŸµ","ğŸ¶","ğŸ¼","ğŸº","ğŸ»","ğŸ¸","ğŸ¹","ğŸ·","ğŸ´","ğŸ•","ğŸ”","ğŸŸ","ğŸ—","ğŸ–","ğŸ","ğŸ›","ğŸ¤","ğŸ±","ğŸ£","ğŸ¥","ğŸ™","ğŸ˜","ğŸš","ğŸœ","ğŸ²","ğŸ¢","ğŸ¡","ğŸ³","ğŸ","ğŸ©","ğŸ®","ğŸ¦","ğŸ¨","ğŸ§","ğŸ‚","ğŸ°","ğŸª","ğŸ«","ğŸ¬","ğŸ­","ğŸ¯","ğŸ","ğŸ","ğŸŠ","ğŸ‹","ğŸ’","ğŸ‡","ğŸ‰","ğŸ“","ğŸ‘","ğŸˆ","ğŸŒ","ğŸ","ğŸ","ğŸ ","ğŸ†","ğŸ…","ğŸŒ½","ğŸ ","ğŸ¡","ğŸ«","ğŸ¢","ğŸ£","ğŸ¥","ğŸ¦","ğŸª","ğŸ©","ğŸ¨","ğŸ’’","â›ª","ğŸ¬","ğŸ¤","ğŸŒ‡","ğŸŒ†","ğŸ¯","ğŸ°","â›º","ğŸ­","ğŸ—¼","ğŸ—¾","ğŸ—»","ğŸŒ„","ğŸŒ…","ğŸŒƒ","ğŸ—½","ğŸŒ‰","ğŸ ","ğŸ¡","â›²","ğŸ¢","ğŸš¢","â›µ","ğŸš¤","ğŸš£","âš“","ğŸš€","âœˆï¸","ğŸ’º","ğŸš","ğŸš‚","ğŸšŠ","ğŸš‰","ğŸš","ğŸš†","ğŸš„","ğŸš…","ğŸšˆ","ğŸš‡","ğŸš","ğŸš‹","ğŸšƒ","ğŸš","ğŸšŒ","ğŸš","ğŸš™","ğŸš˜","ğŸš—","ğŸš•","ğŸš–","ğŸš›","ğŸšš","ğŸš¨","ğŸš“","ğŸš”","ğŸš’","ğŸš‘","ğŸš","ğŸš²","ğŸš¡","ğŸšŸ","ğŸš ","ğŸšœ","ğŸ’ˆ","ğŸš","ğŸ«","ğŸš¦","ğŸš¥","âš ï¸","ğŸš§","ğŸ”°","â›½","ğŸ®","ğŸ°","â™¨ï¸","ğŸ—¿","ğŸª","ğŸ­","ğŸ“","ğŸš©"],o=["1ï¸âƒ£","2ï¸âƒ£","3ï¸âƒ£","4ï¸âƒ£","5ï¸âƒ£","6ï¸âƒ£","7ï¸âƒ£","8ï¸âƒ£","9ï¸âƒ£","0ï¸âƒ£","ğŸ”Ÿ","ğŸ”¢","#ï¸âƒ£","ğŸ”£","â¬†ï¸","â¬‡ï¸","â¬…ï¸","â¡ï¸","ğŸ” ","ğŸ”¡","ğŸ”¤","â†—ï¸","â†–ï¸","â†˜ï¸","â†™ï¸","â†”ï¸","â†•ï¸","ğŸ”„","â—€ï¸","â–¶ï¸","ğŸ”¼","ğŸ”½","â†©ï¸","â†ªï¸","â„¹ï¸","âª","â©","â«","â¬","â¤µï¸","â¤´ï¸","ğŸ†—","ğŸ”€","ğŸ”","ğŸ”‚","ğŸ†•","ğŸ†™","ğŸ†’","ğŸ†“","ğŸ†–","ğŸ“¶","ğŸ¦","ğŸˆ","ğŸˆ¯","ğŸˆ³","ğŸˆµ","ğŸˆ´","ğŸˆ²","ğŸ‰","ğŸˆ¹","ğŸˆº","ğŸˆ¶","ğŸˆš","ğŸš»","ğŸš¹","ğŸšº","ğŸš¼","ğŸš¾","ğŸš°","ğŸš®","ğŸ…¿ï¸","â™¿","ğŸš­","ğŸˆ·ï¸","ğŸˆ¸","ğŸˆ‚ï¸","â“‚ï¸","ğŸ›‚","ğŸ›„","ğŸ›…","ğŸ›ƒ","ğŸ‰‘","ãŠ™ï¸","ãŠ—ï¸","ğŸ†‘","ğŸ†˜","ğŸ†”","ğŸš«","ğŸ”","ğŸ“µ","ğŸš¯","ğŸš±","ğŸš³","ğŸš·","ğŸš¸","â›”","âœ³ï¸","â‡ï¸","â","âœ…","âœ´ï¸","ğŸ’Ÿ","ğŸ†š","ğŸ“³","ğŸ“´","ğŸ…°ï¸","ğŸ…±ï¸","ğŸ†","ğŸ…¾ï¸","ğŸ’ ","â¿","â™»ï¸","â™ˆ","â™‰","â™Š","â™‹","â™Œ","â™","â™","â™","â™","â™‘","â™’","â™“","â›","ğŸ”¯","ğŸ§","ğŸ’¹","ğŸ’²","ğŸ’±","Â©ï¸","Â®ï¸","â„¢ï¸","âŒ","â€¼ï¸","â‰ï¸","â—","â“","â•","â”","â­•","ğŸ”","ğŸ”š","ğŸ”™","ğŸ”›","ğŸ”œ","ğŸ”ƒ","ğŸ•›","ğŸ•§","ğŸ•","ğŸ•œ","ğŸ•‘","ğŸ•","ğŸ•’","ğŸ•","ğŸ•“","ğŸ•Ÿ","ğŸ•”","ğŸ• ","ğŸ••","ğŸ•–","ğŸ•—","ğŸ•˜","ğŸ•™","ğŸ•š","ğŸ•¡","ğŸ•¢","ğŸ•£","ğŸ•¤","ğŸ•¥","ğŸ•¦","âœ–ï¸","â•","â–","â—","â™ ï¸","â™¥ï¸","â™£ï¸","â™¦ï¸","ğŸ’®","ğŸ’¯","âœ”ï¸","â˜‘ï¸","ğŸ”˜","ğŸ”—","â°","ã€°ï¸","ã€½ï¸","ğŸ”±","â—¼ï¸","â—»ï¸","â—¾","â—½","â–ªï¸","â–«ï¸","ğŸ”º","ğŸ”²","ğŸ”³","âš«","âšª","ğŸ”´","ğŸ”µ","ğŸ”»","â¬œ","â¬›","ğŸ”¶","ğŸ”·","ğŸ”¸","ğŸ”¹"],a=!1,r=i(".wrap-emojis"),s=i(".btn__emoji"),c=i("[data-em-tab-btn]"),d=i('[data-em-tab-content="--tab-1"]'),l=i('[data-em-tab-content="--tab-2"]'),u=i('[data-em-tab-content="--tab-3"]'),m=function(e){return'<button data-em-btn="'.concat(e,'" class="btn-em">').concat(e,"</button>")},p=function(e){var t=i(e.currentTarget),n=t.data().emTabBtn;c.removeClass("active"),t.addClass("active"),i("[data-em-tab-content]").removeClass("active"),i('[data-em-tab-content="'.concat(n,'"]')).addClass("active")},f=function(){a=!1,r.hide(),i(document).off(".hideEmojiWrapper")},v=function(e){e.preventDefault(),e.stopPropagation(),a?f():(a=!0,r.show(),i(document).on("click.hideEmojiWrapper",(function(e){r.is(e.target)||0!==r.has(e.target).length||f()})))},g=function(t){var n=i(t.currentTarget).data().emBtn;e.onAddEmoji(n)};return{onInit:function(){d.html(t.map(m).join("")),l.html(n.map(m).join("")),u.html(o.map(m).join("")),c.click(p),s.click(v),i(document).on("click","[data-em-btn]",g)}}}.apply(t,o))||(e.exports=a)},244:(e,t,n)=>{var o,a,i=n(755);o=[n(25),n(851),n(857)],void 0===(a=function(e,t,n){var o,a=!1,r=i(".js_con_list_mess"),s=i(".js-menu-messages"),c=i(".js-menu-messages-cmt"),d=i(".js-menu-messages-forward"),l=i(".js-menu-messages-edit"),u=i(".js-menu-messages-remove"),m=function(){var n=o.data().chatId,a=o.find(".--name"),i=a.html(),r=o.find(".--mess").html(),s=a.data(),c=s.useridName,d=s.userOfficiallyName,l=e.stripTags(r),u=0;o.hasClass("have-file")&&(u=1,l=r),g(),t.onComment({chatId:n,userId:c,mess:l,name:i,hasFile:u,officiallyName:d})},p=function(){var e=o.data().chatId;g(),n.onInit(e)},f=function(){var e=o.data().chatId,n=o.find(".--mess").html();g(),t.onUpdate(e,n)},v=function(){var e=o.data().chatId,n=o.find(".--mess").html();g(),o.remove(),t.onRemove(e,n)},g=function(){a=!1,s.hide(),i(document).off(".hideMessageSettings")};return{onInit:function(){c.click(m),d.click(p),l.click(f),u.click(v)},onShow:function(e){if(e.preventDefault(),e.stopPropagation(),a)g();else{var t=i(e.currentTarget);o=t.closest(".js_li_list_mess"),a=!0,n=o.hasClass("you"),c=o.hasClass("have-file"),n?(l.show(),u.show()):(l.hide(),u.hide()),c&&l.hide(),function(e){i(window).width();var t=i(window).height(),n=s.height(),o=e.offset(),a=o.left-(r.offset().left+132),c=o.top+20;n+c+100>t&&(c=o.top-n-20),s.css({display:"block",top:"".concat(c,"px"),left:"".concat(a,"px")})}(t),i(document).on("click.hideMessageSettings",(function(e){s.is(e.target)||0!==s.has(e.target).length||g()}))}var n,c}}}.apply(t,o))||(e.exports=a)},640:(e,t,n)=>{var o,a,i=n(755);o=[n(759),n(433),n(788),n(25)],void 0===(a=function(e,t,o,a){var r,s,c,d=a.render,l=function(){if(!s){var e=i("#acceptInvitationModal"),a=e.find(".btn-outline-primary"),c=e.find(".btn-outline-secondary");c.hide(),a.prop("disabled",!0),s=!0,o.post("contacts/".concat(r,"/accept")).then((function(){o.get("chats").then((function(e){n(814).onInit(),t.setRoomsWithAdapter(e.data.chats),c.click()})).catch((function(e){console.log(e),s=!1,a.prop("disabled",!1)}))})).catch((function(){s=!1,a.prop("disabled",!1)}))}};return{onInit:function(t){c||(c=!0,i(document).on("click","#acceptInvitationModal .btn-outline-primary",l)),r=t.find("[".concat(e.ATTRIBUTE_CHANGE_NAME,"]")).data().userId;var n=t.find(".avatar").prop("src"),o=n.indexOf("users");r=n.substring(o+6,o+18),i("#acceptInvitationModal").remove&&i("#acceptInvitationModal").remove(),i("body").append(d('\n        <div class="modal fade" id="acceptInvitationModal" tabindex="-1" role="dialog" data-backdrop="static">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <h2>Invite confirmation</h2>\n                        <p>Do you accept invitation from {name}</p>\n                        <button type="button" class="btn btn-outline-primary btn-small float-right">\n                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>\n                            Accept\n                        </button>\n                        <button type="button" data-dismiss="modal" aria-label="Close" class="btn btn-outline-secondary btn-small float-right">Cancel</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    ',{name:t.find(".contact__name span").text()})),i("#acceptInvitationModal").modal("show")}}}.apply(t,o))||(e.exports=a)},582:(e,t,n)=>{var o,a,i=n(755);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}o=[n(759),n(379),n(788),n(433),n(25),n(436)],void 0===(a=function(e,t,o,a,r,c){var l,u,m,p,f,v,g,h,b,y,w,I=r.render,_=r.debounce,T=r.getAvatar,C=r.htmlDecode,O=r.htmlEncode,E=[],R=!1,x=null,A='\n        <div data-mcg-id="{id}" data-mcg-name="{name}" class="crm-room">\n            <img class="--img avatar" src="{src}">\n            <span '.concat(e.ATTRIBUTE_CHANGE_NAME,'="{id}">{currentName}</span>\n            <div class="styled-checkbox"></div>\n        </div>\n    '),j="\n        <div ".concat(e.ATTRIBUTE_CHANGE_NAME,'="{id}" data-mcgs-id="{id}" class="crm-room {admin}">\n            <img class="--img avatar" src="{src}">\n            <span ').concat(e.ATTRIBUTE_CHANGE_NAME,'="{id}">{currentName}</span>\n            <div class="crmr-group-icon">\n                <div class="crmrgi-icon crmrgii-admin" data-toggle="tooltip" data-placement="left" title="Granting administrator permissions">\n                    ').concat(t.ADMIN,'\n                </div>\n                <div class="crmrgi-icon crmrgii-removeadmin" data-toggle="tooltip" data-placement="left" title="Removing administrator permissions">\n                    ').concat(t.REMOVE_ADMIN,'\n                </div>\n                <div class="crmrgi-icon crmrgii-cross" data-toggle="tooltip" data-placement="left" title="Remove this member">\n                    ').concat(t.CROSS,"\n                </div>\n            </div>\n        </div>\n    "),k=function(e){var t,n,o=null==e||null===(t=e.partner)||void 0===t?void 0:t.name,a=(null==e||null===(n=e.partner)||void 0===n?void 0:n.id)||"";return!(!e.id||!o||e.channel||e.group||!a)},M=function(e){var t,n,o,i,r=a.getRoomInfoWasEdited(),s=null==e||null===(t=e.partner)||void 0===t?void 0:t.name,c=(null==e||null===(n=e.partner)||void 0===n?void 0:n.id)||"",d=(null===(o=r[null==e||null===(i=e.partner)||void 0===i?void 0:i.id])||void 0===o?void 0:o.user_name)||s;return{id:c,src:T(c),name:O(s),currentName:O(d)}},S=function(){var e=u.find(".crm-room"),t=b.val().trim().toUpperCase();t?e.each((function(n){var o=e.eq(n),a=o.find("span").text();String(a).toUpperCase().indexOf(t)>-1?o.css("display",""):o.hide()})):e.css("display","")},D=_(S,300),P=function(e){var t=i(e.currentTarget),n=t.data(),o=n.mcgId,r=n.mcgName;if(t.attr("data-mcgi-selected"))E=E.filter((function(e){return e.id!==o})),i('[data-mcgs-id="'.concat(o,'"]')).remove(),t.removeAttr("data-mcgi-selected");else{var s=a.getRoomInfoWasEdited()[o],c=null!=s&&s.user_name?O(s.user_name):r;E=E.concat({id:o,currentName:c,src:T(o),data:{id:o,name:C(r),alias:null,selected:!0}}).sort((function(e,t){return e.currentName.localeCompare(t.currentName)})),t.attr("data-mcgi-selected",o),f.html(E.map((function(e){return I(j,e)}))),u.find('[data-toggle="tooltip"]').tooltip(),b.val()&&S()}w.text(E.length)},B=function(e){var t=i(e.target).closest(".crm-room"),n=t.data().mcgsId;E=E.filter((function(e){return e.id!==n})),i('[data-mcg-id="'.concat(n,'"]')).removeAttr("data-mcgi-selected"),w.text(E.length),i(".tooltip.show").remove(),t.remove()},N=function(e){var t=i(e.target).closest(".crm-room"),n=t.data().mcgsId;E=E.map((function(e){var o=s({},e);return e.id===n&&(t.addClass("admin"),o.admin="admin",o.data.admin=!0),o}))},U=function(e){var t=i(e.target).closest(".crm-room"),n=t.data().mcgsId;E=E.map((function(e){var o=s({},e);return e.id===n&&(t.removeClass("admin"),delete o.admin,delete o.data.admin),o}))},G=function(){g.click(),c.show("Unable to connect to the Internet")},z=function(){if((y.val()?E.length||(c.show("Please select at least one member."),0):(c.show("Please enter group name."),0))&&!l){var e=n(814),t=n(445);h.addClass("loading-btn"),l=!0;var i={members:E.map((function(e){return e.data})),id:x,subject:y.val()};if(x){var r=a.getCurrentRoomId();o.put("chats",i).then((function(n){403===n.status&&(g.click(),c.show("Sorry, you don't have permission to perform this action")),n.chat&&(t.onUpdateTitle(i.subject),e.onUpdateRoomName(r,i.subject),a.setRooms(a.getRooms().map((function(e){var t=s({},e);return r===e.id&&(t.subject=i.subject),t}))),a.setCurrentGroupMembers(E.map((function(e){return{admin:!!e.admin,user:{id:e.id,name:e.name}}}))),g.click())})).catch(G)}else o.post("chats",i).then((function(t){if(t.chat){var n=e.onRenderRoom(t.chat);a.setRooms([a.setRoomWithAdapter(t.chat)].concat(d(a.getRooms()))),e.onPrepend(n),g.click()}})).catch(G)}},L=function(){var e,t,n,o;i("body").append((o=d(a.getRooms().filter(k)).map(M),e={html:o.sort((function(e,t){return e.currentName.localeCompare(t.currentName)})).map((function(e){return I(A,e)})).join(""),numMembers:o.length},t=e.html,n=e.numMembers,'\n        <div class="modal fade" id="createGroupModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h5 class="modal-title">\n                            New group chat\n                        </h5>\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n                    <div class="modal-body">\n                        <div class="crm-loading">\n                            <div class="pulse"></div>\n                        </div>\n                        <input type="text" name="name" id="cgm-input-name" placeholder="Enter Group Name..." maxlength="50" />\n                        <div class="crm-frame-wrapper">\n                            <div class="crmfwu">\n                                <div class="crmfwu-search-box">\n                                    <i class="xm xm-search"></i>\n                                    <input type="search" name="search" id="cgm-input-search" placeholder="Search..." />\n                                    <span class="crmfwusb-title">Group members: <span class="crmfwusbt-num">'.concat(n,'</span> member(s)</span>\n                                </div>\n                                <div class="crmfwus crmfwu-default-user">\n                                    ').concat(t,'\n                                </div>\n                            </div>\n                            <div class="crmfwu">\n                                <h2 class="crmfwu-title">\n                                    Selected: <span class="crmfwut-num">0</span> member(s)\n                                </h2>\n                                <div class="crmfwus crmfwu-selected-user"></div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-outline-primary">\n                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>\n                            Save\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '))),u=i("#createGroupModal"),m=u.find(".modal-title"),h=u.find(".btn-outline-primary"),g=u.find(".close"),f=u.find(".crmfwu-selected-user"),v=u.find(".crmfwu-default-user"),p=u.find(".crm-loading"),w=u.find(".crmfwut-num"),b=i("#cgm-input-search"),y=i("#cgm-input-name"),b.attr("autocomplete","off"),y.attr("autocomplete","off"),u.on("click","[data-mcg-id]",P),u.on("click",".crmrgii-cross",B),u.on("click",".crmrgii-admin",N),u.on("click",".crmrgii-removeadmin",U),u.on("input","#cgm-input-search",D),h.click(z)};return{onInit:function(e){R||(R=!0,L()),u.find("[data-mcg-id]").css("display","").removeAttr("data-mcgi-selected"),l=!1,x=null,E=[],m.html("New group chat"),w.text(E.length),p.hide(),b.val(""),y.val(""),f.html(""),h.removeClass("loading-btn"),u.modal("show"),setTimeout((function(){return v.scrollTop(0)}),200),setTimeout((function(){return y.focus()}),500),e&&(m.html("Edit group chat"),function(e){p.show(),o.get("chats/".concat(e)).then((function(t){if(t.members){var n=a.getRooms().filter((function(t){return t.id===e}))[0];if(x=e,p.hide(),!n)return void g.click();y.val(n.subject),t.members.forEach((function(e){var t=a.getRoomInfoWasEdited()[e.user.id],n=null!=t&&t.user_name?t.user_name:e.user.name,o={id:e.user.id,currentName:O(n),src:T(e.user.id),data:{id:e.user.id,name:e.user.name,alias:null,selected:!0}};e.admin&&(o.admin="admin",o.data.admin=!0),i('[data-mcg-id="'.concat(e.user.id,'"]')).attr("data-mcgi-selected",e.user.id),E=E.concat(o)})),E.sort((function(e,t){return e.currentName.localeCompare(t.currentName)})),f.html(E.map((function(e){return I(j,e)}))),u.find('[data-toggle="tooltip"]').tooltip()}}))}(e))}}}.apply(t,o))||(e.exports=a)},908:(e,t,n)=>{var o,a,i=n(755);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}o=[n(759),n(436),n(788),n(433),n(25)],void 0===(a=function(e,t,n,o,a){a.render;var c,d,l,u,m,p,f,v,g,h,b,y,w,I=a.getAvatar,_=a.getDataToLocalApplication,T=e.API_URL,C=e.TOKEN,O=e.ATTRIBUTE_CHANGE_NAME,E=e.ATTRIBUTE_CHANGE_IMAGE_GROUP,R=_(C)||"",x=!1,A=function(){y.click(),t.show("Unable to connect to the Internet")},j=function(){if(!d){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o.getRoomInfoWasEdited());d=!0,b.addClass("loading-btn"),c.group?(e[c.id]=e[c.id]||{},e[c.id].user_des=h.val()):(e[c.partner.id]=e[c.partner.id]||{},e[c.partner.id].user_des=h.val(),e[c.partner.id].user_name=g.val()),n.put("users/preferences",{user_chat_info:e}).then((function(){if(y.click(),o.setRoomInfoWasEdited(e),!c.group){var t=g.val()||c.partner.name;i("[".concat(O,'="').concat(user.id,'"]')).text(t)}})).catch(A)}},k=function(){var e=w.get(0).files[0],t=new FormData,n=new FileReader;e&&(n.addEventListener("load",(function(e){p.attr("src",e.target.result),i("[".concat(E,'="').concat(o.getCurrentRoomId(),'"]')).attr("src",e.target.result)})),n.readAsDataURL(e),t.append("avatarfile",e),t.append("id",o.getCurrentRoomId()),i.ajax({type:"POST",url:"".concat(T,"/uploadgroupavatar"),data:t,headers:{"X-Authorization-Token":R},cache:!1,contentType:!1,processData:!1,success:function(){},error:function(){}}))};return{onInit:function(){x||(x=!0,i("body").append('\n        <div class="modal fade xmmc-modal" id="editRoomModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h5 class="modal-title">\n                            Edit Room\n                        </h5>\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n                    <div class="modal-body not-live-assistance">\n                        <label class="erm-image-wrapper input-freeze">\n                            <input class="ermiw-file" type="file" accept="image/*" style="display: none" />\n                            <img />\n                            <div class="ermiw-icon">\n                                <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16" height="16" viewBox="0 0 36.174 36.174" style="filter: grayscale(1) invert(1);" xml:space="preserve"><g><path d="M23.921,20.528c0,3.217-2.617,5.834-5.834,5.834s-5.833-2.617-5.833-5.834s2.616-5.834,5.833-5.834 S23.921,17.312,23.921,20.528z M36.174,12.244v16.57c0,2.209-1.791,4-4,4H4c-2.209,0-4-1.791-4-4v-16.57c0-2.209,1.791-4,4-4h4.92 V6.86c0-1.933,1.566-3.5,3.5-3.5h11.334c1.934,0,3.5,1.567,3.5,3.5v1.383h4.92C34.383,8.244,36.174,10.035,36.174,12.244z M26.921,20.528c0-4.871-3.963-8.834-8.834-8.834c-4.87,0-8.833,3.963-8.833,8.834s3.963,8.834,8.833,8.834 C22.958,29.362,26.921,25.399,26.921,20.528z"/></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>\n                            </div>\n                        </label>\n                        <div class="xmmcm-form-group erm-userid">\n                            <label>User Id</label>\n                            <input class="input-freeze" tabindex="-1" />\n                            <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                        </div>\n                        <div class="xmmcm-form-group erm-chatid">\n                            <label>Chat Id</label>\n                            <input class="input-freeze" tabindex="-1" />\n                            <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                        </div>\n                        <div class="xmmcm-form-group erm-name">\n                            <label>Name</label>\n                            <input tabindex="-1" placeholder="Enter name" maxlength="50" />\n                        </div>\n                        <div class="xmmcm-form-group erm-des">\n                            <label>Description</label>\n                            <textarea style="margin-bottom: 0" placeholder="Enter description"></textarea>\n                        </div>\n                    </div>\n                    <div class="modal-body modal-live-assistance hidden"></div>\n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-outline-primary">\n                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>\n                            Save\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),l=i("#editRoomModal"),u=l.find(".not-live-assistance"),m=l.find(".modal-live-assistance"),p=l.find(".erm-image-wrapper img"),f=l.find(".erm-userid input"),v=l.find(".erm-chatid input"),g=l.find(".erm-name input"),h=l.find(".erm-des textarea"),b=l.find(".btn-outline-primary"),w=l.find(".erm-image-wrapper .ermiw-file"),y=l.find(".close"),b.click(j),w.change(k),l.find('[data-toggle="tooltip"]').tooltip());var e,t,a,r=o.getRoomInfoWasEdited(),s=o.getCurrentRoomId();if(c=o.getRooms().filter((function(e){return e.id===s}))[0]||{},d=!1,p.off("error"),v.val(c.id),b.removeClass("loading-btn"),l.modal("show"),u.removeClass("hidden"),m.addClass("hidden"),c.group&&c.isLiveAssistance)return u.addClass("hidden"),m.removeClass("hidden"),m.html('<div class="--load-mess" style="display: block;"><div class="pulse"></div></div>'),void function(){var e=o.getCurrentRoomId();n.get("chats/".concat(e,"/description")).then((function(e){var t=e.guest,n=t.id,o=t.name,a=t.email,i=t.ipAddress,r=t.deviceType,s=(t.creationDate,t.browser),c=t.platform,d=t.platformVersion,u=t.userAgent;m.html('\n                <div class="xmmcm-form-group erm-userid">\n                    <label>Chat Id</label>\n                    <input class="input-freeze" tabindex="-1" value="'.concat(e.id,'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                </div>\n                <div class="xmmcm-form-group erm-userid">\n                    <label>Guest Id</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(n||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                </div>\n                <div class="xmmcm-form-group erm-userid">\n                    <label>Guest Name</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(o||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                </div>\n                <div class="xmmcm-form-group erm-userid">\n                    <label>Guest Email</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(a||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                </div>\n                <div class="xmmcm-form-group erm-userid">\n                    <label>IP Address</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(i||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                </div>\n                <div class="xmmcm-form-group erm-userid">\n                    <label>Device Type</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(r||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                </div>\n                <div class="xmmcm-form-group erm-userid">\n                    <label>Browser</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(s||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                </div>\n                <div class="xmmcm-form-group erm-userid">\n                    <label>Platform</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(c||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                </div>\n                <div class="xmmcm-form-group erm-userid">\n                    <label>Platform Version</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(d||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                </div>\n                <div class="xmmcm-form-group erm-userid">\n                    <label>User Agent</label>\n                    <textarea class="input-freeze" tabindex="-1">').concat(u||"none",'</textarea>\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard" style="top: 30px"></div>\n                </div>\n            ')),l.find('[data-toggle="tooltip"]').tooltip()}))}();c.group?(p.closest(".erm-image-wrapper").removeClass("input-freeze"),p.on("error",(function(){return p.attr("src","/assets/images/group.svg")})),p.attr("src",I(c.id,!0)),g.closest(".erm-name").hide(),f.closest(".erm-userid").hide(),h.val((null===(e=r[c.id])||void 0===e?void 0:e.user_des)||"")):(p.closest(".erm-image-wrapper").addClass("input-freeze"),p.attr("src",I(c.partner.id)),p.on("error",(function(){return p.attr("src","/assets/images/user.jpg")})),g.closest(".erm-name").show(),f.closest(".erm-userid").show(),f.val(c.partner.id),g.val((null===(t=r[c.partner.id])||void 0===t?void 0:t.user_name)||c.partner.name),h.val((null===(a=r[c.partner.id])||void 0===a?void 0:a.user_des)||""))}}}.apply(t,o))||(e.exports=a)},857:(e,t,n)=>{var o,a,i=n(755);o=[n(788),n(433),n(25)],void 0===(a=function(e,t,n){var o,a,r,s,c=n.render,d=n.debounce,l=n.getAvatar,u=n.htmlEncode,m=!1,p=function(e){var n,o,a,i,r,s="",d=t.getRoomInfoWasEdited(),m=e.group?e.subject:(null===(n=d[null===(o=e.partner)||void 0===o?void 0:o.id])||void 0===n?void 0:n.user_name)||(null===(a=e.partner)||void 0===a?void 0:a.name);if(!e.id||!m||e.channel)return"";(e.group&&(s=l(e.id,!0)),e.group)||(s=l(null===(r=e.partner)||void 0===r?void 0:r.id));return i={id:e.id,group:e.group?"hagr":"",handleImageErr:"onerror=\"this.src='".concat(e.group?"/assets/images/group.svg":"/assets/images/user.jpg","'\""),src:s,name:u(m)},c('\n        <div data-fmm-room-id="{id}" data-fmm-room-name="{name}" class="fmm-room">\n            <img class="--img avatar {group}" src="{src}" {handleImageErr}>\n            <span>{name}</span>\n        </div>\n    ',i)},f=function(){return t.getRooms().map(p).join("")},v=function(n){a.click(),e.post("messages/forward",{sourceChatId:t.getCurrentRoomId(),destChatId:i(n.currentTarget).data().fmmRoomId,messageId:s}).then((function(e){console.log(e)}))},g=d((function(){var e=r.val().trim().toUpperCase();e?$rooms.each((function(){var t=i(this),n=t.data().fmmRoomName;String(n).toUpperCase().indexOf(e)>-1?t.show():t.hide()})):$rooms.show()}),300);return{onInit:function(e){var n,c=t.getRooms().filter((function(e){return e.id}));m||(m=!0,i(document).on("click","[data-fmm-room-id]",v),i(document).on("input","#fmm-input",g),i("body").append((n=f(),'\n        <div class="modal fade" id="forwardMessageModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h5 class="modal-title">\n                            Forward message to chat...\n                        </h5>\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n                    <div class="modal-body">\n                        <input type="search" name="search" id="fmm-input" placeholder="Search..." />\n                        <div class="fmm-room-wrapper">\n                            '.concat(n,"\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    "))),o=i("#forwardMessageModal"),a=o.find(".close"),$rooms=i("[data-fmm-room-id]"),(r=i("#fmm-input")).attr("autocomplete","off")),c.length!==$rooms.length&&(o.find(".fmm-room-wrapper").html(f()),$rooms=i("[data-fmm-room-id]")),s=e,r.val(""),$rooms.show(),i('[data-fmm-room-id="'.concat(t.getCurrentRoomId(),'"]')).hide(),o.modal("show")}}}.apply(t,o))||(e.exports=a)},450:(e,t,n)=>{var o,a,i=n(755);o=[n(433),n(788),n(436)],void 0===(a=function(e,t,n){var o,a,r,s,c=!1,d=function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},l=function(){var e=o.val();d(e)?(o.removeClass("error"),r.prop("disabled",!1)):(o.addClass("error"),r.prop("disabled",!0))},u=function(){var e=o.val();d(e)&&(s.click(),t.post("contacts/invite?email=".concat(e)).then((function(e){400===e.status&&n.show(e.details)})).catch((function(e){n.show(e)})))},m=function(e){13!==e.keyCode||e.shiftKey||(e.preventDefault(),u())};return{onInit:function(){c||(c=!0,i("body").append('\n        <div class="modal fade" id="inviteModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <p>Enter email address to send invitation</p>\n                        <input id="im-email-input" placeholder="user@mail.com" />\n                        <button type="button" class="btn btn-outline-primary btn-small float-right" disabled>Send</button>\n                        <button type="button" data-dismiss="modal" aria-label="Close" class="btn btn-outline-secondary btn-small float-right">Cancel</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),a=i("#inviteModal"),o=i("#im-email-input"),r=a.find(".btn-outline-primary"),s=a.find(".btn-outline-secondary"),i(document).on("input","#im-email-input",l),o.keydown(m),r.click(u)),a.modal("show"),o.val(""),r.prop("disabled",!0),setTimeout((function(){return o.focus()}),500)}}}.apply(t,o))||(e.exports=a)},265:(e,t,n)=>{var o,a,i=n(755);o=[n(759),n(433),n(788),n(436)],void 0===(a=function(e,t,n,o){var a,r,s,c,d=!1,l=i(".js_caption"),u=i(".js_wrap_mess"),m=function(){c.click(),o.show("Unable to connect to the Internet")},p=function(){var r=t.getCurrentRoomId();s.prop("disabled",!0),c.hide(),a.data("bs.modal")._config.backdrop="static",a.data("bs.modal")._config.keyboard=!1,n.delete("chats/".concat(r,"/leave")).then((function(n){if(400===n.status)return o.show(n.details),void c.click();var a=t.getRooms().filter((function(e){return e.id!==r}));t.setRooms(a),t.setCurrentRoomId(null),c.click(),l.show(),u.hide(),i("[".concat(e.ATTRIBUE_SIDEBAR_ROOM,'="').concat(r,'"]')).remove()})).catch(m)};return{onInit:function(){var e=t.getCurrentRoomId(),n=t.getRooms().filter((function(t){return t.id===e}))[0]||{};d||(d=!0,i("body").append('\n        <div class="modal fade" id="leaveGroupModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <h2>Leaving group chat "<span></span>" </h2>\n                        <p>You will not be able to see this group anymore. Are you sure you want to proceed?</p>\n                        <button type="button" class="btn btn-outline-primary btn-small float-right">\n                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>\n                            Leave\n                        </button>\n                        <button type="button" data-dismiss="modal" aria-label="Close" class="btn btn-outline-secondary btn-small float-right">Cancel</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),a=i("#leaveGroupModal"),r=a.find("h2 span"),s=a.find(".btn-outline-primary"),c=a.find(".btn-outline-secondary"),s.click(p)),c.show(),s.prop("disabled",!1),r.html(n.subject),a.modal("show"),a.data("bs.modal")&&(a.data("bs.modal")._config.backdrop=!0,a.data("bs.modal")._config.keyboard=!0)}}}.apply(t,o))||(e.exports=a)},741:(e,t,n)=>{var o,a,i=n(755);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],o=!0,a=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}o=[n(550),n(433),n(788),n(436),n(25)],void 0===(a=function(e,t,n,o,a){var s,c,d,l,u,m,p,f,v,g,h,b,y,w,I,_,T,C,O,E,R,x,A,j,k=a.getAvatar,M=0,S=0,D=0,P=!1,B="hidden",N="selfVideo",U="btn-slash",G=function(){return n.post("chats/".concat(v.id,"/call/end"))},z=function(){easyrtc.leaveRoom(f,null,null),easyrtc.setRoomOccupantListener(null),easyrtc.disconnect(),l&&!c&&G(),setTimeout((function(){easyrtc.getLocalStream().getTracks().forEach((function(e){return e.stop()})),R.addClass(B),x.removeClass("calling"),C.removeClass("btn-calling"),p=!1,l=!1,D=!1,T.off(),y.off(),C.off()}),500)},L=function(){M?(T.removeClass(U),E.get(0).srcObject.getTracks()[1].enabled=!0):(T.addClass(U),E.get(0).srcObject.getTracks()[1].enabled=!1),M=!M},H=function(){S?(y.removeClass(U),E.get(0).srcObject.getTracks()[0].enabled=!0):(y.addClass(U),E.get(0).srcObject.getTracks()[0].enabled=!1),S=!S},F=function(e,t){if("default"!==e){var o=JSON.stringify(t).length;if(o>2&&e===f&&(c=!0,b.addClass(B)),p&&o<3&&!u&&(G(),w.click()),!p&&e===f){p=!0;var a=[],i=0,r=0;Object.keys(t).forEach((function(e){Object.prototype.hasOwnProperty.call(t,e)&&(r||(r=t[e].roomJoinTime),r>t[e].roomJoinTime&&(r=t[e].roomJoinTime),a.push(e))}));a.length>0?function e(t){easyrtc.call(a[t],(function(){(i+=1)<m.length&&t>0&&e(t-1)}),(function(){i<m.length&&t>0&&e(t-1)}))}(a.length-1):(n.post("chats/".concat(v.id,"/call/place")),l=!0,b.removeClass(B))}}},W=function(){D?w.click():(D=!D,C.addClass("btn-calling"),x.addClass("calling"),R.removeClass(B),easyrtc.joinRoom(f,"",null,null),easyrtc.setRoomOccupantListener(F),easyrtc.setAcceptChecker((function(e,t){D&&t(!0)})))},Y=function(){d=!0,O.show(),O.removeClass(B),x.removeClass(B),b.addClass(B),T.click(L),y.click(H),C.click(W)},V=function(){if(f=v.id,u=v.group,m=[],d=!1,R.find("video").remove(),v.group)for(var e=0;e<t.getCurrentGroupMembers().length;e+=1){var n="callerVideo".concat(e+1);m=m.concat(n),R.append('<video autoplay="autoplay" playsinline="playsinline" id="'.concat(n,'"></video>'))}else{var a="callerVideo";m=m.concat(a),R.append('<video autoplay="autoplay" playsinline="playsinline" id="'.concat(a,'"></video>'))}switch(m.length){case 1:R.attr("class","").addClass("video-caller");break;case 2:R.addClass("total-num-2");break;default:R.addClass("total-num-3")}easyrtc.initMediaSource((function(){easyrtc.dontAddCloseButtons(!0),easyrtc.easyApp("easyrtc.videoChatHd",N,m,Y)}),(function(e){o.show("Browser does not support calls or you have locked mic and camera"),console.log(e)}))},$=function(){A.removeClass("accept-state"),V(),s=setInterval((function(){d&&(C.click(),clearInterval(s))}),100)},K=function(){j.modal("hide"),v.group||G()};return{onInit:function(e,n){if(!p){if(P||(P=!0,i("body").append('\n        <div class="modal fade" id="modalPhoneRequest" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">\n            <div class="modal-dialog modal-lg modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <button type="button" class="close" id="video_close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n\n                        <div class="video-call-notify-form">\n                            <h2>Incoming video call...</h2>\n                            <img class="vcnf-image" />\n                            <h3 class="vcnf-name">Bonnie</h3>\n                            <div class="vcnf-group clearfix">\n                                <button class="vcnf-hangup">\n                                    <i class="xm xm-phone"></i>\n                                </button>\n                                <button class="vcnf-accept">\n                                    <i class="xm xm-phone"></i>\n                                </button>\n                            </div>\n                        </div>\n\n                        <div class="video-call-modal-body">\n                            <div class="video-call-wrapper">\n                                <div class="video-caller hidden">\n                                    <div class="call-animation hidden">\n                                        <i class="xm xm-phone"></i>\n                                    </div>\n                                </div>\n                                <div class="video-self">\n                                    <video autoplay="" playsinline="playsinline" id="selfVideo" muted="" volume="0"></video>\n                                </div>\n                            </div>\n                            <div class="video-call-setting">\n                                <button id="video-mic-btn">\n                                    <span></span>\n                                    <i class="xm xm-microphone"></i>\n                                </button>\n                                <button id="video-camera-btn">\n                                    <span></span>\n                                    <i class="xm xm-video-camera"></i>\n                                </button>\n                                <button id="video-phone-btn">\n                                    <i class="xm xm-phone"></i>\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),easyrtc.setSocketUrl("https://xm.iptp.dev"),j=i("#modalPhoneRequest"),A=j.find(".modal-dialog"),O=i(".video-call-setting"),E=i("#".concat(N)),R=i(".video-caller"),x=i(".video-self"),b=i(".call-animation"),y=i("#video-mic-btn"),T=i("#video-camera-btn"),C=i("#video-phone-btn"),w=i("#video_close"),g=i(".vcnf-image"),h=i(".vcnf-name"),_=i(".vcnf-accept"),I=i(".vcnf-hangup"),w.click(z),I.click(K),_.click($)),e){var o,a=(null===(o=t.getRoomInfoWasEdited()[e.id])||void 0===o?void 0:o.user_name)||e.name,s=r(t.getRooms().filter((function(e){return e.id===n})),1);v=s[0],A.addClass("accept-state"),h.html(a),v.group?g.attr("src",k(v.id,!0)):g.attr("src",k(e.id)),d&&(d=!1,z())}else{var l=r(t.getRooms().filter((function(e){return e.id===t.getCurrentRoomId()})),1);v=l[0],A.removeClass("accept-state"),V()}c=!1,O.hide(),b.addClass(B),j.modal("show")}},onEndCall:function(e,t){t===v.id&&l&&D&&(c=!0,C.click()),!j.hasClass("show")||l||D||(s&&clearInterval(s),j.modal("hide"))}}}.apply(t,o))||(e.exports=a)},914:(e,t,n)=>{var o,a,i=n(755);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}o=[n(759),n(436),n(788),n(433),n(25)],void 0===(a=function(e,t,n,o,a){a.render;var c,d,l,u,m,p,f,v,g=a.getAvatar,h=a.getDataToLocalApplication,b=e.API_URL,y=e.TOKEN,w=e.ATTRIBUTE_CHANGE_NAME,I=e.ATTRIBUTE_CHANGE_IMAGE,_=h(y)||"",T=!1,C=function(){p.click(),t.show("Unable to connect to the Internet")},O=function(){if(!c){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o.getInfomation()),t="email=".concat(e.email,"&id=").concat(e.id,"&name=").concat(u.val()||e.name,"&url=").concat(m.val());c=!0,v.addClass("loading-btn"),n.postForm("saveprofile",t).then((function(){u.val()&&(e.name=u.val(),i("[".concat(w,'="').concat(e.id,'"]')).html(u.val())),e.erp_url=m.val(),p.click(),o.setInfomation(e)})).catch(C)}},E=function(){var e=f.get(0).files[0],t=new FormData,n=new FileReader;e&&(n.addEventListener("load",(function(e){l.attr("src",e.target.result),i("[".concat(I,'="').concat(o.getInfomation().id,'"]')).attr("src",e.target.result)})),n.readAsDataURL(e),t.append("avatarfile",e),i.ajax({type:"POST",url:"".concat(b,"/uploadavatar"),data:t,headers:{"X-Authorization-Token":_},cache:!1,contentType:!1,processData:!1,success:function(){},error:function(){}}))};return{onInit:function(e){var t=o.getInfomation();T||(T=!0,i("body").append('\n        <div class="modal fade xmmc-modal" id="profileModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h5 class="modal-title">\n                            Edit Infomation\n                        </h5>\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n                    <div class="modal-body">\n                        <label class="pmm-image-wrapper">\n                            <input class="pmmiw-file" type="file" accept="image/*" style="display: none" />\n                            <img onerror="this.src = \'/assets/images/user.jpg\'" />\n                            <div class="pmmiw-icon">\n                                <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16" height="16" viewBox="0 0 36.174 36.174" style="filter: grayscale(1) invert(1);" xml:space="preserve"><g><path d="M23.921,20.528c0,3.217-2.617,5.834-5.834,5.834s-5.833-2.617-5.833-5.834s2.616-5.834,5.833-5.834 S23.921,17.312,23.921,20.528z M36.174,12.244v16.57c0,2.209-1.791,4-4,4H4c-2.209,0-4-1.791-4-4v-16.57c0-2.209,1.791-4,4-4h4.92 V6.86c0-1.933,1.566-3.5,3.5-3.5h11.334c1.934,0,3.5,1.567,3.5,3.5v1.383h4.92C34.383,8.244,36.174,10.035,36.174,12.244z M26.921,20.528c0-4.871-3.963-8.834-8.834-8.834c-4.87,0-8.833,3.963-8.833,8.834s3.963,8.834,8.833,8.834 C22.958,29.362,26.921,25.399,26.921,20.528z"/></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>\n                            </div>\n                        </label>\n                        <div class="pmm-form-group pmm-userid">\n                            <label>User Id</label>\n                            <input class="input-freeze" tabindex="-1" />\n                            <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                        </div>\n                        <div class="pmm-form-group pmm-email">\n                            <label>Email</label>\n                            <input class="input-freeze" tabindex="-1" />\n                            <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                        </div>\n                        <div class="pmm-form-group pmm-name">\n                            <label>Name</label>\n                            <input placeholder="Enter name" maxlength="50" />\n                        </div>\n                        <div class="pmm-form-group pmm-erp">\n                            <label>ERP/CRM URL</label>\n                            <input style="margin-bottom: 0" placeholder="https://erp.iptp.net/erp/dispatcher" />\n                        </div>\n                    </div>\n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-outline-primary">\n                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>\n                            Save\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),d=i("#profileModal"),(l=d.find(".pmm-image-wrapper img")).attr("src",g(t.id)),d.find(".pmm-form-group.pmm-userid input").val(t.id),u=d.find(".pmm-form-group.pmm-name input"),d.find(".pmm-form-group.pmm-email input").val(t.email),m=d.find(".pmm-form-group.pmm-erp input"),v=d.find(".btn-outline-primary"),p=d.find(".close"),f=d.find(".pmm-image-wrapper .pmmiw-file"),d.find('[data-toggle="tooltip"]').tooltip(),v.click(O),f.change(E)),c=!1,v.removeClass("loading-btn"),u.val(t.name),m.val(t.erp_url),d.modal("show")}}}.apply(t,o))||(e.exports=a)},585:(e,t,n)=>{var o,a,i=n(755);o=[n(759),n(433),n(788),n(436)],void 0===(a=function(e,t,n,o){var a,r,s,c=!1,d=i(".js_caption"),l=i(".js_wrap_mess"),u=function(){s.click(),o.show("Unable to connect to the Internet")},m=function(){var c=t.getCurrentRoomId();r.prop("disabled",!0),s.hide(),a.data("bs.modal")._config.backdrop="static",a.data("bs.modal")._config.keyboard=!1,n.delete("chats/".concat(c)).then((function(n){if(400===n.status||403===n.status)return o.show(n.details),void s.click();var a=t.getRooms().filter((function(e){return e.id!==c}));t.setRooms(a),t.setCurrentRoomId(null),s.click(),d.show(),l.hide(),i("[".concat(e.ATTRIBUE_SIDEBAR_ROOM,'="').concat(c,'"]')).remove()})).catch(u)};return{onInit:function(){c||(c=!0,i("body").append('\n        <div class="modal fade" id="removeGroupModal" tabindex="-1" role="dialog" data-backdrop="static">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <h2>Delete Group Chat</h2>\n                        <p>Group Chat including history will be deleted, are you sure?</p>\n                        <button type="button" class="btn btn-outline-primary btn-small float-right" disabled>\n                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>\n                            Remove\n                        </button>\n                        <button type="button" data-dismiss="modal" aria-label="Close" class="btn btn-outline-secondary btn-small float-right">Cancel</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),a=i("#removeGroupModal"),r=a.find(".btn-outline-primary"),s=a.find(".btn-outline-secondary"),r.click(m)),r.prop("disabled",!1),a.modal("show"),a.data("bs.modal")&&(a.data("bs.modal")._config.backdrop=!0,a.data("bs.modal")._config.keyboard=!0)}}}.apply(t,o))||(e.exports=a)},173:(e,t,n)=>{var o,a,i=n(755);o=[n(433),n(788),n(436)],void 0===(a=function(e,t,o){var a,r,s,c,d=!1,l=function(){a.val()?(a.removeClass("error"),s.prop("disabled",!1)):(a.addClass("error"),s.prop("disabled",!0))},u=function(){var i=a.val();i&&(c.click(),t.postForm("integrateERP","url=".concat(i,"&email=").concat(e.getInfomation().email)).then((function(a){2!==a.status?t.get("chats").then((function(t){n(814).onInit(),e.setRoomsWithAdapter(t.data.chats),c.click()})):o.show(a.message)})).catch((function(e){o.show(e)})))},m=function(e){13!==e.keyCode||e.shiftKey||(e.preventDefault(),u())};return{onInit:function(){d||(d=!0,i("body").append('\n        <div class="modal fade" id="sendErpModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <p>Enter ERP URL to load contacts</p>\n                        <input id="sem-url-input" placeholder="https://erp.iptp.net/erp/dispatcher" />\n                        <button type="button" class="btn btn-outline-primary btn-small float-right" disabled>Send</button>\n                        <button type="button" data-dismiss="modal" aria-label="Close" class="btn btn-outline-secondary btn-small float-right">Cancel</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),r=i("#sendErpModal"),a=i("#sem-url-input"),s=r.find(".btn-outline-primary"),c=r.find(".btn-outline-secondary"),i(document).on("input","#sem-url-input",l),a.keydown(m),s.click(u));var t=e.getInfomation().erp_url||"";t?s.prop("disabled",!1):s.prop("disabled",!0),r.modal("show"),a.val(t),setTimeout((function(){return a.focus()}),500)}}}.apply(t,o))||(e.exports=a)},441:(e,t,n)=>{var o,a=n(755);void 0===(o=function(){var e,t,n=function(n){e.modal("show"),t.attr("src",n.target.src.replace("&small=1","&large=1")),t.removeClass("zoomout"),t.removeAttr("style")},o=function(){if(t.hasClass("zoomout"))t.removeAttr("style"),t.removeClass("zoomout");else{var e=t.get(0),n=e.clientWidth,o=e.clientHeight,a=n/o,i=0,r=0;n>o?r=(i=1.5*o)*a:i=(r=1.5*n)/a,t.css({height:"".concat(i,"px"),width:"".concat(r,"px")}),t.addClass("zoomout")}};return{onInit:function(){a("body").append('\n        <div class="modal fade" id="showImageFull" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                        <img />\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),e=a("#showImageFull"),t=e.find("img"),a(document).on("click",".--click-show-popup-up-img",n),t.click(o)}}}.call(t,n,t,e))||(e.exports=o)},501:(e,t,n)=>{var o,a=n(755);void 0===(o=function(){var e,t=!1;return{onInit:function(){t||(t=!0,a("body").append('\n        <div class="modal fade" id="updateVersionModal" tabindex="-1" role="dialog" data-backdrop="static">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <p>A new version of Cross Messenger is avaible</p>\n                        <button type="button" class="btn btn-outline-primary btn-small float-right">\n                            Refresh\n                        </button>\n                        <button type="button" data-dismiss="modal" aria-label="Close" class="btn btn-outline-secondary btn-small float-right">\n                            Cancel\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),e=a("#updateVersionModal"),e.find(".btn-outline-primary").click((function(){return window.location.reload()}))),e.modal("show")}}}.call(t,n,t,e))||(e.exports=o)},410:(e,t,n)=>{var o,a,i=n(755);o=[n(788),n(433),n(25),n(759)],void 0===(a=function(e,t,n,o){var a,r,s,c,d,l,u,m=n.render,p=n.setDataToLocalApplication,f=o.BODY_BG_THEME,v=o.BODY_FZ,g=o.THEMES,h=o.FONTSIZES,b=!1,y=function(e){$this=i(e.currentTarget),d.removeClass("active"),$this.addClass("active"),a=$this.data().uimwTheme},w=function(e){$this=i(e.currentTarget),l.removeClass("active"),$this.addClass("active"),r=$this.data().uimwFont},I=function(){var n=i("body");c.click(),n.removeClass(t.getBodyBgTheme()),n.addClass(a),n.css("font-size",r),t.setBodyBgTheme(a),t.setBodyFontSize(r),p(f,a),p(v,r),e.put("users/preferences",{body_bg_theme:a,body_fz:r}).then((function(){}))};return{onInit:function(){if(!b){var e=g.map((function(e){return m('<div class="uimw-theme-item" data-uimw-theme="{name}" style="background: {color}"></div>',e)})).join(""),n=h.map((function(e){return m('<div class="uimw-font-item" data-uimw-font="{size}" style="font-size: {size}">Aa</div>',{size:e})})).join("");b=!0,i("body").append(function(e,t){return'\n        <div class="modal fade" id="userInterfaceModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h5 class="modal-title">\n                            User Interface\n                        </h5>\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n                    <div class="modal-body">\n                        <div class="uim-wrapper">\n                            <div class="uimw-title">\n                                Theme\n                            </div>\n                            '.concat(e,'\n                        </div>\n                        <div class="uim-wrapper">\n                            <div class="uimw-title">\n                                Font\n                            </div>\n                            ').concat(t,'\n                        </div>\n                        <button type="button" class="btn btn-outline-primary float-right">\n                            Save\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    ')}(e,n)),s=i("#userInterfaceModal"),c=s.find(".close"),d=i("[data-uimw-theme]"),l=i("[data-uimw-font]"),u=s.find(".btn-outline-primary"),d.click(y),l.click(w),u.click(I)}a=t.getBodyBgTheme()||g[0].name,r=t.getBodyFontSize()||h[2],d.removeClass("active"),l.removeClass("active"),i('[data-uimw-theme="'.concat(a,'"]')).addClass("active"),i('[data-uimw-font="'.concat(r,'"]')).addClass("active"),s.modal("show")}}}.apply(t,o))||(e.exports=a)},226:(e,t,n)=>{var o,a,i=n(755);o=[n(433)],void 0===(a=function(e){var t,n=!1;return{onInit:function(){var o;n||(n=!0,i("body").append((o=e.getVersion(),'\n        <div class="modal fade" id="versionModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <img src="assets/images/icon.png" alt="Cross messenger">\n                        <h2>Cross messenger</h2>\n                        <p>\n                            Web Version: #XM_VERSION\n                        </p>\n                        <p>\n                            Server Version: '.concat(o,"\n                        </p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    "))),t=i("#versionModal")),t.modal("show")}}}.apply(t,o))||(e.exports=a)},277:(e,t,n)=>{var o,a;o=[n(433)],void 0===(a=function(e){return{onInit:function(){return Notification.requestPermission().then((function(){}))},pushNotificationForMessage:function(t){var n,o=e.getInfomation(),a=e.getRoomInfoWasEdited();window.Notification&&"granted"===Notification.permission&&!document.hasFocus()&&o.id!==t.sender.id&&!1!==(null===(n=a[t.id.chatId])||void 0===n?void 0:n.notification_mess)&&function(e){var t=new Notification(e.sender.name,{body:e.message.replace(/<[^>]+>/g,""),icon:"/assets/images/icon.png"});t.onclick=function(e){e.preventDefault(),t.close()}}(t)}}}.apply(t,o))||(e.exports=a)},335:(e,t,n)=>{var o,a=n(755);void 0===(o=function(){var e=a("#frame");return{onInit:function(){a(".sidebar .sidebar-collapse-btn").click((function(){e.hasClass("indent")?e.removeClass("indent"):e.addClass("indent")}))}}}.call(t,n,t,e))||(e.exports=o)},230:(e,t,n)=>{var o,a,i=n(755);o=[n(759),n(25),n(410),n(450),n(173),n(226),n(582)],void 0===(a=function(e,t,n,o,a,r,s){var c=e.SESSION_ID,d=e.TOKEN,l=i("#user-option"),u=i("#sidebar-options-btn"),m=i("#group-chat-options-btn"),p=l.find(".--use-interface"),f=l.find(".--send-invite"),v=l.find(".--erp-contact"),g=l.find(".--about"),h=l.find(".--logout"),b=!1,y=function(){b=!1,l.hide(),i(document).off(".hideOptionsSlide")},w=function(e){e.preventDefault(),e.stopPropagation(),b?y():(b=!0,l.show(),i(document).on("click.hideOptionsSlide",(function(e){l.is(e.target)||0!==l.has(e.target).length||y()})))},I=function(){return s.onInit()},_=function(){n.onInit(),y()},T=function(){o.onInit(),y()},C=function(){a.onInit(),y()},O=function(){r.onInit(),y()},E=function(){t.removeDataInLocalApplication(c),t.removeDataInLocalApplication(d),window.location="login.html"};return{onInit:function(){u.click(w),m.click(I),p.click(_),f.click(T),v.click(C),g.click(O),h.click(E)}}}.apply(t,o))||(e.exports=a)},40:(e,t,n)=>{var o,a,i=n(755);o=[n(759),n(433),n(25),n(914)],void 0===(a=function(e,t,n,o){var a=n.render,r=n.getAvatar,s=n.htmlEncode,c=i("#sidebarProfile"),d='\n        <a title="Edit Profile" class="sipr-image">\n            <img '.concat(e.ATTRIBUTE_CHANGE_IMAGE,'="{id}" class="--avatar avatar p-cur" src="{src}" onerror="this.src=\'/assets/images/user.jpg\'">\n        </a>\n        <p ').concat(e.ATTRIBUTE_CHANGE_NAME,'="{id}" class="--name">{name}</p>\n    ');return{onInit:function(){var e=t.getInfomation(),n={src:r(e.id),name:s(e.name),id:e.id};c.html(a(d,n)),i(document).on("click","#sidebarProfile .sipr-image",o.onInit)}}}.apply(t,o))||(e.exports=a)},814:(e,t,n)=>{var o,a,i=n(755);o=[n(759),n(433),n(25),n(209),n(851),n(445),n(512),n(640)],void 0===(a=function(e,t,n,o,a,r,s,c){var d=n.render,l=n.getAvatar,u=n.stripTags,m=n.htmlEncode,p=i("#sidebar_room_list"),f=i(".js_caption"),v=i(".js_wrap_mess"),g='\n        <li class="js_li_list_user contact-list__item p-cur {status} {live} {mute}" '.concat(e.ATTRIBUE_SIDEBAR_ROOM,'="{id}" {isGroup}>\n            <img ').concat(e.ATTRIBUTE_CHANGE_IMAGE_GROUP,'="{id}" class="--img avatar {classImg}" src="{src}" {handleImageErr} />\n            <div class="badge badge-orange">{unread}</div>\n            <div class="p-pl-10 meta">\n                <div class="--name contact__name p-1-line">\n                    <i class="xm xm-volume-mute" aria-hidden="true"></i>\n                    <span ').concat(e.ATTRIBUTE_CHANGE_NAME,'="{userId}">{name}</span>\n                </div>\n                <div class="p-1-line preview">{mess}</div>\n            </div>\n        </li>\n    '),h=function(n){var d=0,l=i(n.currentTarget),u=l.data().roomId,m=t.getRooms().filter((function(e,t){return String(e.id)===String(u)&&(d=t,!0)}))[0]||{};if(!u)return f.show(),v.hide(),t.setCurrentRoomId(null),i("[".concat(e.ATTRIBUE_SIDEBAR_ROOM,"]")).removeClass("active"),void c.onInit(l);l.hasClass("p_disabled")||u===t.getCurrentRoomId()||(null!=m&&m.channel?i(".messages-input-wrap").hide():i(".messages-input-wrap").show(),t.setCurrentRoomId(u),i("[".concat(e.ATTRIBUE_SIDEBAR_ROOM,"]")).removeClass("active"),f.hide(),v.show(),l.addClass("active"),a.onClear(),s.markPhone(m.group),r.onRenderInfomation(m),o.onLoadMessage(m,d))},b=function(e){var n,o,a,i=t.getRoomInfoWasEdited(),r=e.id,s=e.partner,c=e.unreadMessages,p=e.group,f=e.subject,v=e.sender,h=e.lastMessage,b="",y=r?"":"p_disabled",w=c||"",I=p?f:(null===(n=i[null==s?void 0:s.id])||void 0===n?void 0:n.user_name)||(null==s?void 0:s.name),_=h?m(u(h)):"",T=t.getCurrentRoomId()===r?"active":"",C=p?"":null==s?void 0:s.id;return p&&!I?"":(p&&(b=l(r,!0)),p||(b=l(null==s?void 0:s.id)),p||s||(b="/assets/images/user.svg"),!r&&v&&(I=null==s?void 0:s.name,_="Invite: pending",b=l(null==s?void 0:s.id)),r||v||(I=null==s?void 0:s.name,_="Invite: not accepted",b=l(null==s?void 0:s.id),y=""),a={id:r,isGroup:p?'data-is-group="true"':'data-is-group="false"',status:y,live:T,unread:w,handleImageErr:"onerror=\"this.src='".concat(p?"/assets/images/group.svg":"/assets/images/user.jpg","'\""),classImg:p?"hagr":"",src:b,name:m(I),mess:_,userId:C,mute:!1===(null===(o=i[r])||void 0===o?void 0:o.notification_mess)?"mute":""},d(g,a))};return{onInit:function(){var n=t.getRooms().map(b).join("");p.html("".concat('<a class="sidebar__toggle"><i class="xm xm-search --icon p-cur"></i></a>').concat(n)),i(document).off(".sidebarRoomList"),i(document).on("click.sidebarRoomList","[".concat(e.ATTRIBUE_SIDEBAR_ROOM,"]"),h)},onRenderRoom:b,onPrepend:function(e){return p.prepend(e)},onUpdateRoomName:function(e,t){return i('[data-room-id="'.concat(e,'"]')).find(".--name.contact__name span").text(t)}}}.apply(t,o))||(e.exports=a)},839:(e,t,n)=>{var o,a,i=n(755);o=[n(759),n(433),n(25)],void 0===(a=function(e,t,n){var o=n.debounce,a=1,r=i("#frame"),s=i("#search"),c=s.find(".search-toggle"),d=s.find(".js-menu"),l=s.find("[data-s]"),u=s.find(".search__option"),m=s.find(".search__input"),p=s.find(".clearable__clear"),f=o((function(){var t=i("[".concat(e.ATTRIBUE_SIDEBAR_ROOM,"]")),n=m.val().trim().toUpperCase();t.removeAttr("data-search-sidebar-hide"),n&&t.each((function(e){var o=t.eq(e),a=o.find("[data-userid-name]").html();String(a).toUpperCase().indexOf(n)>-1?o.removeAttr("data-search-sidebar-hide"):o.attr("data-search-sidebar-hide",!0)}))}),300),v=function(){d.hide(),i(document).off(".hideSearchFilter")},g=function(e){e.preventDefault(),e.stopPropagation(),d.show(),i(document).on("click.hideSearchFilter",(function(e){d.is(e.target)||0!==d.has(e.target).length||v()}))},h=function(t){var n=i("[".concat(e.ATTRIBUE_SIDEBAR_ROOM,"]")),o=i(t.currentTarget),r=o.data().s;v(),r!==a&&(a=r,l.removeClass("active"),o.addClass("active"),n.removeAttr("data-filter-sidebar-hide"),1!==r&&n.each((function(e){var t=n.eq(e),o=t.data().isGroup;(2!==r||t.find(".badge.badge-orange").html())&&(3!==r||o)?4===r&&o&&t.attr("data-filter-sidebar-hide",!0):t.attr("data-filter-sidebar-hide",!0)})))},b=function(){window.outerWidth>767?r.removeClass("indent"):r.addClass("indent"),setTimeout((function(){return m.focus()}),100)},y=function(){i("[".concat(e.ATTRIBUE_SIDEBAR_ROOM,"]")).removeAttr("data-search-sidebar-hide"),m.val("")};return{onInit:function(){m.val(""),l.click(h),u.click(g),p.click(y),c.click(b),i(document).on("input","#search .search__input",f)}}}.apply(t,o))||(e.exports=a)},400:(e,t,n)=>{var o,a,i=n(755);function r(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}o=[n(759),n(788),n(433),n(25),n(814),n(209),n(445),n(277),n(741)],void 0===(a=function(e,t,n,o,a,s,l,u,m){var p,f=!1,v=e.SESSION_ID,g={timeout:1e4,onBackground:!1},h=function e(){if(p&&clearTimeout(p),document.hasFocus())return document.title="Messenger",void i("#favicon").attr("href","assets/images/favicon.ico");f?(document.title="New Message!",i("#favicon").attr("href","assets/images/favicon2.ico")):(document.title="Messenger",i("#favicon").attr("href","assets/images/favicon1.ico")),f=!f,p=setTimeout(e,1e3)},b=function(e,t){var o=n.getInfomation().id,a=n.getCurrentRoomId(),i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),r=t.length-1;if(t[r].updated||t[r].deleted||(i.lastMessage=t[t.length-1].message),a!==e.id){var s=i.unreadMessages;t.forEach((function(e){e.deleted||e.updated||(o===e.sender.id?s=0:s+=1)})),i.unreadMessages=s}else i.unreadMessages=0;return i},y=function(e,t){var o=!0,a=n.getCurrentRoomId()===t;return e.forEach((function(e){e.deleted?a&&s.onSyncRemove(e.id.messageId):e.updated?a&&s.onSyncUpdate(e):(7!==e.type&&(o=!1),21===e.type&&function(e,t){n.getInfomation().id!==e.sender.id&&m.onInit(e.sender,t)}(e,t),24===e.type&&function(e,t){n.getInfomation().id!==e.sender.id&&m.onEndCall(e.sender,t)}(e,t),a&&s.onSync([e]))})),o},w=function(e){var o,s=n.getRooms(),c=[],d=!1,l={};e.forEach((function(e){l[e.id.chatId]=(l[e.id.chatId]||[]).concat(e)})),s=s.filter((function(t){if(l[t.id]){var n=l[t.id];d||(d=!0,t.isLiveAssistance&&7===e[e.length-1].type||u.pushNotificationForMessage(n[0]));var o=y(l[t.id],t.id);if(!o){var r=b(t,n);h(),function(e){var t=a.onRenderRoom(e);i('[data-room-id="'.concat(e.id,'"]')).remove(),a.onPrepend(t)}(r),c=c.concat(r)}return o}return!0})),d||(o=e[0],t.get("chats").then((function(e){try{for(var t=e.data.chats,i=t.length,s=0;s<i;s+=1)if(t[s].id===o.id.chatId){var c=a.onRenderRoom(t[s]);n.setRooms([n.setRoomWithAdapter(t[s])].concat(r(n.getRooms()))),a.onPrepend(c),u.pushNotificationForMessage(o);break}}catch(e){console.log(e)}}))),n.setRooms(c.concat(s))},I=function e(){var a=n.getCurrentRoomId();g[v]=o.getDataToLocalApplication(v),a&&(g.chatId=a),g.onBackground=document.hidden,t.get("sync",g).then((function(t){var i,r,s;if(null!=t&&null!==(i=t.data)&&void 0!==i&&null!==(r=i.messages)&&void 0!==r&&r.length){var c=o.sortBy(t.data.messages,"msgDate");w(c)}a===n.getCurrentRoomId()&&l.onRenderTimeActivity(null==t||null===(s=t.data)||void 0===s?void 0:s.partnerLastTimeActivity);e()}))};return{onInit:function(){I()}}}.apply(t,o))||(e.exports=a)},436:(e,t,n)=>{var o,a,i=n(755);o=[n(25)],void 0===(a=function(e){var t,n=e.render,o=!1,a='\n        <div class="alert {class}" role="alert">\n            {message}\n            <button type="button" class="close">\n                <span aria-hidden="true">&times;</span>\n            </button>\n        </div>\n    ',r=function(e){i(e.currentTarget).closest(".alert").remove()};return{show:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";o||(o=!0,i("body").append('<div id="alert-wrapper"></div>'),t=i("#alert-wrapper"),i(document).on("click","#alert-wrapper .close",r));var c={class:"alert-danger",message:e};"success"===s&&(c.class="alert-success");var d=i(n(a,c));t.prepend(d),setTimeout((function(){return d.remove()}),3500)}}}.apply(t,o))||(e.exports=a)},788:(e,t,n)=>{var o,a;o=[n(759),n(25)],void 0===(a=function(e,t){var n=e.TOKEN,o=e.SESSION_ID,a=e.API_URL,i=t.getDataToLocalApplication(o)||"",r=t.getDataToLocalApplication(n)||"",s={"Content-Type":"application/x-www-form-urlencoded","X-Authorization-Token":r},c={"Content-Type":"application/json","X-Authorization-Token":r};i&&r||(window.location="login.html");var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];for(var n in e)e.hasOwnProperty(n)&&t.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(e[n])));return t.length?"?".concat(t.join("&")):""},l=fetch;return fetch=function(){return l.apply(this,arguments).then((function(e){if(401===e.status)return t.removeDataInLocalApplication(o),t.removeDataInLocalApplication(n),window.location="login.html",e.json().then((function(e){throw e}));var a=e.headers.get("content-type");return a&&-1!==a.indexOf("application/json")?e.json():e.text()}))},{get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("".concat(a,"/").concat(e).concat(d(t)),{method:"GET",headers:c})},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("".concat(a,"/").concat(e),{method:"POST",headers:c,body:JSON.stringify(t)})},put:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("".concat(a,"/").concat(e),{method:"PUT",headers:c,body:JSON.stringify(t)})},delete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return fetch("".concat(a,"/").concat(e),{method:"DELETE",headers:c})},postForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return fetch("".concat(a,"/").concat(e),{method:"POST",headers:s,body:t})}}}.apply(t,o))||(e.exports=a)},433:(e,t,n)=>{var o;void 0===(o=function(){var e=!0,t={},n=[],o="",a=null,i="",r="",s="",c={},d=function(e){return{channel:e.channel,group:e.group,groupAvatarType:e.groupAvatarType,id:e.id,isLiveAssistance:e.liveAssistance,lastMessage:e.lastMessage,partner:e.partner||{},subject:e.subject,ticket:e.ticket,unreadMessages:e.unreadMessages,updated:e.updated}};return{getInfomation:function(){return t},setInfomation:function(e){t=e},getVersion:function(){return i},setVersion:function(e){i=e},getBodyBgTheme:function(){return r},setBodyBgTheme:function(e){r=e},getBodyFontSize:function(){return s},setBodyFontSize:function(e){s=e},getRooms:function(){return n},setRooms:function(e){n=e},setRoomWithAdapter:d,setRoomsWithAdapter:function(e){n=e.map(d)},getCurrentRoomId:function(){return o},setCurrentRoomId:function(e){o=e},getCurrentGroupMembers:function(){return a},setCurrentGroupMembers:function(e){a=e},getRoomInfoWasEdited:function(){return c},setRoomInfoWasEdited:function(e){c=e},getNetworkStatus:function(){return e},setNetworkStatus:function(t){e=t}}}.call(t,n,t,e))||(e.exports=o)},25:(e,t,n)=>{var o,a,i=n(755);o=[n(381),n(759)],void 0===(a=function(e,t){return{setCookie:function(e,t){var n="";if(t){var o=new Date;o.setTime(o.getTime()+24*t*60*60*1e3),n="; expires=".concat(o.toUTCString())}document.cookie="token=".concat(e||"").concat(n,"; path=/")},setDataToLocalApplication:function(e,t){localStorage.setItem(e,t)},getDataToLocalApplication:function(e){return localStorage.getItem(e)},removeDataInLocalApplication:function(e){localStorage.removeItem(e)},getAvatar:function(e,n){if(e)return"".concat(t.API_URL,"/").concat(n?"chats":"users","/").concat(e,"/avatar")},sortBy:function(e,t){return e.sort((function(e,n){return e[t]<n[t]?-1:e[t]>n[t]?1:0}))},stripTags:function(e){return e.replace(/(<([^>]+)>)/gi,"")},convertMessagetime:function(t){var n=e(t),o=e(),a=e().subtract(1,"days");return o.isSame(n,"date")?"Today ".concat(n.format("H:mm")):a.isSame(n,"date")?"Yesterday ".concat(n.format("H:mm")):n.format("D MMM, H:mm")},humanFileSize:function(e){var t=1e3;if(Math.abs(e)<t)return"".concat(e," B");var n=["kB","MB","GB","TB","PB","EB","ZB","YB"],o=-1,a=Math.pow(10,1);do{e/=t,++o}while(Math.round(Math.abs(e)*a)/a>=t&&o<n.length-1);return"".concat(e.toFixed(1)," ").concat(n[o])},htmlDecode:function(e){var t=document.createElement("textarea");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue},htmlEncode:function(e){var t=document.createElement("textarea");return t.textContent=e,t.innerHTML},debounce:function(e,t,n){var o;return function(){var a=this,i=arguments,r=function(){o=null,n||e.apply(a,i)},s=n&&!o;clearTimeout(o),o=setTimeout(r,t),s&&e.apply(a,i)}},transformLinkTextToHTML:function(e){if(!e)return"";return e.replace(/(www|ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/g,(function(e){return"<a href='".concat(e,"' target='_blank' rel='noopener noreferrer'>").concat(e,"</a>")}))},truncate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return e.length>t?"".concat(e.substring(0,t-3),"..."):e},generateId:function(){return Math.random().toString(36).substr(2,9)},render:function(e,t){return i.templates(function(e){return e.replace(/{([^}]+)}/g,(function(e,t){var n=t.replace(/\./g,"^");return"{^{:".concat(n,"}}")}))}(e)).render(t)}}}.apply(t,o))||(e.exports=a)},379:(e,t,n)=>{var o;void 0===(o=function(){return Object.freeze({CROSS:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path d="M31.708 25.708c-0-0-0-0-0-0l-9.708-9.708 9.708-9.708c0-0 0-0 0-0 0.105-0.105 0.18-0.227 0.229-0.357 0.133-0.356 0.057-0.771-0.229-1.057l-4.586-4.586c-0.286-0.286-0.702-0.361-1.057-0.229-0.13 0.048-0.252 0.124-0.357 0.228 0 0-0 0-0 0l-9.708 9.708-9.708-9.708c-0-0-0-0-0-0-0.105-0.104-0.227-0.18-0.357-0.228-0.356-0.133-0.771-0.057-1.057 0.229l-4.586 4.586c-0.286 0.286-0.361 0.702-0.229 1.057 0.049 0.13 0.124 0.252 0.229 0.357 0 0 0 0 0 0l9.708 9.708-9.708 9.708c-0 0-0 0-0 0-0.104 0.105-0.18 0.227-0.229 0.357-0.133 0.355-0.057 0.771 0.229 1.057l4.586 4.586c0.286 0.286 0.702 0.361 1.057 0.229 0.13-0.049 0.252-0.124 0.357-0.229 0-0 0-0 0-0l9.708-9.708 9.708 9.708c0 0 0 0 0 0 0.105 0.105 0.227 0.18 0.357 0.229 0.356 0.133 0.771 0.057 1.057-0.229l4.586-4.586c0.286-0.286 0.362-0.702 0.229-1.057-0.049-0.13-0.124-0.252-0.229-0.357z"></path></svg>',ADMIN:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path d="M30 19l-9 9-3-3-2 2 5 5 11-11z"></path><path d="M14 24h10v-3.598c-2.101-1.225-4.885-2.066-8-2.321v-1.649c2.203-1.242 4-4.337 4-7.432 0-4.971 0-9-6-9s-6 4.029-6 9c0 3.096 1.797 6.191 4 7.432v1.649c-6.784 0.555-12 3.888-12 7.918h14v-2z"></path></svg>',REMOVE_ADMIN:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path d="M12 23c0-4.726 2.996-8.765 7.189-10.319 0.509-1.142 0.811-2.411 0.811-3.681 0-4.971 0-9-6-9s-6 4.029-6 9c0 3.096 1.797 6.191 4 7.432v1.649c-6.784 0.555-12 3.888-12 7.918h12.416c-0.271-0.954-0.416-1.96-0.416-3z"></path><path d="M23 14c-4.971 0-9 4.029-9 9s4.029 9 9 9c4.971 0 9-4.029 9-9s-4.029-9-9-9zM28 24h-10v-2h10v2z"></path></svg>'})}.call(t,n,t,e))||(e.exports=o)}},t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,n.x=e=>{},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={826:0},t=[[873,532,755,786]],o=e=>{},a=(a,i)=>{for(var r,s,[c,d,l,u]=i,m=0,p=[];m<c.length;m++)s=c[m],n.o(e,s)&&e[s]&&p.push(e[s][0]),e[s]=0;for(r in d)n.o(d,r)&&(n.m[r]=d[r]);for(l&&l(n),a&&a(i);p.length;)p.shift()();return u&&t.push.apply(t,u),o()},i=self.webpackChunkxm=self.webpackChunkxm||[];function r(){for(var o,a=0;a<t.length;a++){for(var i=t[a],r=!0,s=1;s<i.length;s++){var c=i[s];0!==e[c]&&(r=!1)}r&&(t.splice(a--,1),o=n(n.s=i[0]))}return 0===t.length&&(n.x(),n.x=e=>{}),o}i.forEach(a.bind(null,0)),i.push=a.bind(null,i.push.bind(i));var s=n.x;n.x=()=>(n.x=s||(e=>{}),(o=r)())})(),n.x()})();