(()=>{var e={16873:(e,n,t)=>{var a,o,i=t(62743),r=t(19755);function s(e,n,t,a,o,i,r){try{var s=e[i](r),c=s.value}catch(e){return void t(e)}s.done?n(c):Promise.resolve(c).then(a,o)}function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){d(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}a=[t(36788),t(61433),t(87025),t(54436),t(53924),t(77759),t(760),t(12400),t(84040),t(33814),t(23230),t(74839),t(18335),t(14445),t(17209),t(23851),t(96512),t(66992),t(71296),t(70441),t(88501),t(87741)],void 0===(o=function(e,n,a,o,c,d,u,m,f,p,g,v,h,b,y,I,E,_,w,T,O,R){t(77424),t(33824),t(99079),t(31707),t(44014),i(r);var C=a.setCookie,A=a.setDataToLocalApplication,x=a.getDataToLocalApplication,S=d.ATTRIBUE_SIDEBAR_ROOM,M=d.BODY_BG_THEME,j=d.BODY_FZ,D=d.THEMES,k=d.FONTSIZES,P=d.TOKEN,N=c.setGeneral,L=c.getGeneral,B=!1,U=function(){var e=r("body"),n=x(M)||D[0].name,t=x(j)||k[2];D.forEach((function(n){return e.removeClass(n.name)})),e.addClass(n),e.css("font-size",t)},G=function(e){C(x(P),3650),n.setInfomation(l(l({},e.user),{},{erp_url:null==e?void 0:e.erp_url})),n.setRoomsWithAdapter(e.chats),f.onInit(),p.onInit(),h.onInit(),g.onInit(),v.onInit(),b.onInit(),y.onInit(),I.onInit(),E.onInit(),_.onInit(),w.onInit(),T.onInit(),m.onInit(),R.onInit()},H=function(e){var t=(null==e?void 0:e.body_bg_theme)||D[0].name,a=(null==e?void 0:e.body_fz)||k[2],o=(null==e?void 0:e.user_chat_info)||{};n.setRoomInfoWasEdited(o),n.setBodyBgTheme(t),n.setBodyFontSize(a),A(M,t),A(j,a),U()},Y=function(){e.get("version").then((function(e){return n.setVersion(e)})),Promise.all([e.post("validate"),e.get("users/preferences")]).then((function(e){!function(e){N(e)}(e),H(e[1]),G(e[0])}))};(function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(".xm-page-loading").remove(),u.onInit(),"serviceWorker"in navigator&&(navigator.serviceWorker.addEventListener("controllerchange",(function(){O.onInit()})),navigator.serviceWorker.register("sw.js").then((function(e){setInterval((function(){e.update()}),1e5)}))),r(document).on("click",".input-only-view",(function(e){var n=r(e.currentTarget).prev();n.get(0).select(),n.get(0).setSelectionRange(0,99999),document.execCommand("copy"),o.show("Link copied to clipboard","success"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()})),window.addEventListener("offline",(function(){n.setNetworkStatus(!1)})),window.addEventListener("online",(function(){if(n.setNetworkStatus(!0),!B){B=!0;var e=n.getCurrentRoomId();if(e){var t=r("[".concat(S,'="').concat(e,'"]'));n.setCurrentRoomId(null),t.click(),n.setCurrentRoomId(e)}setTimeout(Y,1e3)}})),U(),window.navigator.onLine||n.setNetworkStatus(!1),e.next=8,L();case 8:(t=e.sent)&&t.length&&(H(t[1]),G(t[0])),Y();case 11:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(a,o){var i=e.apply(n,t);function r(e){s(i,a,o,r,c,"next",e)}function c(e){s(i,a,o,r,c,"throw",e)}r(void 0)}))});return function(){return t.apply(this,arguments)}})()()}.apply(n,a))||(e.exports=o)},96512:(e,n,t)=>{var a,o,i=t(19755);a=[t(77759),t(61433),t(54436),t(87025),t(53741)],void 0===(o=function(e,n,t,a,o){var r=e.API_URL,s=e.TOKEN,c=a.getDataToLocalApplication(s)||"",l=i(".btn__attach"),d=i(".--input-up-file"),u=i(".--input-up-media"),m=i("#media-menu"),f=m.find(".js-up-phone"),p=i(".chatbox-progress-upload"),g=p.find("path"),v=p.find("span"),h=i(".dropzone"),b=!1,y=!1,I=0,E=function(e){var n=e;return e<0&&(n=0),e>100&&(n=100),(100-n)/100*Math.PI*18},_=function(){y=!1,m.hide(),i(document).off(".hideAttachSlide")},w=function(e){e.preventDefault(),e.stopPropagation(),y?_():(y=!0,m.show(),i(document).on("click.hideAttachSlide",(function(e){m.is(e.target)||0!==m.has(e.target).length||_()})))},T=function(e){if(e.lengthComputable){var n=e.total,t=100*e.loaded/n,a=E(t);v.html(Math.round(t)),g.attr("stroke-dashoffset",a)}},O=function(){d.get(0).value="",u.get(0).value="",p.hide(),v.html(Math.round(0)),g.attr("stroke-dashoffset",E(0))},R=function(e,t){var a=new FormData;p.show(),a.append("file",t),a.append("chat_id",n.getCurrentRoomId()),i.ajax({type:"POST",url:"".concat(r,"/").concat(e),data:a,headers:{"X-Authorization-Token":c},xhr:function(){var e=i.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",T,!1),e},cache:!1,contentType:!1,processData:!1,success:O,error:O})},C=function(e,n){if(e.size>5e8)return t.show("Maximum file size is 400MB!"),void O();/(gif|jpe?g|tiff?|png|webp|bmp)$/i.test(e.type)?R("imageupload",e):/(mp4)$/i.test(e.type)?R("videoupload",e):/audio/i.test(e.type)?R("audioupload",e):n&&/video/i.test(e.type)?t.show("Only MP4 files supported"):R("fileupload",e)},A=function(e){"fileupload"===e?R(e,d.get(0).files[0]):C(u.get(0).files[0],!0)},x=function(e){if(e.preventDefault(),e.stopPropagation(),I=0,h.hide(),e.originalEvent.dataTransfer.items&&e.originalEvent.dataTransfer.items.length){var n=e.originalEvent.dataTransfer.items[0],t=n.getAsFile();if(!n.type)return;a.confirm({des:"Are you sure you want to send this file?",onOk:function(){return C(t)}})}return!1},S=function(){console.log(o),o.onInit(),_()};return{onInit:function(){l.off().click(w),f.off().click(S),d.off().change((function(){return A("fileupload")})),u.off().change((function(){return A("imageupload")})),h.off().on("dragover",!1).on("drop",x),b||(b=!0,document.addEventListener("dragover",(function(e){e.preventDefault()})),document.addEventListener("dragenter",(function(e){e.preventDefault(),I+=1,h.show()}),!1),document.addEventListener("dragleave",(function(){0===(I-=1)&&h.hide()}),!1),document.addEventListener("drop",(function(e){I=0,h.hide()})),document.onpaste=function(e){var t=(event.clipboardData||event.originalEvent.clipboardData).items;for(index in t){var a=t[index];if("file"===a.kind&&n.getCurrentRoomId()){var o=a.getAsFile();C(o)}}})},markPhone:function(e){e?f.hide():f.show()}}}.apply(n,a))||(e.exports=o)},17209:(e,n,t)=>{var a,o,i=t(19755);function r(e,n,t,a,o,i,r){try{var s=e[i](r),c=s.value}catch(e){return void t(e)}s.done?n(c):Promise.resolve(c).then(a,o)}function s(e){return function(){var n=this,t=arguments;return new Promise((function(a,o){var i=e.apply(n,t);function s(e){r(i,a,o,s,c,"next",e)}function c(e){r(i,a,o,s,c,"throw",e)}s(void 0)}))}}function c(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return l(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return l(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}a=[t(77759),t(36788),t(61433),t(87025),t(53924),t(45271),t(24091),t(28960),t(14445),t(32244)],void 0===(o=function(e,n,t,a,o,r,l,d,u,m){var f,p,g=".--click-show-popup-up-img",v=e.ATTRIBUTE_SIDEBAR_ROOM,h=e.ATTRIBUTE_MESSAGE_ID,b=a.transformLinkTextToHTML,y=a.highlightText,I=a.decodeStringBase64,E=o.getChatById,_=o.setChatsById,w=l.renderMessage,T=l.renderUnread,O=l.renderRangeDate,R=l.onErrNetWork,C=l.onHandleRoomWasDeleted,A=r.getRoomById,x=r.storeRoomById,S=0,M=0,j=!1,D=!1,k=!0,P=!1,N=i(".scroll-to__bottom"),L=i(".messages__list"),B=i(".js_con_list_mess"),U=i(".--load-mess"),G=i(".unread-message-scroll"),H=function(){B.scrollTop()+B.height()<B[0].scrollHeight-400?N.show():k&&(M=0,G.text(0),G.hide(),N.hide()),!k&&!j&&B.scrollTop()+B.height()>B[0].scrollHeight-700&&W(),j||D||B.scrollTop()>700||V()},Y=function(){var e=B.get(0);B.scrollTop(e.scrollHeight)},z=function(){var e;k?B.animate({scrollTop:B[0].scrollHeight},200):(k=!0,messages=t.getCurrentMessages(),S=null===(e=messages[0])||void 0===e?void 0:e.sequence,messagesHtml=messages.map((function(e,n,t){return O(e,n,t,!0)+w(e,search)})).join(""),L.html(messagesHtml),setTimeout((function(){D=!1}),200),B.animate({scrollTop:B[0].scrollHeight},200))},F=function(e){var n=i("[".concat(h,'="').concat(e,'"]'));if(n.length){var t=n.offset().top,a=B.offset().top,o=B.scrollTop();B.scrollTop(t+o-(a+200))}},W=function(){var e,a,o=t.getCurrentRoomId(),i=A(o),r=t.getCurrentMessages(),s=null===(e=i[i.length-1])||void 0===e?void 0:e.sequence,l=null===(a=r[r.length-1])||void 0===a?void 0:a.sequence,d={chatId:o,offset:s+20};j=!0,n.get("messages",d).then((function(e){var n,t;if(s===(null===(n=i[i.length-1])||void 0===n?void 0:n.sequence)&&d.chatId===o&&0===e.status){var a=e.data.messages.filter((function(e){return e.sequence>s})).reverse();messagesHtml=a.map((function(e,n,t){return O(e,n,t,"up")+w(e)})).join(""),i=[].concat(c(i),c(a)),B.scrollTop(B.scrollTop()-1),L.append(messagesHtml),l<=(null===(t=a[a.length-1])||void 0===t?void 0:t.sequence)&&(k=!0),setTimeout((function(){j=!1}),50)}else j=!1}))},V=function(){var e=t.getCurrentRoomId(),a=A(e),o={chatId:e,offset:S};j=!0,n.get("messages",o).then((function(n){var t,i,r,s;if(o.offset===S&&o.chatId===e&&0===n.status){var l,d=[];(null==n||null===(t=n.data)||void 0===t||null===(i=t.messages)||void 0===i?void 0:i.length)<20&&(D=!0),l=(d=d.concat((null==n||null===(r=n.data)||void 0===r?void 0:r.messages)||[]).reverse()).map((function(e,n,t){return O(e,n,t,"down")+w(e)})).join(""),S=null===(s=d[0])||void 0===s?void 0:s.sequence,x(e,[].concat(c(d),c(a))),B.scrollTop(B.scrollTop()+1),L.prepend(l),setTimeout((function(){j=!1}),50)}else j=!1}))},J=function(e,n,a){var o,r,s=n.unreadMessages>0&&n.unreadMessages<16,c=null;if(e.length<20&&(D=!0),s&&e.length){var l=e.length-n.unreadMessages;e[l]?(e[l].posUnread=!0,c=e[l].id.messageId):s=!1}S=null===(o=e[0])||void 0===o?void 0:o.sequence,r=e.map((function(e,n,t){return O(e,n,t)+T(e)+w(e)})).join(""),L.html(r),s?F(c):B.scrollTop(B[0].scrollHeight),L.find(g).on("load",Y),U.hide(),setTimeout((function(){!function(e,n){var a=t.getRooms();i("[".concat(v,'="').concat(e.id,'"]')).find(".badge").html(""),e.unreadMessages=0,a[n]=e,t.setRooms(a)}(n,a),j=!1}),50)},q=function(e,a){return n.get("messages",{chatId:e.id,offset:0}).then((function(n){var o,i;if(e.id===t.getCurrentRoomId())if(0===n.status){u.onRenderTimeActivity(null==n||null===(o=n.data)||void 0===o?void 0:o.partnerLastTimeActivity);var r=((null==n||null===(i=n.data)||void 0===i?void 0:i.messages)||[]).reverse();_(e.id,r),x(e.id,r),J(r,e,a)}else 2===n.status&&C()})).catch(R)},$=function(e,n){J(A(e.id),e,n)};return{onInit:function(){G.hide(),m.onInit(),B.off("scroll").scroll(H),N.off("click").click(z),i(document).off(".btnMessageSettings").on("click.btnMessageSettings",".btn-message-settings",(function(e){return m.onShow(e)}))},onLoadMessage:(p=s(regeneratorRuntime.mark((function e(n,a){var o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U.show(),L.html(""),G.text(0),G.hide(),M=0,j=!0,k=!0,D=!1,!A(n.id)||!P){e.next=4;break}return $(n,a),e.abrupt("return");case 4:if(!t.getNetworkStatus()){e.next=9;break}P=!0,q(n,a),e.next=20;break;case 9:return e.next=11,E(n.id);case 11:if(o=e.sent){e.next=15;break}return R(""),e.abrupt("return");case 15:r=o.map((function(e,n,t){return O(e,n,t)+T(e)+w(e)})).join(""),L.html(r),U.hide(),i("[".concat(v,'="').concat(n.id,'"]')).find(".badge").html(""),B.scrollTop(B[0].scrollHeight);case 20:case"end":return e.stop()}}),e)}))),function(e,n){return p.apply(this,arguments)}),onSync:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=n[0],o=t.getCurrentRoomId();if(i("[".concat(h,'="').concat(null==a||null===(e=a.id)||void 0===e?void 0:e.messageId,'"]')).length)return!1;var r=A(o);if(B.scrollTop()+B.height()<B[0].scrollHeight-400&&t.getInfomation().id!==a.sender.id&&(M+=1,G.text(M),G.show()),k){var s=B.get(0),c=s.scrollHeight-s.scrollTop<=s.clientHeight,l=O(a,1,[].concat(r[r.length-1],a))+w(a);L.append(l),c&&(B.scrollTop(s.scrollHeight),L.find(g).on("load",Y))}},onSyncRemove:function(e){var n=i("[".concat(h,'="').concat(e,'"]')),t=n.prev(),a=t.prev();t.hasClass("not-mess-li")&&t.remove(),a.hasClass("not-mess-li")&&a.remove(),n.remove()},onSyncUpdate:function(e){var n=e.id.messageId;i("[".concat(h,'="').concat(n,'"]')).find(".--mess").html(b(I(e.message)))},onSearch:function(e,n){var a,o,r,s,c=t.getCurrentMessages(),l=null===(a=c[c.length-1])||void 0===a||null===(o=a.id)||void 0===o?void 0:o.messageId;n?i("[".concat(h,'="').concat(e.offset,'"] .--mess')).html(y(n.message,e.value)):(D=!1,messages=t.getCurrentSearchMessages(),S=null===(r=messages[0])||void 0===r||null===(s=r.id)||void 0===s?void 0:s.messageId,messagesHtml=messages.map((function(n,t,a){return O(n,t,a,"down")+w(n,e)})).join(""),L.html(messagesHtml));k=!!i("[".concat(h,'="').concat(l,'"]')).length,F(e.offset)},onFinishPostMessage:function(e){var n=i('[data-id-local="'.concat(e.idLocal,'"]')),t=A(e.chatId);if(x(e.chatId,t.map((function(n){return e.idLocal===n.idLocal&&(n.idLocal=null,n.id={chatId:e.chatId,messageId:e.messageId}),n}))),!n.length)return!1;n.attr(h,e.messageId),n.removeClass("js_li_mess_local")},onAddLocal:(f=s(regeneratorRuntime.mark((function e(n){var a,o,i,r,s,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.chatId,o=t.getInfomation(),i=B.get(0),r=A(a),s="",c={deleted:!1,forwarded:!1,file:null,quotedMessage:null,idLocal:n.idLocal,type:1,updated:!1,internal:n.params.internal,message:n.params.message,msgDate:n.idLocal,sender:{email:o.email,id:o.id,name:o.name}},P){e.next=13;break}return e.next=9,E(a);case 9:if(e.t0=e.sent,e.t0){e.next=12;break}e.t0=[];case 12:r=e.t0;case 13:n.params.quotedMessageId&&(l=r.find((function(e){return e.id.messageId===n.params.quotedMessageId})))&&null!=l&&l.id&&(c.quotedMessage=l),s=r.length?O(c,1,[].concat(r[r.length-1],c))+w(c):w(c),x(a,r.concat(c)),L.append(s),B.scrollTop(i.scrollHeight),L.find(g).on("load",Y);case 19:case"end":return e.stop()}}),e)}))),function(e){return f.apply(this,arguments)})}}.apply(n,a))||(e.exports=o)},45271:(e,n,t)=>{var a,o;a=[t(61433)],void 0===(o=function(e){var n={},t={};return n.getRoomById=function(e){return t[e]},n.storeRoomById=function(e,n){t[e]=n},n.handleSyncData=function(n,a){try{var o=t[a],i=e.getInfomation();if(!o)return;if(n.deleted)return void(t[a]=o.filter((function(e){return n.id.messageId!==e.id.messageId})));if(n.updated)return void(t[a]=o.map((function(e){return n.id.messageId===e.id.messageId?n:e})));if(n.sender.id===i.id){for(var r=o.length,s=!1,c=r-1;c>=0;c-=1){var l,d=o[c];if((null==d||null===(l=d.id)||void 0===l?void 0:l.messageId)===n.id.messageId){s=!0,o[c]=n,t[a]=o;break}}s||(t[a]=o.concat(n))}else t[a]=o.concat(n)}catch(e){console.log(e)}},Object.freeze(n)}.apply(n,a))||(e.exports=o)},24091:(e,n,t)=>{var a,o,i=t(19755);a=[t(30381),t(77759),t(54436),t(61433),t(87025),t(28960)],void 0===(o=function(e,n,t,a,o,r){var s={},c=o.render,l=o.getAvatar,d=o.convertMessagetime,u=o.humanFileSize,m=o.transformLinkTextToHTML,f=o.highlightText,p=o.htmlEncode,g=o.decodeStringBase64,v=n.API_URL,h=function(e){var n={};switch(e.type){case 2:return n.src="".concat(v,"/image?id=").concat(e.id,"&small=1"),c(r.image,n);case 3:return n.src="".concat(v,"/audio?id=").concat(e.id),c(r.audio,n);case 4:return n.src="".concat(v,"/stream?id=").concat(e.id),c(r.video,n);default:return n.src="".concat(v,"/file?id=").concat(e.id),n.fileName=e.filename,n.fileSize=u(e.size),c(r.file,n)}};return s.onHandleRoomWasDeleted=function(){var e=a.getCurrentRoomId(),o=a.getRooms().filter((function(n){return n.id!==e}));i(".js_caption").show(),i(".js_wrap_mess").hide(),i("[".concat(n.ATTRIBUTE_SIDEBAR_ROOM,'="').concat(e,'"]')).remove(),a.setRooms(o),a.setCurrentRoomId(null),t.show("This chat room no longer exists")},s.onErrNetWork=function(e){console.log(e),t.show(a.getLangJson().UNABLE_TO_CONNECT),a.setCurrentRoomId(null),i(".js_caption").show(),i(".js_wrap_mess").hide(),i("[".concat(n.ATTRIBUTE_SIDEBAR_ROOM,"]")).removeClass("active")},s.renderUnread=function(e){return e.posUnread?(e.posUnread=!1,c(r.unread,{})):""},s.renderRangeDate=function(n,t,a,o){var s=e(n.msgDate),l={},d={};if(0===t&&"up"!==o)return l.date=s.format("MMMM DD, YYYY"),l.dateCode=s.format("MMDDYYYY"),c(r.rangeDate,l);if(0===t&&"up"===o)return(d=e(a[a.length-1].msgDate)).isSame(s,"date")?"":(l.date=s.format("MMMM DD, YYYY"),l.dateCode=s.format("MMDDYYYY"),c(r.rangeDate,l));(d=e(a[t-1].msgDate),t===a.length-1&&"down"===o)&&(e(a[0].msgDate).isSame(s,"date")&&i("[data-mess-date-code='".concat(s.format("MMDDYYYY"),"']")).remove());return d.isSame(s,"date")?"":(l.date=s.format("MMMM DD, YYYY"),l.dateCode=s.format("MMDDYYYY"),c(r.rangeDate,l))},s.renderMessage=function(e,n){try{var t,o=a.getInfomation(),i=a.getRoomInfoWasEdited(),s=e.sender,u=e.id,v=e.type,b=e.idLocal,y=e.message,I=e.quotedMessage,E=e.msgDate,_=e.internal,w=e.forwarded,T=e.file,O={id:null==u?void 0:u.messageId,chatType:v,idLocal:b},R=g(y);if(b&&(O.classLocal="js_li_mess_local"),5===v)return O.who=R,c(r.joinGroup,O);if(7===v)return O.who=R,c(r.leftGroup,O);if(21===v||24===v)return O.mess=R,c(r.call,O);if(n&&n.offset&&n.offset===(null==u?void 0:u.messageId)&&(R=f(R,n.value)),O.src=l(null==s?void 0:s.id),O.name=p((null===(t=i[null==s?void 0:s.id])||void 0===t?void 0:t.user_name)||(null==s?void 0:s.name)),O.officially_name=p(null==s?void 0:s.name),O.userId=null==s?void 0:s.id,O.show_internal=_?"":"hidden",O.who=o.id===(null==s?void 0:s.id)?"you":"",O.date=d(E,a.getLangJson()),O.forward=w?"fwme":"",R.indexOf('"></c>')>-1&&-1===R.indexOf('<div class="col-xs-12 comment-box-inline" style="margin-left: 0;">')&&!I)try{var C,A=R.split('<c style="display:none" ob="'),x=JSON.parse(A[1].replace('"></c>',""));O.comment='<div class="comment-box-inline" style="margin-left: 0;">'.concat(p((null===(C=i[null==x?void 0:x.userId])||void 0===C?void 0:C.user_name)||(null==x?void 0:x.name)),": ").concat(x.mess,"</div>"),O.mess=m(A[0])}catch(e){O.mess=m(R)}else I&&(O.comment=function(e){var n,t=e.sender,o=e.message,i=e.file,r=a.getRoomInfoWasEdited(),s=p((null===(n=r[null==t?void 0:t.id])||void 0===n?void 0:n.user_name)||(null==t?void 0:t.name)),c=m(g(o));return i&&(c=h(i)),'<div class="comment-box-inline" style="margin-left: 0;">'.concat(s,": ").concat(c,"</div>")}(I)),O.mess=m(R);return T&&(O.isFile="have-file",O.mess=h(T)),c(r.mess,O)}catch(e){return console.log(e),""}},Object.freeze(s)}.apply(n,a))||(e.exports=o)},28960:(e,n,t)=>{var a,o;a=[t(77759)],void 0===(o=function(e){var n={unread:'\n            <li class="not-mess-li">\n                <div class="messages__unreadLine">\n                    unread messages\n                </div>\n            </li>\n        ',call:'\n            <li class="not-mess-li call-mess" '.concat(e.ATTRIBUTE_MESSAGE_ID,'="{id}">\n                <div class="messages__unreadLine">\n                    {mess}\n                </div>\n            </li>\n        '),rangeDate:'\n            <li class="not-mess-li">\n                <div class="messages__time-chat" data-mess-date-code="{dateCode}">\n                    {date}\n                </div>\n             </li>\n        ',leftGroup:'\n            <li class="js_li_list_mess" '.concat(e.ATTRIBUTE_MESSAGE_ID,'="{id}">\n                <div class="messages__left-chat">\n                    {who} - left chat\n                </div>\n            </li>\n        '),joinGroup:'\n            <li class="js_li_list_mess" '.concat(e.ATTRIBUTE_MESSAGE_ID,'="{id}">\n                <div class="messages__join-chat">{who}  - joined chat\n                </div>\n            </li>\n        '),file:'<i class="xm xm-download"></i> <a href="{src}" target="_blank">{fileName}</a> {fileSize}',image:'<img class="p-cur --click-show-popup-up-img" src="{src}">',audio:'<audio controls>source src="{src}" type="audio/mpeg">Your browser does not support the audio element.</audio>',video:'<video width="400" controls><source src="{src}" type="video/mp4">Your browser does not support HTML video.</video>',mess:'\n            <li class="js_li_list_mess {who} {classLocal} messages__item {isFile}" data-id-local="{idLocal}" '.concat(e.ATTRIBUTE_MESSAGE_ID,'="{id}" data-chat-type="{chatType}">\n                <div class="--content">\n                    <div class="--heading">\n                        <img ').concat(e.ATTRIBUTE_CHANGE_IMAGE,'="{userId}" class="--img avatar" src="{src}" onerror="this.src=\'/assets/images/user.jpg\'">\n                        <div class="--name" ').concat(e.ATTRIBUTE_CHANGE_NAME,'="{userId}" data-user-officially-name="{officially_name}">{name}</div>\n                        <div class="messages--internal {show_internal}">Internal</div>\n                    </div>\n                    {comment}\n                    <div class="above-of-mess {forward}">Forwarded message:</div>\n                    <div class="--mess {forward}">{mess}</div>\n                    <div class="messages__bottom">\n                        <div class="--date">{date}</div>\n                        <div class="xm xm-bars --bars --menu p-cur btn-message-settings"></div>\n                    </div>\n                </div>\n            </li>\n        ')};return Object.freeze(n)}.apply(n,a))||(e.exports=o)},23851:(e,n,t)=>{var a,o,i=t(19755);function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}a=[t(77759),t(87025),t(36788),t(61433)],void 0===(o=function(e,n,a,o){var c=n.htmlDecode,l=(n.htmlEncode,n.stripTags),d=n.encodeStringBase64,u=n.transformLinkTextToHTML,m=(0,n.getDataToLocalApplication)(e.TOKEN)||"",f=i(".js_endter_mess"),p=i(".js_con_list_mess"),g=i(".btn__send"),v=i(".btn__attach"),h=i(".mess-comment-box"),b=h.find(".mess-fw-box"),y=h.find(".mess-fw-box-close"),I=[],E=!1,_=!1,w=0,T=function(){var e=f.get(0),n=p.get(0),t=n.scrollTop+n.clientHeight>=n.scrollHeight;setTimeout((function(){f.val().replace(/[\s\n]/g,"")?(g.show(),v.hide()):(g.hide(),v.show()),e.style.cssText="";var a=Math.min(window.outerHeight/5,e.scrollHeight);e.style.cssText="height: ".concat(a,"px"),n.style.cssText="height: calc(100% - ".concat(68+a,"px)"),t&&n.scrollTo(0,n.scrollHeight)}),0)},O=function(e){13!==e.keyCode||e.shiftKey||(e.preventDefault(),x()),T()},R=function(){return T()},C=function(){w=0,E=!1,_=!1,f.val(""),f.focus(),g.hide(),h.hide(),T()},A=function n(o){o.isDelete?a.delete("chats/".concat(o.chatId,"/messages/").concat(o.messageId)).then((function(){I.shift(),I.length&&n(I[0])})).catch((function(){return setTimeout((function(){return n(I[0])}),5e3)})):o.messageId?i.ajax({type:"PUT",url:"".concat(e.API_URL,"/chats/").concat(o.chatId,"/messages/").concat(o.messageId),data:o.params.message,headers:{"X-Authorization-Token":m},cache:!1,contentType:!1,processData:!1,success:function(){I.shift(),I.length&&n(I[0])},error:function(){return setTimeout((function(){return n(I[0])}),5e3)}}):a.post("chats/".concat(o.chatId,"/messages"),o.params).then((function(e){var a=t(17209);I.shift(),a.onFinishPostMessage(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){s(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({idLocal:o.idLocal},e)),I.length&&n(I[0])})).catch((function(e){console.log(e),setTimeout((function(){return n(I[0])}),5e3)}))},x=function(){var e,n,a=t(17209),i=o.getRoomInfoWasEdited(),r=o.getCurrentRoomId(),s=f.val();s.replace(/[\s\n]/g,"")||E?((n={idLocal:(new Date).getTime(),messageId:w,chatId:r,isDelete:E,text:s,params:{message:d(s),internal:!(null===(e=i[r])||void 0===e||!e.hide_mess),quotedMessageId:_.chatId}}).messageId||a.onAddLocal(n),I.length||A(n),C(),I=I.concat(n)):C()},S=function(){_=!1,h.hide()};return{onInit:function(){f.off("keydown").keydown(O),f.off("paste").bind("paste",R),g.off().click(x),y.off().click(S)},onUpdate:function(e,n){var t=c(l(n.replace(/<br>/g,"\n")));f.val(t),f.focus(),w=e,T()},onRemove:function(e,n){E=!0,w=e,x()},onComment:function(e){_={chatId:e.chatId,mess:e.mess,name:e.officiallyName,userId:e.userId},f.focus(),h.show(),b.html("<b>".concat(e.name,'</b>: <span class="span-mess-cmt span-mess-cmt-ids">').concat(e.hasFile?e.mess:u(e.mess),"</span>"))},onAddEmoji:function(e){f.val(f.val()+e),f.focus(),T()},onClear:C}}.apply(n,a))||(e.exports=o)},66992:(e,n,t)=>{var a,o,i=t(19755);a=[t(77759),t(61433),t(36788),t(87025),t(17209)],void 0===(o=function(e,n,t,a,o){var r=a.debounce,s=i(".mess-search-box"),c=i("#msbg-input"),l=s.find(".pulse"),d=s.find(".msbp-cur"),u=s.find(".msbp-all"),m=s.find(".msbgb-up"),f=s.find(".msbgb-down"),p=s.find(".msb-close"),g=i(".btn-toggle-search-box"),v=[],h=0,b=0;g.hide();var y=function(){var e=i(".highlight-text").closest(".--mess");e.text(e.text()),d.text(0),u.text(0),l.hide(),h=0,b=0,v=[]},I=function(){s.addClass("open"),c.focus()},E=function(){s.removeClass("open"),c.val(""),y()},_=function(e,a,r,s){s===c.val()&&Promise.all([t.get("messages",{chatId:e,offset:a.id.messageId}),t.get("messages",{chatId:e,offset:a.id.messageId+20})]).then((function(e){if(s===c.val()&&r===h){l.hide();var t=i(".highlight-text").closest(".--mess"),d=e[0].data.messages.reverse(),u=e[1].data.messages.filter((function(e){return e.id.messageId>=a.id.messageId})).reverse();t.text(t.text()),n.setCurrentSearchMessages(d.concat(u)),o.onSearch({value:s,offset:a.id.messageId})}}))},w=r((function(){if(i("[".concat(e.ATTRIBUTE_MESSAGE_ID,'="').concat(v[h].id.messageId,'"]')).length){var t=i(".highlight-text").closest(".--mess");t.text(t.text()),o.onSearch({value:c.val(),offset:v[h].id.messageId},v[h])}else l.show(),_(n.getCurrentRoomId(),v[h],h,c.val())}),500),T=function(){0!==b&&1!==b&&(h+1===b?h=0:h+=1,d.text(h+1),w())},O=function(){0!==b&&1!==b&&(h-1==-1?h=b-1:h-=1,d.text(h+1),w())},R=r((function(){var a=c.val(),r=n.getCurrentRoomId();y(),a.length<3||(l.show(),t.get("messages",{chatId:r,search:a}).then((function(n){a===c.val()&&(n.data.messages.length?(v=n.data.messages,b=n.data.messages.length,d.text(h+1),u.text(n.data.messages.length),i("[".concat(e.ATTRIBUTE_MESSAGE_ID,'="').concat(v[0].id.messageId,'"]')).length?(l.hide(),o.onSearch({value:c.val(),offset:v[0].id.messageId},v[0])):_(r,v[0],h,c.val())):l.hide())})))}),1e3);return{onInit:function(){g.off().click(I),p.off().click(E),m.off().click(T),f.off().click(O),c.off().bind("paste",R),c.attr("autocomplete","off"),i(document).off(".chatbotSearch").on("input.chatbotSearch","#msbg-input",R)},onCloseSearchBox:E}}.apply(n,a))||(e.exports=o)},14445:(e,n,t)=>{var a,o,i=t(19755);function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){c(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}a=[t(30381),t(77759),t(61433),t(36788),t(87025),t(62582),t(46908),t(2585),t(59265)],void 0===(o=function(e,n,t,a,o,r,c,l,d){var u=o.getAvatar,m=i(".js-group-option"),f=i("#chatbox-group-option"),p=f.find(".--edit-group"),g=f.find(".--internal"),v=g.find("span"),h=f.find(".--disabled"),b=h.find("span"),y=f.find(".--leave"),I=f.find(".--remove"),E=i(".js_info_parnter .toolbar-name .--name"),_=i(".js_info_parnter .--img.avatar"),w=i(".js_info_parnter .toolbar-name .--online"),T=function(){f.hide(),i(document).off(".hideChatboxTopBarOptionsSlice")},O=function(e){e.preventDefault(),e.stopPropagation(),f.show(),i(document).on("click.hideChatboxTopBarOptionsSlice",(function(e){f.is(e.target)||0!==f.has(e.target).length||T()}))},R=function(){r.onInit(t.getCurrentRoomId()),T()},C=function(){d.onInit(),T()},A=function(){l.onInit(),T()},x=function(){var e=t.getCurrentRoomId(),n=s({},t.getRoomInfoWasEdited());n[e]=n[e]||{},n[e].hide_mess?(v.html(t.getLangJson().ENABLE),delete n[e].hide_mess):(v.html(t.getLangJson().DISABLE),n[e].hide_mess=!0),t.setRoomInfoWasEdited(n),T(),a.put("users/preferences",{user_chat_info:n}).then((function(){}))},S=function(){var e=t.getCurrentRoomId(),o=i("[".concat(n.ATTRIBUTE_SIDEBAR_ROOM,'="').concat(e,'"]')),r=s({},t.getRoomInfoWasEdited());r[e]=r[e]||{},!1===r[e].notification_mess?(o.removeClass("mute"),b.html(t.getLangJson().DISABLE),delete r[e].notification_mess):(o.addClass("mute"),b.html(t.getLangJson().ENABLE),r[e].notification_mess=!1),t.setRoomInfoWasEdited(r),T(),a.put("users/preferences",{user_chat_info:r}).then((function(){}))};return{onInit:function(){m.off().click(O),p.off().click(R),y.off().click(C),I.off().click(A),h.off().click(S),g.off().click(x),_.off().click(c.onInit)},onRenderInfomation:function(e){var a,o,i=t.getRoomInfoWasEdited();if(_.off("error"),w.html(""),!1===(null===(a=i[e.id])||void 0===a?void 0:a.notification_mess)?b.html(t.getLangJson().ENABLE):b.html(t.getLangJson().DISABLE),null!==(o=i[e.id])&&void 0!==o&&o.hide_mess?v.html(t.getLangJson().DISABLE):v.html(t.getLangJson().ENABLE),e.group)_.attr(n.ATTRIBUTE_CHANGE_IMAGE_GROUP,e.id),_.attr("src",u(e.id,!0)),_.on("error",(function(){return _.attr("src","/assets/images/group.svg")})),E.text(e.subject),E.removeAttr(n.ATTRIBUTE_CHANGE_NAME),p.show(),g.show(),y.show(),I.show(),w.hide();else{var r,s,c=e.partner.id,l=(null===(r=t.getRoomInfoWasEdited()[c])||void 0===r?void 0:r.user_name)||e.partner.name;_.removeAttr(n.ATTRIBUTE_CHANGE_IMAGE_GROUP),_.attr("src",u(null===(s=e.partner)||void 0===s?void 0:s.id)),_.on("error",(function(){return _.attr("src","/assets/images/user.jpg")})),E.text(l),E.attr(n.ATTRIBUTE_CHANGE_NAME,c),p.hide(),g.hide(),y.hide(),I.hide(),w.show()}},onRenderTimeActivity:function(n){n&&(e().diff(e(n),"seconds")<=30?w.html('<lang data-language="ONLINE">'.concat(t.getLangJson().ONLINE,"</lang>")):w.html('<lang data-language="LAST_SEEN">'.concat(t.getLangJson().LAST_SEEN,"</lang> ").concat(e(n).fromNow())))},onUpdateTitle:function(e){E.text(e)}}}.apply(n,a))||(e.exports=o)},71296:(e,n,t)=>{var a,o,i=t(19755);a=[t(23851)],void 0===(o=function(e){var n=["ğŸ˜„","ğŸ˜ƒ","ğŸ˜€","ğŸ˜Š","ğŸ˜‰","ğŸ˜","ğŸ˜˜","ğŸ˜š","ğŸ˜—","ğŸ˜™","ğŸ˜œ","ğŸ˜","ğŸ˜›","ğŸ˜³","ğŸ˜","ğŸ˜”","ğŸ˜Œ","ğŸ˜’","ğŸ˜","ğŸ˜£","ğŸ˜¢","ğŸ˜‚","ğŸ˜­","ğŸ˜ª","ğŸ˜¥","ğŸ˜°","ğŸ˜…","ğŸ˜“","ğŸ˜©","ğŸ˜«","ğŸ˜¨","ğŸ˜±","ğŸ˜ ","ğŸ˜¡","ğŸ˜¤","ğŸ˜–","ğŸ˜†","ğŸ˜‹","ğŸ˜·","ğŸ˜","ğŸ˜´","ğŸ˜µ","ğŸ˜²","ğŸ˜Ÿ","ğŸ˜¦","ğŸ˜§","ğŸ˜ˆ","ğŸ‘¿","ğŸ˜®","ğŸ˜¬","ğŸ˜","ğŸ˜•","ğŸ˜¯","ğŸ˜¶","ğŸ˜‡","ğŸ˜","ğŸ˜‘"],t=["ğŸ‘²","ğŸ‘³","ğŸ‘®","ğŸ‘·","ğŸ’‚","ğŸ‘¶","ğŸ‘¦","ğŸ‘§","ğŸ‘¨","ğŸ‘©","ğŸ‘´","ğŸ‘µ","ğŸ‘±","ğŸ‘¼","ğŸ‘¸","ğŸ˜º","ğŸ˜¸","ğŸ˜»","ğŸ˜½","ğŸ˜¼","ğŸ™€","ğŸ˜¿","ğŸ˜¹","ğŸ˜¾","ğŸ‘¹","ğŸ‘º","ğŸ™ˆ","ğŸ™‰","ğŸ™Š","ğŸ’€","ğŸ‘½","ğŸ’©","ğŸ”¥","âœ¨","ğŸŒŸ","ğŸ’«","ğŸ’¥","ğŸ’¢","ğŸ’¦","ğŸ’§","ğŸ’¤","ğŸ’¨","ğŸ‘‚","ğŸ‘€","ğŸ‘ƒ","ğŸ‘…","ğŸ‘„","ğŸ‘","ğŸ‘","ğŸ‘Œ","ğŸ‘Š","âœŠ","âœŒï¸","ğŸ‘‹","âœ‹","ğŸ‘","ğŸ‘†","ğŸ‘‡","ğŸ‘‰","ğŸ‘ˆ","ğŸ™Œ","ğŸ™","â˜ï¸","ğŸ‘","ğŸ’ª","ğŸš¶","ğŸƒ","ğŸ’ƒ","ğŸ‘«","ğŸ‘ª","ğŸ‘¬","ğŸ‘­","ğŸ’","ğŸ’‘","ğŸ‘¯","ğŸ™†","ğŸ™…","ğŸ’","ğŸ™‹","ğŸ’†","ğŸ’‡","ğŸ’…","ğŸ‘°","ğŸ™","ğŸ™","ğŸ™‡","ğŸ©","ğŸ‘‘","ğŸ‘’","ğŸ‘Ÿ","ğŸ‘","ğŸ‘¡","ğŸ‘ ","ğŸ‘¢","ğŸ‘•","ğŸ‘”","ğŸ‘š","ğŸ‘—","ğŸ½","ğŸ‘–","ğŸ‘˜","ğŸ‘™","ğŸ’¼","ğŸ‘œ","ğŸ‘","ğŸ‘›","ğŸ‘“","ğŸ€","ğŸŒ‚","ğŸ’„","ğŸ’›","ğŸ’™","ğŸ’œ","ğŸ’š","â¤ï¸","ğŸ’”","ğŸ’—","ğŸ’“","ğŸ’•","ğŸ’–","ğŸ’","ğŸ’˜","ğŸ’Œ","ğŸ’‹","ğŸ’","ğŸ’","ğŸ‘¤","ğŸ‘¥","ğŸ’¬","ğŸ‘£","ğŸ’­","ğŸ¶","ğŸº","ğŸ±","ğŸ­","ğŸ¹","ğŸ°","ğŸ¸","ğŸ¯","ğŸ¨","ğŸ»","ğŸ·","ğŸ½","ğŸ®","ğŸ—","ğŸµ","ğŸ’","ğŸ´","ğŸ‘","ğŸ˜","ğŸ¼","ğŸ§","ğŸ¦","ğŸ¤","ğŸ¥","ğŸ£","ğŸ”","ğŸ","ğŸ¢","ğŸ›","ğŸ","ğŸœ","ğŸ","ğŸŒ","ğŸ™","ğŸš","ğŸ ","ğŸŸ","ğŸ¬","ğŸ³","ğŸ‹","ğŸ„","ğŸ","ğŸ€","ğŸƒ","ğŸ…","ğŸ‡","ğŸ‰","ğŸ","ğŸ","ğŸ“","ğŸ•","ğŸ–","ğŸ","ğŸ‚","ğŸ²","ğŸ¡","ğŸŠ","ğŸ«","ğŸª","ğŸ†","ğŸˆ","ğŸ©","ğŸ¾","ğŸ’","ğŸŒ¸","ğŸŒ·","ğŸ€","ğŸŒ¹","ğŸŒ»","ğŸŒº","ğŸ","ğŸƒ","ğŸ‚","ğŸŒ¿","ğŸŒ¾","ğŸ„","ğŸŒµ","ğŸŒ´","ğŸŒ²","ğŸŒ³","ğŸŒ°","ğŸŒ±","ğŸŒ¼","ğŸŒ","ğŸŒ","ğŸŒ","ğŸŒš","ğŸŒ‘","ğŸŒ’","ğŸŒ“","ğŸŒ”","ğŸŒ•","ğŸŒ–","ğŸŒ—","ğŸŒ˜","ğŸŒœ","ğŸŒ›","ğŸŒ™","ğŸŒ","ğŸŒ","ğŸŒ","ğŸŒ‹","ğŸŒŒ","ğŸŒ ","â­","â˜€ï¸","â›…","â˜ï¸","âš¡","â˜”","â„ï¸","â›„","ğŸŒ€","ğŸŒ","ğŸŒˆ","ğŸŒŠ","ğŸ","ğŸ’","ğŸ","ğŸ’","ğŸ“","ğŸ","ğŸ†","ğŸ‡","ğŸ","ğŸ‘","ğŸƒ","ğŸ‘»","ğŸ…","ğŸ„","ğŸ","ğŸ‹","ğŸ‰","ğŸŠ","ğŸˆ","ğŸŒ","ğŸ”®","ğŸ¥","ğŸ“·","ğŸ“¹","ğŸ“¼","ğŸ’¿","ğŸ“€","ğŸ’½","ğŸ’¾","ğŸ’»","ğŸ“±","â˜ï¸","ğŸ“","ğŸ“Ÿ","ğŸ“ ","ğŸ“¡","ğŸ“º","ğŸ“»","ğŸ”Š","ğŸ”‰","ğŸ”ˆ","ğŸ”‡","ğŸ””","ğŸ”•","ğŸ“¢","ğŸ“£","â³","âŒ›","â°","âŒš","ğŸ”“","ğŸ”’","ğŸ”","ğŸ”","ğŸ”‘","ğŸ”","ğŸ’¡","ğŸ”¦","ğŸ”†","ğŸ”…","ğŸ”Œ","ğŸ”‹","ğŸ”","ğŸ›","ğŸ›€","ğŸš¿","ğŸš½","ğŸ”§","ğŸ”©","ğŸ”¨","ğŸšª","ğŸš¬","ğŸ’£","ğŸ”«","ğŸ”ª","ğŸ’Š","ğŸ’‰","ğŸ’°","ğŸ’´","ğŸ’µ","ğŸ’·","ğŸ’¶","ğŸ’³","ğŸ’¸","ğŸ“²","ğŸ“§","ğŸ“¥","ğŸ“¤","âœ‰ï¸","ğŸ“©","ğŸ“¨","ğŸ“¯","ğŸ“«","ğŸ“ª","ğŸ“¬","ğŸ“­","ğŸ“®","ğŸ“¦","ğŸ“","ğŸ“„","ğŸ“ƒ","ğŸ“‘","ğŸ“Š","ğŸ“ˆ","ğŸ“‰","ğŸ“œ","ğŸ“‹","ğŸ“…","ğŸ“†","ğŸ“‡","ğŸ“","ğŸ“‚","âœ‚ï¸","ğŸ“Œ","ğŸ“","âœ’ï¸","âœï¸","ğŸ“","ğŸ“","ğŸ“•","ğŸ“—","ğŸ“˜","ğŸ“™","ğŸ““","ğŸ“”","ğŸ“’","ğŸ“š","ğŸ“–","ğŸ”–","ğŸ“›","ğŸ”¬","ğŸ”­","ğŸ“°","ğŸ¨","ğŸ¬","ğŸ¤","ğŸ§","ğŸ¼","ğŸµ","ğŸ¶","ğŸ¹","ğŸ»","ğŸº","ğŸ·","ğŸ¸","ğŸ‘¾","ğŸ®","ğŸƒ","ğŸ´","ğŸ€„","ğŸ²","ğŸ¯","ğŸˆ","ğŸ€","âš½","âš¾ï¸","ğŸ¾","ğŸ±","ğŸ‰","ğŸ³","â›³","ğŸšµ","ğŸš´","ğŸ","ğŸ‡","ğŸ†","ğŸ¿","ğŸ‚","ğŸŠ","ğŸ„","ğŸ£","â˜•","ğŸµ","ğŸ¶","ğŸ¼","ğŸº","ğŸ»","ğŸ¸","ğŸ¹","ğŸ·","ğŸ´","ğŸ•","ğŸ”","ğŸŸ","ğŸ—","ğŸ–","ğŸ","ğŸ›","ğŸ¤","ğŸ±","ğŸ£","ğŸ¥","ğŸ™","ğŸ˜","ğŸš","ğŸœ","ğŸ²","ğŸ¢","ğŸ¡","ğŸ³","ğŸ","ğŸ©","ğŸ®","ğŸ¦","ğŸ¨","ğŸ§","ğŸ‚","ğŸ°","ğŸª","ğŸ«","ğŸ¬","ğŸ­","ğŸ¯","ğŸ","ğŸ","ğŸŠ","ğŸ‹","ğŸ’","ğŸ‡","ğŸ‰","ğŸ“","ğŸ‘","ğŸˆ","ğŸŒ","ğŸ","ğŸ","ğŸ ","ğŸ†","ğŸ…","ğŸŒ½","ğŸ ","ğŸ¡","ğŸ«","ğŸ¢","ğŸ£","ğŸ¥","ğŸ¦","ğŸª","ğŸ©","ğŸ¨","ğŸ’’","â›ª","ğŸ¬","ğŸ¤","ğŸŒ‡","ğŸŒ†","ğŸ¯","ğŸ°","â›º","ğŸ­","ğŸ—¼","ğŸ—¾","ğŸ—»","ğŸŒ„","ğŸŒ…","ğŸŒƒ","ğŸ—½","ğŸŒ‰","ğŸ ","ğŸ¡","â›²","ğŸ¢","ğŸš¢","â›µ","ğŸš¤","ğŸš£","âš“","ğŸš€","âœˆï¸","ğŸ’º","ğŸš","ğŸš‚","ğŸšŠ","ğŸš‰","ğŸš","ğŸš†","ğŸš„","ğŸš…","ğŸšˆ","ğŸš‡","ğŸš","ğŸš‹","ğŸšƒ","ğŸš","ğŸšŒ","ğŸš","ğŸš™","ğŸš˜","ğŸš—","ğŸš•","ğŸš–","ğŸš›","ğŸšš","ğŸš¨","ğŸš“","ğŸš”","ğŸš’","ğŸš‘","ğŸš","ğŸš²","ğŸš¡","ğŸšŸ","ğŸš ","ğŸšœ","ğŸ’ˆ","ğŸš","ğŸ«","ğŸš¦","ğŸš¥","âš ï¸","ğŸš§","ğŸ”°","â›½","ğŸ®","ğŸ°","â™¨ï¸","ğŸ—¿","ğŸª","ğŸ­","ğŸ“","ğŸš©"],a=["1ï¸âƒ£","2ï¸âƒ£","3ï¸âƒ£","4ï¸âƒ£","5ï¸âƒ£","6ï¸âƒ£","7ï¸âƒ£","8ï¸âƒ£","9ï¸âƒ£","0ï¸âƒ£","ğŸ”Ÿ","ğŸ”¢","#ï¸âƒ£","ğŸ”£","â¬†ï¸","â¬‡ï¸","â¬…ï¸","â¡ï¸","ğŸ” ","ğŸ”¡","ğŸ”¤","â†—ï¸","â†–ï¸","â†˜ï¸","â†™ï¸","â†”ï¸","â†•ï¸","ğŸ”„","â—€ï¸","â–¶ï¸","ğŸ”¼","ğŸ”½","â†©ï¸","â†ªï¸","â„¹ï¸","âª","â©","â«","â¬","â¤µï¸","â¤´ï¸","ğŸ†—","ğŸ”€","ğŸ”","ğŸ”‚","ğŸ†•","ğŸ†™","ğŸ†’","ğŸ†“","ğŸ†–","ğŸ“¶","ğŸ¦","ğŸˆ","ğŸˆ¯","ğŸˆ³","ğŸˆµ","ğŸˆ´","ğŸˆ²","ğŸ‰","ğŸˆ¹","ğŸˆº","ğŸˆ¶","ğŸˆš","ğŸš»","ğŸš¹","ğŸšº","ğŸš¼","ğŸš¾","ğŸš°","ğŸš®","ğŸ…¿ï¸","â™¿","ğŸš­","ğŸˆ·ï¸","ğŸˆ¸","ğŸˆ‚ï¸","â“‚ï¸","ğŸ›‚","ğŸ›„","ğŸ›…","ğŸ›ƒ","ğŸ‰‘","ãŠ™ï¸","ãŠ—ï¸","ğŸ†‘","ğŸ†˜","ğŸ†”","ğŸš«","ğŸ”","ğŸ“µ","ğŸš¯","ğŸš±","ğŸš³","ğŸš·","ğŸš¸","â›”","âœ³ï¸","â‡ï¸","â","âœ…","âœ´ï¸","ğŸ’Ÿ","ğŸ†š","ğŸ“³","ğŸ“´","ğŸ…°ï¸","ğŸ…±ï¸","ğŸ†","ğŸ…¾ï¸","ğŸ’ ","â¿","â™»ï¸","â™ˆ","â™‰","â™Š","â™‹","â™Œ","â™","â™","â™","â™","â™‘","â™’","â™“","â›","ğŸ”¯","ğŸ§","ğŸ’¹","ğŸ’²","ğŸ’±","Â©ï¸","Â®ï¸","â„¢ï¸","âŒ","â€¼ï¸","â‰ï¸","â—","â“","â•","â”","â­•","ğŸ”","ğŸ”š","ğŸ”™","ğŸ”›","ğŸ”œ","ğŸ”ƒ","ğŸ•›","ğŸ•§","ğŸ•","ğŸ•œ","ğŸ•‘","ğŸ•","ğŸ•’","ğŸ•","ğŸ•“","ğŸ•Ÿ","ğŸ•”","ğŸ• ","ğŸ••","ğŸ•–","ğŸ•—","ğŸ•˜","ğŸ•™","ğŸ•š","ğŸ•¡","ğŸ•¢","ğŸ•£","ğŸ•¤","ğŸ•¥","ğŸ•¦","âœ–ï¸","â•","â–","â—","â™ ï¸","â™¥ï¸","â™£ï¸","â™¦ï¸","ğŸ’®","ğŸ’¯","âœ”ï¸","â˜‘ï¸","ğŸ”˜","ğŸ”—","â°","ã€°ï¸","ã€½ï¸","ğŸ”±","â—¼ï¸","â—»ï¸","â—¾","â—½","â–ªï¸","â–«ï¸","ğŸ”º","ğŸ”²","ğŸ”³","âš«","âšª","ğŸ”´","ğŸ”µ","ğŸ”»","â¬œ","â¬›","ğŸ”¶","ğŸ”·","ğŸ”¸","ğŸ”¹"],o=!1,r=i(".wrap-emojis"),s=i(".btn__emoji"),c=i("[data-em-tab-btn]"),l=i('[data-em-tab-content="--tab-1"]'),d=i('[data-em-tab-content="--tab-2"]'),u=i('[data-em-tab-content="--tab-3"]'),m=function(e){return'<button data-em-btn="'.concat(e,'" class="btn-em">').concat(e,"</button>")},f=function(e){var n=i(e.currentTarget),t=n.data().emTabBtn;c.removeClass("active"),n.addClass("active"),i("[data-em-tab-content]").removeClass("active"),i('[data-em-tab-content="'.concat(t,'"]')).addClass("active")},p=function(){o=!1,r.hide(),i(document).off(".hideEmojiWrapper")},g=function(e){e.preventDefault(),e.stopPropagation(),o?p():(o=!0,r.show(),i(document).on("click.hideEmojiWrapper",(function(e){r.is(e.target)||0!==r.has(e.target).length||p()})))},v=function(n){var t=i(n.currentTarget).data().emBtn;e.onAddEmoji(t)};return{onInit:function(){l.html(n.map(m).join("")),d.html(t.map(m).join("")),u.html(a.map(m).join("")),c.off().click(f),s.off().click(g),i(document).off(".emoji").on("click.emoji","[data-em-btn]",v)}}}.apply(n,a))||(e.exports=o)},32244:(e,n,t)=>{var a,o,i=t(19755);a=[t(87025),t(23851),t(97857)],void 0===(o=function(e,n,t){var a,o=!1,r=i(".js_con_list_mess"),s=i(".js-menu-messages"),c=i(".js-menu-messages-cmt"),l=i(".js-menu-messages-forward"),d=i(".js-menu-messages-edit"),u=i(".js-menu-messages-remove"),m=function(){var t=a.data().chatId,o=a.find(".--name"),i=o.html(),r=a.find(".--mess").html(),s=o.data(),c=s.useridName,l=s.userOfficiallyName,d=e.stripTags(r),u=0;a.hasClass("have-file")&&(u=1,d=r),v(),n.onComment({chatId:t,userId:c,mess:d,name:i,hasFile:u,officiallyName:l})},f=function(){var e=a.data().chatId;v(),t.onInit(e)},p=function(){var e=a.data().chatId,t=a.find(".--mess").html();v(),n.onUpdate(e,t)},g=function(){var e=a.data().chatId,t=a.find(".--mess").html();v(),a.remove(),n.onRemove(e,t)},v=function(){o=!1,s.hide(),i(document).off(".hideMessageSettings")};return{onInit:function(){c.off().click(m),l.off().click(f),d.off().click(p),u.off().click(g)},onShow:function(e){if(e.preventDefault(),e.stopPropagation(),o)v();else{var n=i(e.currentTarget);a=n.closest(".js_li_list_mess"),o=!0,t=a.hasClass("you"),c=a.hasClass("have-file"),t?(d.show(),u.show()):(d.hide(),u.hide()),c&&d.hide(),function(e){i(window).width();var n=i(window).height(),t=s.height(),a=e.offset(),o=a.left-(r.offset().left+132),c=a.top+20;t+c+100>n&&(c=a.top-t-20),s.css({display:"block",top:"".concat(c,"px"),left:"".concat(o,"px")})}(n),i(document).on("click.hideMessageSettings",(function(e){s.is(e.target)||0!==s.has(e.target).length||v()}))}var t,c}}}.apply(n,a))||(e.exports=o)},18640:(e,n,t)=>{var a,o,i=t(19755);a=[t(77759),t(61433),t(36788)],void 0===(o=function(e,n,a){var o,r,s,c=function(){if(!r){var e=i("#acceptInvitationModal"),s=e.find(".btn-outline-primary"),c=e.find(".btn-outline-secondary");c.hide(),s.prop("disabled",!0),r=!0,a.post("contacts/".concat(o,"/accept")).then((function(){a.get("chats").then((function(e){var a=t(33814);n.setRoomsWithAdapter(e),a.onInit(),c.click()})).catch((function(e){console.log(e),r=!1,s.prop("disabled",!1)}))})).catch((function(){r=!1,s.prop("disabled",!1)}))}};return{onInit:function(t){s||(s=!0,i(document).on("click","#acceptInvitationModal .btn-outline-primary",c)),o=t.find("[".concat(e.ATTRIBUTE_CHANGE_NAME,"]")).data().useridName;var a,r;t.find(".avatar").prop("src").indexOf("users");i("#acceptInvitationModal").remove&&i("#acceptInvitationModal").remove(),i("body").append((a=t.find(".contact__name span").text(),r=n.getLangJson(),'\n        <div class="modal fade" id="acceptInvitationModal" tabindex="-1" role="dialog" data-backdrop="static">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <h2 data-language="INVITE_CONFIRMATION">'.concat(r.INVITE_CONFIRMATION,'</h2>\n                        <p><lang data-language="DO_YOU_ACCEPT_INVITATION"></lang>').concat(r.DO_YOU_ACCEPT_INVITATION," ").concat(a,'?</p>\n                        <button type="button" class="btn btn-outline-primary btn-small float-right">\n                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>\n                            <lang data-language="ACCEPT">').concat(r.ACCEPT,'</lang>\n                        </button>\n                        <button type="button" data-dismiss="modal" aria-label="Close" class="btn btn-outline-secondary btn-small float-right">\n                            <lang data-language="CANCEL">').concat(r.CANCEL,"</lang>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    "))),i("#acceptInvitationModal").modal("show")}}}.apply(n,a))||(e.exports=o)},62582:(e,n,t)=>{var a,o,i=t(19755);function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){c(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return d(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return d(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}a=[t(77759),t(36379),t(36788),t(61433),t(87025),t(54436)],void 0===(o=function(e,n,a,o,r,c){var d,u,m,f,p,g,v,h,b,y,I,E=r.render,_=r.debounce,w=r.getAvatar,T=r.htmlDecode,O=r.htmlEncode,R=[],C=!1,A=null,x='\n        <div data-mcg-id="{id}" data-mcg-name="{name}" class="crm-room">\n            <img class="--img avatar" src="{src}">\n            <span '.concat(e.ATTRIBUTE_CHANGE_NAME,'="{id}">{currentName}</span>\n            <div class="styled-checkbox"></div>\n        </div>\n    '),S="\n        <div ".concat(e.ATTRIBUTE_CHANGE_NAME,'="{id}" data-mcgs-id="{id}" class="crm-room {admin}">\n            <img class="--img avatar" src="{src}">\n            <span ').concat(e.ATTRIBUTE_CHANGE_NAME,'="{id}">{currentName}</span>\n            <div class="crmr-group-icon">\n                <div class="crmrgi-icon crmrgii-admin" data-toggle="tooltip" data-placement="left" title="Granting administrator permissions">\n                    ').concat(n.ADMIN,'\n                </div>\n                <div class="crmrgi-icon crmrgii-removeadmin" data-toggle="tooltip" data-placement="left" title="Removing administrator permissions">\n                    ').concat(n.REMOVE_ADMIN,'\n                </div>\n                <div class="crmrgi-icon crmrgii-cross" data-toggle="tooltip" data-placement="left" title="Remove this member">\n                    ').concat(n.CROSS,"\n                </div>\n            </div>\n        </div>\n    "),M=function(e){var n,t,a=null==e||null===(n=e.partner)||void 0===n?void 0:n.name,o=(null==e||null===(t=e.partner)||void 0===t?void 0:t.id)||"";return!(!e.id||!a||e.channel||e.group||!o)},j=function(e){var n,t,a,i,r=o.getRoomInfoWasEdited(),s=null==e||null===(n=e.partner)||void 0===n?void 0:n.name,c=(null==e||null===(t=e.partner)||void 0===t?void 0:t.id)||"",l=(null===(a=r[null==e||null===(i=e.partner)||void 0===i?void 0:i.id])||void 0===a?void 0:a.user_name)||s;return{id:c,src:w(c),name:O(s),currentName:O(l)}},D=function(){var e=u.find(".crm-room"),n=b.val().trim().toUpperCase();n?e.each((function(t){var a=e.eq(t),o=a.find("span").text();String(o).toUpperCase().indexOf(n)>-1?a.css("display",""):a.hide()})):e.css("display","")},k=_(D,300),P=function(e){var n=i(e.currentTarget),t=n.data(),a=t.mcgId,r=t.mcgName;if(n.attr("data-mcgi-selected"))R=R.filter((function(e){return e.id!==a})),i('[data-mcgs-id="'.concat(a,'"]')).remove(),n.removeAttr("data-mcgi-selected");else{var s=o.getRoomInfoWasEdited()[a],c=null!=s&&s.user_name?O(s.user_name):r;R=R.concat({id:a,currentName:c,src:w(a),data:{id:a,name:T(r),alias:null,selected:!0}}).sort((function(e,n){return e.currentName.localeCompare(n.currentName)})),n.attr("data-mcgi-selected",a),p.html(R.map((function(e){return E(S,e)}))),u.find('[data-toggle="tooltip"]').tooltip(),b.val()&&D()}I.text(R.length)},N=function(e){var n=i(e.target).closest(".crm-room"),t=n.data().mcgsId;R=R.filter((function(e){return e.id!==t})),i('[data-mcg-id="'.concat(t,'"]')).removeAttr("data-mcgi-selected"),I.text(R.length),i(".tooltip.show").remove(),n.remove()},L=function(e){var n=i(e.target).closest(".crm-room"),t=n.data().mcgsId;R=R.map((function(e){var a=s({},e);return e.id===t&&(n.addClass("admin"),a.admin="admin",a.data.admin=!0),a}))},B=function(e){var n=i(e.target).closest(".crm-room"),t=n.data().mcgsId;R=R.map((function(e){var a=s({},e);return e.id===t&&(n.removeClass("admin"),delete a.admin,delete a.data.admin),a}))},U=function(){v.click(),c.show("Unable to connect to the Internet")},G=function(){if((y.val()?R.length||(c.show("Please select at least one member."),0):(c.show("Please enter group name."),0))&&!d){var e=t(33814),n=t(14445);h.addClass("loading-btn"),d=!0;var i={members:R.map((function(e){return e.data})),id:A,subject:y.val()};if(A){var r=o.getCurrentRoomId();a.put("chats",i).then((function(t){t&&(n.onUpdateTitle(i.subject),e.onUpdateRoomName(r,i.subject),o.setRooms(o.getRooms().map((function(e){var n=s({},e);return r===e.id&&(n.subject=i.subject),n}))),v.click())})).catch(U)}else a.post("chats",i).then((function(n){if(n){var t=e.onRenderRoom(n);o.setRooms([o.setRoomWithAdapter(n)].concat(l(o.getRooms()))),e.onPrepend(t),v.click()}})).catch(U)}},H=function(){var e,n,t,a,r;i("body").append((r=l(o.getRooms().filter(M)).map(j),e={html:r.sort((function(e,n){return e.currentName.localeCompare(n.currentName)})).map((function(e){return E(x,e)})).join(""),numMembers:r.length},n=o.getLangJson(),t=e.html,a=e.numMembers,'\n        <div class="modal fade" id="createGroupModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h5 class="modal-title"></h5>\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n                    <div class="modal-body">\n                        <div class="crm-loading">\n                            <div class="pulse"></div>\n                        </div>\n                        <input data-language="ENTER_GROUP_NAME" data-lang-type="placeholder" type="text" name="name" id="cgm-input-name" placeholder="'.concat(n.ENTER_GROUP_NAME,'" maxlength="50" />\n                        <div class="crm-frame-wrapper">\n                            <div class="crmfwu">\n                                <div class="crmfwu-search-box">\n                                    <i class="xm xm-search"></i>\n                                    <input data-language="SEARCH_PLACEHOLDER" data-lang-type="placeholder" type="search" name="search" id="cgm-input-search" placeholder="').concat(n.SEARCH_PLACEHOLDER,'" />\n                                    <span class="crmfwusb-title">\n                                        <lang data-language="GROUP_MEMBERS">').concat(n.GROUP_MEMBERS,'</lang>: \n                                        <span class="crmfwusbt-num">').concat(a,'</span> \n                                        <lang data-language="MEMBER">').concat(n.MEMBER,'</lang>\n                                    </span>\n                                </div>\n                                <div class="crmfwus crmfwu-default-user">\n                                    ').concat(t,'\n                                </div>\n                            </div>\n                            <div class="crmfwu">\n                                <h2 class="crmfwu-title">\n                                    <lang data-language="SELECTED">').concat(n.SELECTED,'<lang>: <span class="crmfwut-num">0</span> <lang data-language="MEMBER">').concat(n.MEMBER,'</lang>\n                                </h2>\n                                <div class="crmfwus crmfwu-selected-user"></div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-outline-primary">\n                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>\n                            <lang data-language="SAVE">').concat(n.SAVE,"</lang>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    "))),u=i("#createGroupModal"),m=u.find(".modal-title"),h=u.find(".btn-outline-primary"),v=u.find(".close"),p=u.find(".crmfwu-selected-user"),g=u.find(".crmfwu-default-user"),f=u.find(".crm-loading"),I=u.find(".crmfwut-num"),b=i("#cgm-input-search"),y=i("#cgm-input-name"),b.attr("autocomplete","off"),y.attr("autocomplete","off"),u.on("click","[data-mcg-id]",P),u.on("click",".crmrgii-cross",N),u.on("click",".crmrgii-admin",L),u.on("click",".crmrgii-removeadmin",B),u.on("input","#cgm-input-search",k),h.click(G)};return{onInit:function(e){C||(C=!0,H()),u.find("[data-mcg-id]").css("display","").removeAttr("data-mcgi-selected"),d=!1,A=null,R=[],m.html(o.getLangJson().NEW_GROUP_CHAT),I.text(R.length),f.hide(),b.val(""),y.val(""),p.html(""),h.removeClass("loading-btn"),u.modal("show"),setTimeout((function(){return g.scrollTop(0)}),200),setTimeout((function(){return y.focus()}),500),e&&(m.html("Edit group chat"),function(e){f.show(),a.get("chats/".concat(e)).then((function(n){if(n.members){var t=o.getRooms().filter((function(n){return n.id===e}))[0];if(A=e,f.hide(),!t)return void v.click();y.val(t.subject),I.text(n.members.length),n.members.forEach((function(e){var n=o.getRoomInfoWasEdited()[e.user.id],t=null!=n&&n.user_name?n.user_name:e.user.name,a={id:e.user.id,currentName:O(t),src:w(e.user.id),data:{id:e.user.id,name:e.user.name,alias:null,selected:!0}};e.admin&&(a.admin="admin",a.data.admin=!0),i('[data-mcg-id="'.concat(e.user.id,'"]')).attr("data-mcgi-selected",e.user.id),R=R.concat(a)})),R.sort((function(e,n){return e.currentName.localeCompare(n.currentName)})),p.html(R.map((function(e){return E(S,e)}))),u.find('[data-toggle="tooltip"]').tooltip()}}))}(e))}}}.apply(n,a))||(e.exports=o)},46908:(e,n,t)=>{var a,o,i=t(19755);function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}t(30381).lang;a=[t(77759),t(54436),t(36788),t(61433),t(87025)],void 0===(o=function(e,n,t,a,o){o.render;var c,l,d,u,m,f,p,g,v,h,b,y,I,E,_=o.getAvatar,w=o.getDataToLocalApplication,T=e.API_URL,O=e.TOKEN,R=e.ATTRIBUTE_CHANGE_NAME,C=e.ATTRIBUTE_CHANGE_IMAGE_GROUP,A=w(O)||"",x=!1,S=function(e){console.log(e),I.click(),n.show(a.getLangJson().UNABLE_TO_CONNECT)},M=function(){if(!l){var e=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){s(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},a.getRoomInfoWasEdited());l=!0,y.addClass("loading-btn"),c.group?(e[c.id]=e[c.id]||{},e[c.id].user_des=b.val()):(e[c.partner.id]=e[c.partner.id]||{},e[c.partner.id].user_des=b.val(),e[c.partner.id].user_name=h.val()),t.put("users/preferences",{user_chat_info:e}).then((function(){if(I.click(),a.setRoomInfoWasEdited(e),!c.group){var n=h.val()||c.partner.name;i("[".concat(R,'="').concat(c.partner.id,'"]')).text(n)}})).catch(S)}},j=function(){var e=E.get(0).files[0],n=new FormData,t=new FileReader;e&&(t.addEventListener("load",(function(e){f.attr("src",e.target.result),i("[".concat(C,'="').concat(a.getCurrentRoomId(),'"]')).attr("src",e.target.result)})),t.readAsDataURL(e),n.append("avatarfile",e),n.append("id",a.getCurrentRoomId()),i.ajax({type:"POST",url:"".concat(T,"/uploadgroupavatar"),data:n,headers:{"X-Authorization-Token":A},cache:!1,contentType:!1,processData:!1,success:function(){},error:function(){}}))};return{onInit:function(){var e;x||(x=!0,i("body").append((e=a.getLangJson(),'\n        <div class="modal fade xmmc-modal" id="editRoomModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h5 class="modal-title" data-language="EDIT_ROOM">\n                            '.concat(e.EDIT_ROOM,'\n                        </h5>\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n                    <div class="modal-body not-live-assistance">\n                        <label class="erm-image-wrapper input-freeze">\n                            <input class="ermiw-file" type="file" accept="image/*" style="display: none" />\n                            <img />\n                            <div class="ermiw-icon">\n                                <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16" height="16" viewBox="0 0 36.174 36.174" style="filter: grayscale(1) invert(1);" xml:space="preserve"><g><path d="M23.921,20.528c0,3.217-2.617,5.834-5.834,5.834s-5.833-2.617-5.833-5.834s2.616-5.834,5.833-5.834 S23.921,17.312,23.921,20.528z M36.174,12.244v16.57c0,2.209-1.791,4-4,4H4c-2.209,0-4-1.791-4-4v-16.57c0-2.209,1.791-4,4-4h4.92 V6.86c0-1.933,1.566-3.5,3.5-3.5h11.334c1.934,0,3.5,1.567,3.5,3.5v1.383h4.92C34.383,8.244,36.174,10.035,36.174,12.244z M26.921,20.528c0-4.871-3.963-8.834-8.834-8.834c-4.87,0-8.833,3.963-8.833,8.834s3.963,8.834,8.833,8.834 C22.958,29.362,26.921,25.399,26.921,20.528z"/></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>\n                            </div>\n                        </label>\n                        <div class="xmmcm-form-group erm-userid">\n                            <label data-language="USER_ID">').concat(e.USER_ID,'</label>\n                            <input class="input-freeze" tabindex="-1" />\n                            <div class="input-only-view" data-toggle="tooltip" data-placement="top" data-lang-type="tooltip" data-language="COPY_TO_CLIPBOARD" title="').concat(e.COPY_TO_CLIPBOARD,'"></div>\n                        </div>\n                        <div class="xmmcm-form-group erm-chatid">\n                            <label data-language="CHAT_ID">').concat(e.CHAT_ID,'</label>\n                            <input class="input-freeze" tabindex="-1" />\n                            <div class="input-only-view" data-toggle="tooltip" data-placement="top" data-lang-type="tooltip" data-language="COPY_TO_CLIPBOARD" title="').concat(e.COPY_TO_CLIPBOARD,'"></div>\n                        </div>\n                        <div class="xmmcm-form-group erm-email">\n                            <label data-language="EMAIL">').concat(e.EMAIL,'</label>\n                            <input class="input-freeze" tabindex="-1" />\n                            <div class="input-only-view" data-toggle="tooltip" data-placement="top" data-lang-type="tooltip" data-language="COPY_TO_CLIPBOARD" title="').concat(e.COPY_TO_CLIPBOARD,'"></div>\n                        </div>\n                        <div class="xmmcm-form-group erm-name">\n                            <label data-language="NAME">').concat(e.NAME,'</label>\n                            <input data-language="ENTER_NAME" data-lang-type="placeholder" tabindex="-1" placeholder="').concat(e.ENTER_NAME,'" maxlength="50" />\n                        </div>\n                        <div class="xmmcm-form-group erm-des">\n                            <label data-language="DESCRIPTION">').concat(e.DESCRIPTION,'</label>\n                            <textarea data-language="ENTER_DESCRIPTION" data-lang-type="placeholder" style="margin-bottom: 0" placeholder="').concat(e.ENTER_DESCRIPTION,'"></textarea>\n                        </div>\n                    </div>\n                    <div class="modal-body modal-live-assistance hidden"></div>\n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-outline-primary">\n                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>\n                            <lang data-language="SAVE">').concat(e.SAVE,"</lang>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    "))),d=i("#editRoomModal"),u=d.find(".not-live-assistance"),m=d.find(".modal-live-assistance"),f=d.find(".erm-image-wrapper img"),p=d.find(".erm-userid input"),g=d.find(".erm-chatid input"),v=d.find(".erm-email input"),h=d.find(".erm-name input"),b=d.find(".erm-des textarea"),y=d.find(".btn-outline-primary"),E=d.find(".erm-image-wrapper .ermiw-file"),I=d.find(".close"),y.click(M),E.change(j),d.find('[data-toggle="tooltip"]').tooltip());var n,o,r,s=a.getRoomInfoWasEdited(),w=a.getCurrentRoomId();if(c=a.getRooms().filter((function(e){return e.id===w}))[0]||{},l=!1,f.off("error"),g.val(c.id),y.removeClass("loading-btn"),d.modal("show"),u.removeClass("hidden"),m.addClass("hidden"),c.group&&c.isLiveAssistance)return u.addClass("hidden"),m.removeClass("hidden"),m.html('<div class="--load-mess" style="display: block;"><div class="pulse"></div></div>'),void function(){var e=a.getCurrentRoomId();t.get("chats/".concat(e,"/description")).then((function(e){var n=e.guest,t=n.id,o=n.name,i=n.email,r=n.ipAddress,s=n.deviceType,c=(n.creationDate,n.browser),l=n.platform,u=n.platformVersion,f=n.userAgent,p=a.getLangJson();m.html('\n                <div class="xmmcm-form-group">\n                    <label>'.concat(p.CHAT_ID,'</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(e.id,'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="').concat(p.COPY_TO_CLIPBOARD,'"></div>\n                </div>\n                <div class="xmmcm-form-group">\n                    <label>').concat(p.GUEST_ID,'</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(t||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="').concat(p.COPY_TO_CLIPBOARD,'"></div>\n                </div>\n                <div class="xmmcm-form-group">\n                    <label>').concat(p.GUEST_NAME,'</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(o||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="').concat(p.COPY_TO_CLIPBOARD,'"></div>\n                </div>\n                <div class="xmmcm-form-group">\n                    <label>').concat(p.GUEST_EMAIL,'</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(i||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="').concat(p.COPY_TO_CLIPBOARD,'"></div>\n                </div>\n                <div class="xmmcm-form-group">\n                    <label>').concat(p.IP_ADDRESS,'</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(r||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="').concat(p.COPY_TO_CLIPBOARD,'"></div>\n                </div>\n                <div class="xmmcm-form-group">\n                    <label>').concat(p.DEVICE_TYPE,'</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(s||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="').concat(p.COPY_TO_CLIPBOARD,'"></div>\n                </div>\n                <div class="xmmcm-form-group">\n                    <label>').concat(p.BROWSER,'</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(c||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="').concat(p.COPY_TO_CLIPBOARD,'"></div>\n                </div>\n                <div class="xmmcm-form-group">\n                    <label>').concat(p.PLATFORM,'</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(l||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="').concat(p.COPY_TO_CLIPBOARD,'"></div>\n                </div>\n                <div class="xmmcm-form-group">\n                    <label>').concat(p.PLATFORM_VERSION,'</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(u||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="').concat(p.COPY_TO_CLIPBOARD,'"></div>\n                </div>\n                <div class="xmmcm-form-group">\n                    <label>').concat(p.USER_AGENT,'</label>\n                    <textarea class="input-freeze" tabindex="-1">').concat(f||"none",'</textarea>\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="').concat(p.COPY_TO_CLIPBOARD,'" style="top: 30px"></div>\n                </div>\n            ')),d.find('[data-toggle="tooltip"]').tooltip()}))}();c.group?(f.closest(".erm-image-wrapper").removeClass("input-freeze"),f.on("error",(function(){return f.attr("src","/assets/images/group.svg")})),f.attr("src",_(c.id,!0)),h.closest(".erm-name").hide(),p.closest(".erm-userid").hide(),v.closest(".erm-email").hide(),b.val((null===(n=s[c.id])||void 0===n?void 0:n.user_des)||"")):(f.closest(".erm-image-wrapper").addClass("input-freeze"),f.attr("src",_(c.partner.id)),f.on("error",(function(){return f.attr("src","/assets/images/user.jpg")})),h.closest(".erm-name").show(),p.closest(".erm-userid").show(),v.closest(".erm-email").show(),v.val(c.partner.email),p.val(c.partner.id),h.val((null===(o=s[c.partner.id])||void 0===o?void 0:o.user_name)||c.partner.name),b.val((null===(r=s[c.partner.id])||void 0===r?void 0:r.user_des)||""))}}}.apply(n,a))||(e.exports=o)},97857:(e,n,t)=>{var a,o,i=t(19755);a=[t(36788),t(61433),t(87025)],void 0===(o=function(e,n,t){var a,o,r,s,c=t.render,l=t.debounce,d=t.getAvatar,u=t.htmlEncode,m=!1,f=function(e){var t,a,o,i,r,s="",l=n.getRoomInfoWasEdited(),m=e.group?e.subject:(null===(t=l[null===(a=e.partner)||void 0===a?void 0:a.id])||void 0===t?void 0:t.user_name)||(null===(o=e.partner)||void 0===o?void 0:o.name);if(!e.id||!m||e.channel)return"";(e.group&&(s=d(e.id,!0)),e.group)||(s=d(null===(r=e.partner)||void 0===r?void 0:r.id));return i={id:e.id,group:e.group?"hagr":"",handleImageErr:"onerror=\"this.src='".concat(e.group?"/assets/images/group.svg":"/assets/images/user.jpg","'\""),src:s,name:u(m)},c('\n        <div data-fmm-room-id="{id}" data-fmm-room-name="{name}" class="fmm-room">\n            <img class="--img avatar {group}" src="{src}" {handleImageErr}>\n            <span>{name}</span>\n        </div>\n    ',i)},p=function(){return n.getRooms().map(f).join("")},g=function(t){o.click(),e.post("messages/forward",{sourceChatId:n.getCurrentRoomId(),destChatId:i(t.currentTarget).data().fmmRoomId,messageId:s}).then()},v=l((function(){var e=r.val().trim().toUpperCase();e?$rooms.each((function(){var n=i(this),t=n.data().fmmRoomName;String(t).toUpperCase().indexOf(e)>-1?n.show():n.hide()})):$rooms.show()}),300);return{onInit:function(e){var t,c,l=n.getRooms().filter((function(e){return e.id}));m||(m=!0,i(document).on("click","[data-fmm-room-id]",g),i(document).on("input","#fmm-input",v),i("body").append((t=p(),c=n.getLangJson(),'\n        <div class="modal fade" id="forwardMessageModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h5 class="modal-title" data-language="FORWARD_MESSAGE_TO_CHAT">\n                            '.concat(c.FORWARD_MESSAGE_TO_CHAT,'\n                        </h5>\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n                    <div class="modal-body">\n                        <input data-language="SEARCH_PLACEHOLDER" data-lang-type="placeholder" type="search" name="search" id="fmm-input" placeholder="').concat(c.SEARCH_PLACEHOLDER,'" />\n                        <div class="fmm-room-wrapper">\n                            ').concat(t,"\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    "))),a=i("#forwardMessageModal"),o=a.find(".close"),$rooms=i("[data-fmm-room-id]"),(r=i("#fmm-input")).attr("autocomplete","off")),l.length!==$rooms.length&&(a.find(".fmm-room-wrapper").html(p()),$rooms=i("[data-fmm-room-id]")),s=e,r.val(""),$rooms.show(),i('[data-fmm-room-id="'.concat(n.getCurrentRoomId(),'"]')).hide(),a.modal("show")}}}.apply(n,a))||(e.exports=o)},12450:(e,n,t)=>{var a,o,i=t(19755);a=[t(61433),t(36788),t(54436)],void 0===(o=function(e,n,t){var a,o,r,s,c=!1,l=function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},d=function(){var e=a.val();l(e)?(a.removeClass("error"),r.prop("disabled",!1)):(a.addClass("error"),r.prop("disabled",!0))},u=function(){var e=a.val();l(e)&&(s.click(),n.post("contacts/invite?email=".concat(e)).then((function(e){400===e.status&&t.show(e.details)})).catch((function(e){t.show(e)})))},m=function(e){13!==e.keyCode||e.shiftKey||(e.preventDefault(),u())};return{onInit:function(){var n;c||(c=!0,i("body").append((n=e.getLangJson(),'\n        <div class="modal fade" id="inviteModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <p data-language="ENTER_EMAIL_ADDRESS">\n                            '.concat(n.ENTER_EMAIL_ADDRESS,'\n                        </p>\n                        <input id="im-email-input" placeholder="user@mail.com" />\n                        <button data-language="SEND" type="button" class="btn btn-outline-primary btn-small float-right" disabled>\n                            ').concat(n.SEND,'\n                        </button>\n                        <button data-language="CANCEL" type="button" data-dismiss="modal" aria-label="Close" class="btn btn-outline-secondary btn-small float-right">\n                            ').concat(n.CANCEL,"\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    "))),o=i("#inviteModal"),a=i("#im-email-input"),r=o.find(".btn-outline-primary"),s=o.find(".btn-outline-secondary"),i(document).on("input","#im-email-input",d),a.keydown(m),r.click(u)),o.modal("show"),a.val(""),r.prop("disabled",!0),setTimeout((function(){return a.focus()}),500)}}}.apply(n,a))||(e.exports=o)},59265:(e,n,t)=>{var a,o,i=t(19755);a=[t(77759),t(61433),t(36788),t(54436)],void 0===(o=function(e,n,t,a){var o,r,s,c,l=!1,d=i(".js_caption"),u=i(".js_wrap_mess"),m=function(){c.click(),a.show(n.getLangJson().UNABLE_TO_CONNECT)},f=function(){var r=n.getCurrentRoomId();s.prop("disabled",!0),c.hide(),o.data("bs.modal")._config.backdrop="static",o.data("bs.modal")._config.keyboard=!1,t.delete("chats/".concat(r,"/leave")).then((function(t){if(400===t.status)return a.show(t.details),void c.click();var o=n.getRooms().filter((function(e){return e.id!==r}));n.setRooms(o),n.setCurrentRoomId(null),c.click(),d.show(),u.hide(),i("[".concat(e.ATTRIBUTE_SIDEBAR_ROOM,'="').concat(r,'"]')).remove()})).catch(m)};return{onInit:function(){var e,t=n.getCurrentRoomId(),a=n.getRooms().filter((function(e){return e.id===t}))[0]||{};l||(l=!0,i("body").append((e=n.getLangJson(),'\n        <div class="modal fade" id="leaveGroupModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <h2><lang data-language="LEAVING_GROUP_CHAT">'.concat(e.LEAVING_GROUP_CHAT,'</lang> "<span></span>" </h2>\n                        <p data-language="YOU_WILL_NOT_BE">\n                            ').concat(e.YOU_WILL_NOT_BE,'\n                        </p>\n                        <button type="button" class="btn btn-outline-primary btn-small float-right">\n                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>\n                            <lang data-language="LEAVE">').concat(e.LEAVE,'</lang>\n                        </button>\n                        <button data-language="CANCEL" type="button" data-dismiss="modal" aria-label="Close" class="btn btn-outline-secondary btn-small float-right">\n                            ').concat(e.CANCEL,"\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    "))),o=i("#leaveGroupModal"),r=o.find("h2 span"),s=o.find(".btn-outline-primary"),c=o.find(".btn-outline-secondary"),s.click(f)),c.show(),s.prop("disabled",!1),r.html(a.subject),o.modal("show"),o.data("bs.modal")&&(o.data("bs.modal")._config.backdrop=!0,o.data("bs.modal")._config.keyboard=!0)}}}.apply(n,a))||(e.exports=o)},53741:(e,n,t)=>{var a,o,i=t(19755);function r(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],a=!0,o=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(a=(r=s.next()).done)&&(t.push(r.value),!n||t.length!==n);a=!0);}catch(e){o=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(o)throw i}}return t}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return s(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return s(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}a=[t(5931),t(61433),t(36788),t(54436),t(87025)],void 0===(o=function(e,n,t,a,o){var s,c,l,d,u,m,f,p,g,v,h,b,y,I,E,_,w,T,O,R,C,A,x,S,M=o.getAvatar,j=0,D=0,k=0,P=!1,N="hidden",L="selfVideo",B="btn-slash",U=function(){return t.post("chats/".concat(g.id,"/call/end"))},G=function(){easyrtc.leaveRoom(p,null,null),easyrtc.setRoomOccupantListener(null),easyrtc.disconnect(),d&&!c&&U(),setTimeout((function(){easyrtc.getLocalStream().getTracks().forEach((function(e){return e.stop()})),C.addClass(N),A.removeClass("calling"),T.removeClass("btn-calling"),f=!1,d=!1,k=!1,w.off(),y.off(),T.off()}),500)},H=function(){j?(w.removeClass(B),R.get(0).srcObject.getTracks()[1].enabled=!0):(w.addClass(B),R.get(0).srcObject.getTracks()[1].enabled=!1),j=!j},Y=function(){D?(y.removeClass(B),R.get(0).srcObject.getTracks()[0].enabled=!0):(y.addClass(B),R.get(0).srcObject.getTracks()[0].enabled=!1),D=!D},z=function(e,n){if("default"!==e){var a=JSON.stringify(n).length;if(a>2&&e===p&&(c=!0,b.addClass(N)),f&&a<3&&!u&&(U(),I.click()),!f&&e===p){f=!0;var o=[],i=0,r=0;Object.keys(n).forEach((function(e){Object.prototype.hasOwnProperty.call(n,e)&&(r||(r=n[e].roomJoinTime),r>n[e].roomJoinTime&&(r=n[e].roomJoinTime),o.push(e))}));o.length>0?function e(n){easyrtc.call(o[n],(function(){(i+=1)<m.length&&n>0&&e(n-1)}),(function(){i<m.length&&n>0&&e(n-1)}))}(o.length-1):(t.post("chats/".concat(g.id,"/call/place")),d=!0,b.removeClass(N))}}},F=function(){k?I.click():(k=!k,T.addClass("btn-calling"),A.addClass("calling"),C.removeClass(N),easyrtc.joinRoom(p,"",null,null),easyrtc.setRoomOccupantListener(z),easyrtc.setAcceptChecker((function(e,n){k&&n(!0)})))},W=function(){l=!0,O.show(),O.removeClass(N),A.removeClass(N),b.addClass(N),w.click(H),y.click(Y),T.click(F)},V=function(){if(!g.group){var e="callerVideo";p=g.id,u=g.group,l=!1,C.find("video").remove(),C.append('<video autoplay="autoplay" playsinline="playsinline" id="'.concat(e,'"></video>')),C.attr("class","").addClass("video-caller"),easyrtc.initMediaSource((function(){easyrtc.dontAddCloseButtons(!0),easyrtc.easyApp("easyrtc.videoChatHd",L,[e],W)}),(function(e){a.show("Audio and Video calls not supported by browser."),console.log(e)}))}},J=function(){x.removeClass("accept-state"),V(),s=setInterval((function(){l&&(T.click(),clearInterval(s))}),100)},q=function(){S.modal("hide"),g.group||U()};return{onInit:function(t,a){if(!f){if(P||(P=!0,i("body").append('\n        <div class="modal fade" id="modalPhoneRequest" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">\n            <div class="modal-dialog modal-lg modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <button type="button" class="close" id="video_close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n\n                        <div class="video-call-notify-form">\n                            <h2>Incoming video call...</h2>\n                            <img class="vcnf-image" />\n                            <h3 class="vcnf-name">Bonnie</h3>\n                            <div class="vcnf-group clearfix">\n                                <button class="vcnf-hangup">\n                                    <i class="xm xm-phone"></i>\n                                </button>\n                                <button class="vcnf-accept">\n                                    <i class="xm xm-phone"></i>\n                                </button>\n                            </div>\n                        </div>\n\n                        <div class="video-call-modal-body">\n                            <div class="video-call-wrapper">\n                                <div class="video-caller hidden">\n                                    <div class="call-animation hidden">\n                                        <i class="xm xm-phone"></i>\n                                    </div>\n                                </div>\n                                <div class="video-self">\n                                    <video autoplay="" playsinline="playsinline" id="selfVideo" muted="" volume="0"></video>\n                                </div>\n                            </div>\n                            <div class="video-call-setting">\n                                <button id="video-mic-btn">\n                                    <span></span>\n                                    <i class="xm xm-microphone"></i>\n                                </button>\n                                <button id="video-camera-btn">\n                                    <span></span>\n                                    <i class="xm xm-video-camera"></i>\n                                </button>\n                                <button id="video-phone-btn">\n                                    <i class="xm xm-phone"></i>\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),easyrtc.setSocketUrl(e),S=i("#modalPhoneRequest"),x=S.find(".modal-dialog"),O=i(".video-call-setting"),R=i("#".concat(L)),C=i(".video-caller"),A=i(".video-self"),b=i(".call-animation"),y=i("#video-mic-btn"),w=i("#video-camera-btn"),T=i("#video-phone-btn"),I=i("#video_close"),v=i(".vcnf-image"),h=i(".vcnf-name"),_=i(".vcnf-accept"),E=i(".vcnf-hangup"),I.click(G),E.click(q),_.click(J)),t){var o,s=(null===(o=n.getRoomInfoWasEdited()[t.id])||void 0===o?void 0:o.user_name)||t.name,d=r(n.getRooms().filter((function(e){return e.id===a})),1);g=d[0],x.addClass("accept-state"),h.html(s),g.group?v.attr("src",M(g.id,!0)):v.attr("src",M(t.id)),l&&(l=!1,G())}else{var u=r(n.getRooms().filter((function(e){return e.id===n.getCurrentRoomId()})),1);g=u[0],x.removeClass("accept-state"),V()}c=!1,O.hide(),b.addClass(N),S.modal("show")}},onEndCall:function(e,n){n===g.id&&d&&k&&(c=!0,T.click()),!S.hasClass("show")||d||k||(s&&clearInterval(s),S.modal("hide"))}}}.apply(n,a))||(e.exports=o)},77914:(e,n,t)=>{var a,o,i=t(19755);function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}a=[t(77759),t(54436),t(36788),t(61433),t(87025)],void 0===(o=function(e,n,t,a,o){o.render;var c,l,d,u,m,f,p,g,v=o.getAvatar,h=o.getDataToLocalApplication,b=e.API_URL,y=e.TOKEN,I=e.ATTRIBUTE_CHANGE_NAME,E=e.ATTRIBUTE_CHANGE_IMAGE,_=h(y)||"",w=!1,T=function(){f.click(),n.show(a.getLangJson().UNABLE_TO_CONNECT)},O=function(){if(!c){var e=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){s(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},a.getInfomation());c=!0,g.addClass("loading-btn"),t.post("saveprofile",{name:"".concat(u.val()||e.name),url:"".concat(m.val())}).then((function(){u.val()&&(e.name=u.val(),i("[".concat(I,'="').concat(e.id,'"]')).html(u.val())),e.erp_url=m.val(),f.click(),a.setInfomation(e)})).catch(T)}},R=function(){var e=p.get(0).files[0],n=new FormData,t=new FileReader;e&&(t.addEventListener("load",(function(e){d.attr("src",e.target.result),i("[".concat(E,'="').concat(a.getInfomation().id,'"]')).attr("src",e.target.result)})),t.readAsDataURL(e),n.append("avatarfile",e),i.ajax({type:"POST",url:"".concat(b,"/uploadavatar"),data:n,headers:{"X-Authorization-Token":_},cache:!1,contentType:!1,processData:!1,success:function(){},error:function(){}}))};return{onInit:function(e){var n,t=a.getInfomation();w||(w=!0,i("body").append((n=a.getLangJson(),'\n        <div class="modal fade xmmc-modal" id="profileModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h5 class="modal-title" data-language="EDIT_INFORMATION">\n                            '.concat(n.EDIT_INFORMATION,'\n                        </h5>\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n                    <div class="modal-body">\n                        <label class="pmm-image-wrapper">\n                            <input class="pmmiw-file" type="file" accept="image/*" style="display: none" />\n                            <img onerror="this.src = \'/assets/images/user.jpg\'" />\n                            <div class="pmmiw-icon">\n                                <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16" height="16" viewBox="0 0 36.174 36.174" style="filter: grayscale(1) invert(1);" xml:space="preserve"><g><path d="M23.921,20.528c0,3.217-2.617,5.834-5.834,5.834s-5.833-2.617-5.833-5.834s2.616-5.834,5.833-5.834 S23.921,17.312,23.921,20.528z M36.174,12.244v16.57c0,2.209-1.791,4-4,4H4c-2.209,0-4-1.791-4-4v-16.57c0-2.209,1.791-4,4-4h4.92 V6.86c0-1.933,1.566-3.5,3.5-3.5h11.334c1.934,0,3.5,1.567,3.5,3.5v1.383h4.92C34.383,8.244,36.174,10.035,36.174,12.244z M26.921,20.528c0-4.871-3.963-8.834-8.834-8.834c-4.87,0-8.833,3.963-8.833,8.834s3.963,8.834,8.833,8.834 C22.958,29.362,26.921,25.399,26.921,20.528z"/></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>\n                            </div>\n                        </label>\n                        <div class="pmm-form-group pmm-userid">\n                            <label data-language="USER_ID">').concat(n.USER_ID,'</label>\n                            <input class="input-freeze" tabindex="-1" />\n                            <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="').concat(n.COPY_TO_CLIPBOARD,'" data-lang-type="tooltip" data-language="COPY_TO_CLIPBOARD"></div>\n                        </div>\n                        <div class="pmm-form-group pmm-email">\n                            <label data-language="Email">').concat(n.EMAIL,'</label>\n                            <input class="input-freeze" tabindex="-1" />\n                            <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="').concat(n.COPY_TO_CLIPBOARD,'" data-lang-type="tooltip" data-language="COPY_TO_CLIPBOARD"></div>\n                        </div>\n                        <div class="pmm-form-group pmm-name">\n                            <label>').concat(n.NAME,'</label>\n                            <input data-language="ENTER_NAME" data-lang-type="placeholder" placeholder="').concat(n.ENTER_NAME,'" maxlength="50" />\n                        </div>\n                        <div class="pmm-form-group pmm-erp">\n                            <label>ERP/CRM URL</label>\n                            <input style="margin-bottom: 0" placeholder="https://erp.iptp.net/erp/dispatcher" />\n                        </div>\n                    </div>\n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-outline-primary">\n                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>\n                            <lang data-language="SAVE">').concat(n.SAVE,"</lang>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    "))),l=i("#profileModal"),(d=l.find(".pmm-image-wrapper img")).attr("src",v(t.id)),l.find(".pmm-form-group.pmm-userid input").val(t.id),u=l.find(".pmm-form-group.pmm-name input"),l.find(".pmm-form-group.pmm-email input").val(t.email),m=l.find(".pmm-form-group.pmm-erp input"),g=l.find(".btn-outline-primary"),f=l.find(".close"),p=l.find(".pmm-image-wrapper .pmmiw-file"),l.find('[data-toggle="tooltip"]').tooltip(),g.click(O),p.change(R)),c=!1,g.removeClass("loading-btn"),u.val(t.name),m.val(t.erp_url),l.modal("show")}}}.apply(n,a))||(e.exports=o)},2585:(e,n,t)=>{var a,o,i=t(19755);a=[t(77759),t(61433),t(36788),t(54436)],void 0===(o=function(e,n,t,a){var o,r,s,c=!1,l=i(".js_caption"),d=i(".js_wrap_mess"),u=function(){s.click(),a.show("Unable to connect to the Internet")},m=function(){var c=n.getCurrentRoomId();r.prop("disabled",!0),s.hide(),o.data("bs.modal")._config.backdrop="static",o.data("bs.modal")._config.keyboard=!1,t.delete("chats/".concat(c)).then((function(t){if(400===t.status||403===t.status)return a.show(t.details),void s.click();var o=n.getRooms().filter((function(e){return e.id!==c}));n.setRooms(o),n.setCurrentRoomId(null),s.click(),l.show(),d.hide(),i("[".concat(e.ATTRIBUTE_SIDEBAR_ROOM,'="').concat(c,'"]')).remove()})).catch(u)};return{onInit:function(){var e;c||(c=!0,i("body").append((e=n.getLangJson(),'\n        <div class="modal fade" id="removeGroupModal" tabindex="-1" role="dialog" data-backdrop="static">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <h2 data-language="DELETE_GROUP_CHAT">\n                            '.concat(e.DELETE_GROUP_CHAT,'\n                        </h2>\n                        <p data-language="GROUP_CHAT_INCLUDING">\n                            ').concat(e.GROUP_CHAT_INCLUDING,'\n                        </p>\n                        <button type="button" class="btn btn-outline-primary btn-small float-right" disabled>\n                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>\n                            <lang data-language="REMOVE">').concat(e.REMOVE,'</lang>\n                        </button>\n                        <button data-language="CANCEL" type="button" data-dismiss="modal" aria-label="Close" class="btn btn-outline-secondary btn-small float-right">\n                            ').concat(e.CANCEL,"\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    "))),o=i("#removeGroupModal"),r=o.find(".btn-outline-primary"),s=o.find(".btn-outline-secondary"),r.click(m)),r.prop("disabled",!1),o.modal("show"),o.data("bs.modal")&&(o.data("bs.modal")._config.backdrop=!0,o.data("bs.modal")._config.keyboard=!0)}}}.apply(n,a))||(e.exports=o)},35173:(e,n,t)=>{var a,o,i=t(19755);a=[t(61433),t(36788),t(54436)],void 0===(o=function(e,n,a){var o,r,s,c,l=!1,d=function(){o.val()?(o.removeClass("error"),s.prop("disabled",!1)):(o.addClass("error"),s.prop("disabled",!0))},u=function(){var i=o.val();i&&(c.click(),n.postForm("integrateERP","url=".concat(i,"&email=").concat(e.getInfomation().email)).then((function(o){2!==o.status?n.get("chats").then((function(n){t(33814).onInit(),e.setRoomsWithAdapter(n),c.click()})):a.show(o.message)})).catch((function(e){a.show(e)})))},m=function(e){13!==e.keyCode||e.shiftKey||(e.preventDefault(),u())};return{onInit:function(){var n;l||(l=!0,i("body").append((n=e.getLangJson(),'\n        <div class="modal fade" id="sendErpModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <p data-language="ENTER_ERP_URL">\n                            '.concat(n.ENTER_ERP_URL,'\n                        </p>\n                        <input id="sem-url-input" placeholder="https://erp.iptp.net/erp/dispatcher" />\n                        <button data-language="SEND" type="button" class="btn btn-outline-primary btn-small float-right" disabled>\n                            ').concat(n.SEND,'\n                        </button>\n                        <button data-language="CANCEL" type="button" data-dismiss="modal" aria-label="Close" class="btn btn-outline-secondary btn-small float-right">\n                            ').concat(n.CANCEL,"\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    "))),r=i("#sendErpModal"),o=i("#sem-url-input"),s=r.find(".btn-outline-primary"),c=r.find(".btn-outline-secondary"),i(document).on("input","#sem-url-input",d),o.keydown(m),s.click(u));var t=e.getInfomation().erp_url||"";t?s.prop("disabled",!1):s.prop("disabled",!0),r.modal("show"),o.val(t),setTimeout((function(){return o.focus()}),500)}}}.apply(n,a))||(e.exports=o)},70441:(e,n,t)=>{var a,o=t(19755);void 0===(a=function(){var e,n,t=function(t){e.modal("show"),n.attr("src",t.target.src.replace("&small=1","&large=1")),n.removeClass("zoomout"),n.removeAttr("style")},a=function(){if(n.hasClass("zoomout"))n.removeAttr("style"),n.removeClass("zoomout");else{var e=n.get(0),t=e.clientWidth,a=e.clientHeight,o=t/a,i=0,r=0;t>a?r=(i=1.5*a)*o:i=(r=1.5*t)/o,n.css({height:"".concat(i,"px"),width:"".concat(r,"px")}),n.addClass("zoomout")}};return{onInit:function(){o("body").append('\n        <div class="modal fade" id="showImageFull" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                        <img />\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),e=o("#showImageFull"),n=e.find("img"),o(document).on("click",".--click-show-popup-up-img",t),n.click(a)}}}.call(n,t,n,e))||(e.exports=a)},88501:(e,n,t)=>{var a,o=t(19755);void 0===(a=function(){var e,n=!1;return{onInit:function(){n||(n=!0,o("body").append('\n        <div class="modal fade" id="updateVersionModal" tabindex="-1" role="dialog" data-backdrop="static">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <p>A new version of Cross Messenger is avaible</p>\n                        <button style="margin-right: 10px" type="button" class="btn btn-outline-primary btn-small float-right">\n                            Refresh\n                        </button>\n                        <button type="button" data-dismiss="modal" aria-label="Close" class="btn btn-outline-secondary btn-small float-right">\n                            Cancel\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),e=o("#updateVersionModal"),e.find(".btn-outline-primary").click((function(){return window.location.reload(!0)}))),e.modal("show")}}}.call(n,t,n,e))||(e.exports=a)},31410:(e,n,t)=>{var a,o,i=t(19755);a=[t(36788),t(61433),t(87025),t(77759)],void 0===(o=function(e,n,t,a){var o,r,s,c,l,d,u,m=t.render,f=t.setDataToLocalApplication,p=a.BODY_BG_THEME,g=a.BODY_FZ,v=a.THEMES,h=a.FONTSIZES,b=!1,y=function(e){$this=i(e.currentTarget),l.removeClass("active"),$this.addClass("active"),o=$this.data().uimwTheme},I=function(e){$this=i(e.currentTarget),d.removeClass("active"),$this.addClass("active"),r=$this.data().uimwFont},E=function(){var t=i("body");c.click(),t.removeClass(n.getBodyBgTheme()),t.addClass(o),t.css("font-size",r),n.setBodyBgTheme(o),n.setBodyFontSize(r),f(p,o),f(g,r),e.put("users/preferences",{body_bg_theme:o,body_fz:r}).then((function(){}))};return{onInit:function(){if(!b){var e=v.map((function(e){return m('<div class="uimw-theme-item" data-uimw-theme="{name}" style="background: {color}"></div>',e)})).join(""),t=h.map((function(e){return m('<div class="uimw-font-item" data-uimw-font="{size}" style="font-size: {size}">Aa</div>',{size:e})})).join("");b=!0,i("body").append(function(e,n,t){return'\n        <div class="modal fade" id="userInterfaceModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h5 class="modal-title" data-language="USER_INTERFACE">\n                            '.concat(t.USER_INTERFACE,'\n                        </h5>\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n                    <div class="modal-body">\n                        <div class="uim-wrapper">\n                            <div class="uimw-title" data-language="THEME">\n                                ').concat(t.THEME,"\n                            </div>\n                            ").concat(e,'\n                        </div>\n                        <div class="uim-wrapper">\n                            <div class="uimw-title" data-language="FONT">\n                                ').concat(t.FONT,"\n                            </div>\n                            ").concat(n,'\n                        </div>\n                        <button data-language="SAVE" type="button" class="btn btn-outline-primary float-right">\n                            ').concat(t.SAVE,"\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    ")}(e,t,n.getLangJson())),s=i("#userInterfaceModal"),c=s.find(".close"),l=i("[data-uimw-theme]"),d=i("[data-uimw-font]"),u=s.find(".btn-outline-primary"),l.click(y),d.click(I),u.click(E)}o=n.getBodyBgTheme()||v[0].name,r=n.getBodyFontSize()||h[2],l.removeClass("active"),d.removeClass("active"),i('[data-uimw-theme="'.concat(o,'"]')).addClass("active"),i('[data-uimw-font="'.concat(r,'"]')).addClass("active"),s.modal("show")}}}.apply(n,a))||(e.exports=o)},44226:(e,n,t)=>{var a,o,i=t(19755);a=[t(61433)],void 0===(o=function(e){var n,t=!1;return{onInit:function(){var a,o;t||(t=!0,i("body").append((a=e.getVersion(),o=e.getLangJson(),'\n        <div class="modal fade" id="versionModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <img src="assets/images/icon.png" alt="Cross messenger">\n                        <h2 data-language="CROSS_MESSENGER">'.concat(o.CROSS_MESSENGER,'</h2>\n                        <p>\n                            <lang data-language="WEB_VERSION">').concat(o.WEB_VERSION,'</lang>: #XM_VERSION\n                        </p>\n                        <p>\n                            <lang data-language="SERVER_VERSION">').concat(o.SERVER_VERSION,"</lang>: ").concat(a,"\n                        </p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    "))),n=i("#versionModal")),n.modal("show")}}}.apply(n,a))||(e.exports=o)},87741:(e,n,t)=>{var a,o;a=[t(61433),t(87025)],void 0===(o=function(e,n){return{onInit:function(){return Notification.requestPermission().then((function(){}))},pushNotificationForMessage:function(t){var a,o=e.getInfomation(),i=e.getRoomInfoWasEdited();window.Notification&&"granted"===Notification.permission&&!document.hasFocus()&&o.id!==t.sender.id&&!1!==(null===(a=i[t.id.chatId])||void 0===a?void 0:a.notification_mess)&&function(e){var t=n.decodeStringBase64(e.message.replace(/<[^>]+>/g,"")),a=new Notification(e.sender.name,{body:t.replace(/<[^>]+>/g,""),icon:"/assets/images/icon.png"});a.onclick=function(e){e.preventDefault(),a.close()}}(t)}}}.apply(n,a))||(e.exports=o)},18335:(e,n,t)=>{var a,o=t(19755);void 0===(a=function(){var e=o("#frame");return{onInit:function(){o(".sidebar .sidebar-collapse-btn").off().click((function(){e.hasClass("indent")?e.removeClass("indent"):e.addClass("indent")}))}}}.call(n,t,n,e))||(e.exports=a)},23230:(e,n,t)=>{var a,o,i=t(19755);a=[t(77759),t(87025),t(31410),t(12450),t(35173),t(44226),t(62582),t(30261)],void 0===(o=function(e,n,t,a,o,r,s,c){var l=e.SESSION_ID,d=e.TOKEN,u=i("#user-option"),m=i("#sidebar-options-btn"),f=i("#group-chat-options-btn"),p=i("#change-lang-btn"),g=u.find(".--start-conference"),v=u.find(".--use-interface"),h=u.find(".--send-invite"),b=u.find(".--erp-contact"),y=u.find(".--about"),I=u.find(".--logout"),E=!1,_=function(){E=!1,u.hide(),i(document).off(".hideOptionsSlide")},w=function(e){e.preventDefault(),e.stopPropagation(),E?_():(E=!0,u.show(),i(document).on("click.hideOptionsSlide",(function(e){u.is(e.target)||0!==u.has(e.target).length||_()})))},T=function(){return c.onInit()},O=function(){return s.onInit()},R=function(){t.onInit(),_()},C=function(){window.open("/meeting.html","_blank").focus()},A=function(){a.onInit(),_()},x=function(){o.onInit(),_()},S=function(){r.onInit(),_()},M=function(){n.removeDataInLocalApplication(l),n.removeDataInLocalApplication(d),window.location="login.html"};return{onInit:function(){m.off().click(w),p.off().click(T),f.off().click(O),v.off().click(R),g.off().click(C),h.off().click(A),b.off().click(x),y.off().click(S),I.off().click(M)}}}.apply(n,a))||(e.exports=o)},84040:(e,n,t)=>{var a,o,i=t(19755);a=[t(77759),t(61433),t(87025),t(77914)],void 0===(o=function(e,n,t,a){var o=t.render,r=t.getAvatar,s=t.htmlEncode,c=i("#sidebarProfile"),l='\n        <a title="Edit Profile" class="sipr-image">\n            <img '.concat(e.ATTRIBUTE_CHANGE_IMAGE,'="{id}" class="--avatar avatar p-cur" src="{src}" onerror="this.src=\'/assets/images/user.jpg\'">\n        </a>\n        <p ').concat(e.ATTRIBUTE_CHANGE_NAME,'="{id}" class="--name">{name}</p>\n    ');return{onInit:function(){var e=n.getInfomation(),t={src:r(e.id),name:s(e.name),id:e.id};c.html(o(l,t)),i(document).off(".sidebarProfile").on("click.sidebarProfile","#sidebarProfile .sipr-image",a.onInit)}}}.apply(n,a))||(e.exports=o)},33814:(e,n,t)=>{var a,o,i=t(19755);a=[t(77759),t(61433),t(87025),t(17209),t(23851),t(14445),t(96512),t(66992),t(18640)],void 0===(o=function(e,n,t,a,o,r,s,c,l){var d=t.render,u=t.getAvatar,m=t.stripTags,f=t.htmlEncode,p=t.decodeStringBase64,g=i("#sidebar_room_list"),v=i(".js_caption"),h=i(".js_wrap_mess"),b='\n        <li class="js_li_list_user contact-list__item p-cur {status} {live} {mute}" '.concat(e.ATTRIBUTE_SIDEBAR_ROOM,'="{id}" {isGroup}>\n            <img ').concat(e.ATTRIBUTE_CHANGE_IMAGE_GROUP,'="{id}" class="--img avatar {classImg}" src="{src}" {handleImageErr} />\n            <div class="badge badge-orange">{unread}</div>\n            <div class="p-pl-10 meta">\n                <div class="--name contact__name p-1-line">\n                    <i class="xm xm-volume-mute" aria-hidden="true"></i>\n                    <span ').concat(e.ATTRIBUTE_CHANGE_NAME,'="{userId}">{name}</span>\n                </div>\n                <div class="p-1-line preview">{mess}</div>\n            </div>\n        </li>\n    '),y=function(t){var d,u=0,m=i(t.currentTarget),f=m.data().roomId,p=n.getRooms().filter((function(e,n){return String(e.id)===String(f)&&(u=n,!0)}))[0]||{};if(p=JSON.parse(JSON.stringify(p)),!f)return v.show(),h.hide(),n.setCurrentRoomId(null),i("[".concat(e.ATTRIBUTE_SIDEBAR_ROOM,"]")).removeClass("active"),void l.onInit(m);m.hasClass("p_disabled")||f===n.getCurrentRoomId()||(null!==(d=p)&&void 0!==d&&d.channel?i(".messages-input-wrap").hide():i(".messages-input-wrap").show(),n.setCurrentRoomId(f),i("[".concat(e.ATTRIBUTE_SIDEBAR_ROOM,"]")).removeClass("active"),v.hide(),h.show(),m.addClass("active"),o.onClear(),c.onCloseSearchBox(),s.markPhone(p.group),r.onRenderInfomation(p),a.onLoadMessage(p,u))},I=function(e){var t,a,o,i=n.getRoomInfoWasEdited(),r=e.id,s=e.partner,c=e.unreadMessages,l=e.group,g=e.subject,v=e.sender,h=e.lastMessage,y="",I=r?"":"p_disabled",E=c||"",_=l?g:(null===(t=i[null==s?void 0:s.id])||void 0===t?void 0:t.user_name)||(null==s?void 0:s.name),w=h?f(m(p(h))):"",T=n.getCurrentRoomId()===r?"active":"",O=l?"":null==s?void 0:s.id;return l&&!_?"":(l&&(y=u(r,!0)),l||(y=u(null==s?void 0:s.id)),l||s||(y="/assets/images/user.svg"),!r&&v&&(_=null==s?void 0:s.name,w="Invite: pending",y=u(null==s?void 0:s.id)),r||v||(_=null==s?void 0:s.name,w="Invite: not accepted",y=u(null==s?void 0:s.id),I=""),o={id:r,isGroup:l?'data-is-group="true"':'data-is-group="false"',status:I,live:T,unread:E,handleImageErr:"onerror=\"this.src='".concat(l?"/assets/images/group.svg":"/assets/images/user.jpg","'\""),classImg:l?"hagr":"",src:y,name:f(_),mess:w,userId:O,mute:!1===(null===(a=i[r])||void 0===a?void 0:a.notification_mess)?"mute":""},d(b,o))};return{onInit:function(){var t=n.getRooms().map(I).join("");g.html("".concat('<a class="sidebar__toggle"><i class="xm xm-search --icon p-cur"></i></a>').concat(t)),i(document).off(".sidebarRoomList").on("click.sidebarRoomList","[".concat(e.ATTRIBUTE_SIDEBAR_ROOM,"]"),y)},onRenderRoom:I,onPrepend:function(e){return g.prepend(e)},onUpdateRoomName:function(e,n){return i('[data-room-id="'.concat(e,'"]')).find(".--name.contact__name span").text(n)}}}.apply(n,a))||(e.exports=o)},74839:(e,n,t)=>{var a,o,i=t(19755);a=[t(77759),t(61433),t(87025)],void 0===(o=function(e,n,t){var a=t.debounce,o=1,r=i("#frame"),s=i("#search"),c=s.find(".search-toggle"),l=s.find(".js-menu"),d=s.find("[data-s]"),u=s.find(".search__option"),m=s.find(".search__input"),f=s.find(".clearable__clear"),p=a((function(){var n=i("[".concat(e.ATTRIBUTE_SIDEBAR_ROOM,"]")),t=m.val().trim().toUpperCase();n.removeAttr("data-search-sidebar-hide"),t&&n.each((function(e){var a=n.eq(e),o=a.find("[data-userid-name]").html();String(o).toUpperCase().indexOf(t)>-1?a.removeAttr("data-search-sidebar-hide"):a.attr("data-search-sidebar-hide",!0)}))}),300),g=function(){l.hide(),i(document).off(".hideSearchFilter")},v=function(e){e.preventDefault(),e.stopPropagation(),l.show(),i(document).on("click.hideSearchFilter",(function(e){l.is(e.target)||0!==l.has(e.target).length||g()}))},h=function(n){var t=i("[".concat(e.ATTRIBUTE_SIDEBAR_ROOM,"]")),a=i(n.currentTarget),r=a.data().s;g(),r!==o&&(o=r,d.removeClass("active"),a.addClass("active"),t.removeAttr("data-filter-sidebar-hide"),1!==r&&t.each((function(e){var n=t.eq(e),a=n.data().isGroup;(2!==r||n.find(".badge.badge-orange").html())&&(3!==r||a)?4===r&&a&&n.attr("data-filter-sidebar-hide",!0):n.attr("data-filter-sidebar-hide",!0)})))},b=function(){window.outerWidth>767?r.removeClass("indent"):r.addClass("indent"),setTimeout((function(){return m.focus()}),100)},y=function(){i("[".concat(e.ATTRIBUTE_SIDEBAR_ROOM,"]")).removeAttr("data-search-sidebar-hide"),m.val("")};return{onInit:function(){m.val(""),d.off().click(h),u.off().click(v),f.off().click(y),c.off().click(b),i(document).off(".sidebarSearch").on("input.sidebarSearch","#search .search__input",p)}}}.apply(n,a))||(e.exports=o)},12400:(e,n,t)=>{var a,o,i=t(19755);function r(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return s(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return s(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}a=[t(77759),t(36788),t(61433),t(87025),t(33814),t(17209),t(45271),t(14445),t(87741),t(53741)],void 0===(o=function(e,n,t,a,o,s,d,u,m,f){var p,g=!1,v=!1,h=e.SESSION_ID,b=d.handleSyncData,y={timeout:1e4,onBackground:!1},I=function e(){if(p&&clearTimeout(p),document.hasFocus())return document.title="Messenger",void i("#favicon").attr("href","assets/images/favicon.ico");v?(document.title="New Message!",i("#favicon").attr("href","assets/images/favicon2.ico")):(document.title="Messenger",i("#favicon").attr("href","assets/images/favicon1.ico")),v=!v,p=setTimeout(e,1e3)},E=function(e,n){var a=t.getInfomation().id,o=t.getCurrentRoomId(),i=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},e),r=n.length-1;if(n[r].updated||n[r].deleted||(i.lastMessage=n[n.length-1].message),o!==e.id){var s=i.unreadMessages;n.forEach((function(e){e.deleted||e.updated||(a===e.sender.id?s=0:s+=1)})),i.unreadMessages=s}else i.unreadMessages=0;return i},_=function(e,n){var a=!0,o=t.getCurrentRoomId()===n;return e.forEach((function(e){b(e,n),e.deleted?o&&s.onSyncRemove(e.id.messageId):e.updated?o&&s.onSyncUpdate(e):(7!==e.type&&(a=!1),21===e.type&&function(e,n){t.getInfomation().id!==e.sender.id&&f.onInit(e.sender,n)}(e,n),24===e.type&&function(e,n){t.getInfomation().id!==e.sender.id&&f.onEndCall(e.sender,n)}(e,n),o&&s.onSync([e]))})),a},w=function(e){var a,s=t.getRooms(),c=[],l=!1,d={};e.forEach((function(e){d[e.id.chatId]=(d[e.id.chatId]||[]).concat(e)})),s=s.filter((function(n){if(d[n.id]){var t=d[n.id];l||(l=!0,n.isLiveAssistance&&7===e[e.length-1].type||m.pushNotificationForMessage(t[0]));var a=_(d[n.id],n.id);if(!a){var r=E(n,t);I(),function(e){var n=o.onRenderRoom(e);i('[data-room-id="'.concat(e.id,'"]')).remove(),o.onPrepend(n)}(r),c=c.concat(r)}return a}return!0})),l||(a=e[0],n.get("chats").then((function(e){try{for(var n=e.length,i=0;i<n;i+=1)if(e[i].id===a.id.chatId){var s=o.onRenderRoom(e[i]);t.setRooms([t.setRoomWithAdapter(e[i])].concat(r(t.getRooms()))),o.onPrepend(s),m.pushNotificationForMessage(a);break}}catch(e){console.log(e)}}))),t.setRooms(c.concat(s))},T=function e(){var o=t.getCurrentRoomId();y[h]=a.getDataToLocalApplication(h),o&&(y.chatId=o),y.onBackground=document.hidden,n.get("sync",y).then((function(n){var i;if(e(),null!=n&&null!==(i=n.messages)&&void 0!==i&&i.length){var r=a.sortBy(n.messages,"msgDate");w(r)}o===t.getCurrentRoomId()&&u.onRenderTimeActivity(null==n?void 0:n.partnerLastTimeActivity)})).catch((function(n){console.log(n),setTimeout(e,5e3)}))};return{onInit:function(){g||(g=!0,T())}}}.apply(n,a))||(e.exports=o)},54436:(e,n,t)=>{var a,o,i=t(19755);a=[t(87025)],void 0===(o=function(e){var n,t=e.render,a=!1,o='\n        <div class="alert {class}" role="alert">\n            {message}\n            <button type="button" class="close">\n                <span aria-hidden="true">&times;</span>\n            </button>\n        </div>\n    ',r=function(e){i(e.currentTarget).closest(".alert").remove()};return{show:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";a||(a=!0,i("body").append('<div id="alert-wrapper"></div>'),n=i("#alert-wrapper"),i(document).on("click","#alert-wrapper .close",r));var c={class:"alert-danger",message:e};"success"===s&&(c.class="alert-success");var l=i(t(o,c));n.prepend(l),setTimeout((function(){return l.remove()}),3500)}}}.apply(n,a))||(e.exports=o)},36788:(e,n,t)=>{var a,o;a=[t(77759),t(87025)],void 0===(o=function(e,n){var t=e.TOKEN,a=e.SESSION_ID,o=e.API_URL,i=n.getDataToLocalApplication(a)||"",r=n.getDataToLocalApplication(t)||"",s={"Content-Type":"application/x-www-form-urlencoded","X-Authorization-Token":r},c={"Content-Type":"application/json","X-Authorization-Token":r};i&&r||(window.location="login.html");var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=[];for(var t in e)e.hasOwnProperty(t)&&n.push("".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t])));return n.length?"?".concat(n.join("&")):""},d=fetch;return fetch=function(){return d.apply(this,arguments).then((function(e){if(401===e.status)return n.removeDataInLocalApplication(a),n.removeDataInLocalApplication(t),window.location="login.html",e.json().then((function(e){throw e}));var o=e.headers.get("content-type");return o&&-1!==o.indexOf("application/json")?e.json():e.text()}))},{get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("".concat(o,"/").concat(e).concat(l(n)),{method:"GET",headers:c})},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("".concat(o,"/").concat(e),{method:"POST",headers:c,body:JSON.stringify(n)})},put:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("".concat(o,"/").concat(e),{method:"PUT",headers:c,body:JSON.stringify(n)})},delete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return fetch("".concat(o,"/").concat(e),{method:"DELETE",headers:c})},postForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return fetch("".concat(o,"/").concat(e),{method:"POST",headers:s,body:n})}}}.apply(n,a))||(e.exports=o)},53924:(e,n,t)=>{var a,o;a=[t(41875)],void 0===(o=function(e){var n="chats",t="general",a=e.set,o=e.get,i={getChatById:function(e){return o(n).then((function(n){return n[e]}))},getChats:function(){return o(n).then((function(e){return e}))},setChats:function(e){return a(n,e)},setChatsById:function(e,t){return o(n).then((function(n){var a;(a=n||{})[e]=t,i.setChats(a)}))},getGeneral:function(){return o(t).then((function(e){return e}))},setGeneral:function(e){return a(t,e)}};return i}.apply(n,a))||(e.exports=o)}},n={};function t(a){if(n[a])return n[a].exports;var o=n[a]={id:a,loaded:!1,exports:{}};return e[a].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}t.m=e,t.x=e=>{},t.d=(e,n)=>{for(var a in n)t.o(n,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={826:0},n=[[76124,532,848,77,326,261],[16873,532,848,77,326,261]],a=e=>{},o=(o,i)=>{for(var r,s,[c,l,d,u]=i,m=0,f=[];m<c.length;m++)s=c[m],t.o(e,s)&&e[s]&&f.push(e[s][0]),e[s]=0;for(r in l)t.o(l,r)&&(t.m[r]=l[r]);for(d&&d(t),o&&o(i);f.length;)f.shift()();return u&&n.push.apply(n,u),a()},i=self.webpackChunkxm=self.webpackChunkxm||[];function r(){for(var a,o=0;o<n.length;o++){for(var i=n[o],r=!0,s=1;s<i.length;s++){var c=i[s];0!==e[c]&&(r=!1)}r&&(n.splice(o--,1),a=t(t.s=i[0]))}return 0===n.length&&(t.x(),t.x=e=>{}),a}i.forEach(o.bind(null,0)),i.push=o.bind(null,i.push.bind(i));var s=t.x;t.x=()=>(t.x=s||(e=>{}),(a=r)())})(),t.x()})();