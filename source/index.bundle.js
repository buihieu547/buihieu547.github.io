(()=>{var e={6873:(e,t,n)=>{var o,a,i=n(2743),r=n(9755);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}o=[n(1875),n(6788),n(1433),n(7025),n(4436),n(7759),n(2400),n(4040),n(3814),n(3230),n(4839),n(8335),n(4445),n(7209),n(3851),n(6512),n(6992),n(1296),n(441),n(8501),n(7741)],void 0===(a=function(e,t,o,a,s,l,d,u,m,p,f,v,g,h,b,y,w,I,_,C,T){n(7424),n(3824),n(9079),n(1707),n(4014),i(r);var x=a.setCookie,O=a.setDataToLocalApplication,E=a.getDataToLocalApplication,R=l.ATTRIBUE_SIDEBAR_ROOM,A=l.BODY_BG_THEME,j=l.BODY_FZ,M=l.THEMES,k=l.FONTSIZES,S=l.TOKEN,D=e.set,P=e.get,B=function(){var e=r("body"),t=E(A)||M[0].name,n=E(j)||k[2];M.forEach((function(t){return e.removeClass(t.name)})),e.addClass(t),e.css("font-size",n)},N=function(e){x(E(S),3650),o.setInfomation(c(c({},e.user),{},{email:null==e?void 0:e.email,erp_url:null==e?void 0:e.erp_url})),o.setRoomsWithAdapter(e.chats),u.onInit(),m.onInit(),v.onInit(),p.onInit(),f.onInit(),g.onInit(),h.onInit(),b.onInit(),y.onInit(),w.onInit(),I.onInit(),_.onInit(),d.onInit(),T.onInit()},U=function(e){var t=(null==e?void 0:e.body_bg_theme)||M[0].name,n=(null==e?void 0:e.body_fz)||k[2],a=(null==e?void 0:e.user_chat_info)||{};o.setRoomInfoWasEdited(a),o.setBodyBgTheme(t),o.setBodyFontSize(n),O(A,t),O(j,n),B()},z=function(){t.get("version").then((function(e){return o.setVersion(e)})),Promise.all([t.post("validate"),t.get("users/preferences")]).then((function(e){!function(e){D("general",e)}(e),U(e[1]),N(e[0])}))};setTimeout((function(){return r(".xm-page-loading").remove()}),2e3),"serviceWorker"in navigator&&(navigator.serviceWorker.addEventListener("controllerchange",(function(){C.onInit()})),navigator.serviceWorker.register("sw.js").then((function(e){setInterval((function(){e.update()}),1e5)}))),r(document).on("click",".input-only-view",(function(e){var t=r(e.currentTarget).prev();t.get(0).select(),t.get(0).setSelectionRange(0,99999),document.execCommand("copy"),s.show("Link copied to clipboard","success"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()})),window.addEventListener("offline",(function(){return o.setNetworkStatus(!1)})),window.addEventListener("online",(function(){if(o.setNetworkStatus(!0),o.getCurrentRoomId()){var e=r("[".concat(R,'="').concat(o.getCurrentRoomId(),'"]'));o.setCurrentRoomId(null),e.click()}setTimeout(z,1e3)})),B(),window.navigator.onLine||o.setNetworkStatus(!1),P("general").then((function(e){e&&e.length&&(U(e[1]),N(e[0]))})),setTimeout(z,1e3)}.apply(t,o))||(e.exports=a)},7759:(e,t,n)=>{var o,a;o=[n(3550),n(5931)],void 0===(a=function(e,t){var n={API_URL:"".concat(e,"/api"),SESSION_ID:"sessionId",TOKEN:"token",BODY_BG_THEME:"body_bg_theme",BODY_FZ:"body_fz",THEMES:[{name:"body_theme_blue",color:"#3263d5"},{name:"body_theme_green",color:"#45d866"},{name:"body_theme_black",color:"#000"},{name:"body_theme_gray",color:"#808080"}],FONTSIZES:["12px","14px","16px","18px"],ATTRIBUTE_CHANGE_NAME:"data-userid-name",ATTRIBUTE_CHANGE_IMAGE:"data-userid-image",ATTRIBUTE_CHANGE_IMAGE_GROUP:"data-roomid-image",ATTRIBUE_SIDEBAR_ROOM:"data-room-id",WEBRTC_URL:t};return Object.freeze(n)}.apply(t,o))||(e.exports=a)},3550:(e,t,n)=>{var o;void 0===(o=function(){return"".concat("https://xm.iptp.net/","xm")}.call(t,n,t,e))||(e.exports=o)},6512:(e,t,n)=>{var o,a,i=n(9755);o=[n(7759),n(1433),n(4436),n(7025),n(3741)],void 0===(a=function(e,t,n,o,a){var r=e.API_URL,s=e.TOKEN,c=o.getDataToLocalApplication(s)||"",l=i(".btn__attach"),d=i(".--input-up-file"),u=i(".--input-up-media"),m=i("#media-menu"),p=m.find(".js-up-phone"),f=i(".chatbox-progress-upload"),v=f.find("path"),g=f.find("span"),h=i(".dropzone"),b=!1,y=!1,w=0,I=function(e){var t=e;return e<0&&(t=0),e>100&&(t=100),(100-t)/100*Math.PI*18},_=function(){y=!1,m.hide(),i(document).off(".hideAttachSlide")},C=function(e){e.preventDefault(),e.stopPropagation(),y?_():(y=!0,m.show(),i(document).on("click.hideAttachSlide",(function(e){m.is(e.target)||0!==m.has(e.target).length||_()})))},T=function(e){if(e.lengthComputable){var t=e.total,n=100*e.loaded/t,o=I(n);g.html(Math.round(n)),v.attr("stroke-dashoffset",o)}},x=function(){d.get(0).value="",u.get(0).value="",f.hide(),g.html(Math.round(0)),v.attr("stroke-dashoffset",I(0))},O=function(e,n){var o=new FormData;f.show(),o.append("file",n),o.append("chat_id",t.getCurrentRoomId()),i.ajax({type:"POST",url:"".concat(r,"/").concat(e),data:o,headers:{"X-Authorization-Token":c},xhr:function(){var e=i.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",T,!1),e},cache:!1,contentType:!1,processData:!1,success:x,error:x})},E=function(e,t){if(e.size>5e8)return n.show("Maximum file size is 400MB!"),void x();/(gif|jpe?g|tiff?|png|webp|bmp)$/i.test(e.type)?O("imageupload",e):/(mp4)$/i.test(e.type)?O("videoupload",e):/audio/i.test(e.type)?O("audioupload",e):t&&/video/i.test(e.type)?n.show("Only MP4 files supported"):O("fileupload",e)},R=function(e){"fileupload"===e?O(e,d.get(0).files[0]):E(u.get(0).files[0],!0)},A=function(e){if(e.preventDefault(),e.stopPropagation(),w=0,h.hide(),e.originalEvent.dataTransfer.items&&e.originalEvent.dataTransfer.items.length){var t=e.originalEvent.dataTransfer.items[0],n=t.getAsFile();if(!t.type)return;o.confirm({des:"Are you sure you want to send this file?",onOk:function(){return E(n)}})}return!1},j=function(){a.onInit(),_()};return{onInit:function(){l.off().click(C),p.off().click(j),m.find(".menu__item").off().click(_),d.off().change((function(){return R("fileupload")})),u.off().change((function(){return R("imageupload")})),h.off().on("dragover",!1).on("drop",A),b||(b=!0,document.addEventListener("dragover",(function(e){e.preventDefault()})),document.addEventListener("dragenter",(function(e){e.preventDefault(),w+=1,h.show()}),!1),document.addEventListener("dragleave",(function(){0===(w-=1)&&h.hide()}),!1),document.addEventListener("drop",(function(e){w=0,h.hide()})),document.onpaste=function(e){var n=(event.clipboardData||event.originalEvent.clipboardData).items;for(index in n){var o=n[index];if("file"===o.kind&&t.getCurrentRoomId()){var a=o.getAsFile();E(a)}}})},markPhone:function(e){e?p.hide():p.show()}}}.apply(t,o))||(e.exports=a)},7209:(e,t,n)=>{var o,a,i=n(9755);function r(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}o=[n(1875),n(381),n(7759),n(4436),n(6788),n(1433),n(7025),n(8960),n(4445),n(2244)],void 0===(a=function(e,t,n,o,a,s,c,d,u,m){var p=n.API_URL,f=(n.ATTRIBUE_SIDEBAR_ROOM,e.set),v=e.get,g=c.render,h=c.getAvatar,b=c.convertMessagetime,y=c.humanFileSize,w=c.transformLinkTextToHTML,I=c.highlightText,_=c.htmlEncode,C=c.decodeStringBase64,T=[],x=0,O=0,E=!1,R=!1,A=!0,j=i(".scroll-to__bottom"),M=i(".messages__list"),k=i(".js_con_list_mess"),S=i(".--load-mess"),D=i(".unread-message-scroll"),P=function(){k.scrollTop()+k.height()<k[0].scrollHeight-400?j.show():A&&(O=0,D.text(0),D.hide(),j.hide()),!A&&!E&&k.scrollTop()+k.height()>k[0].scrollHeight-700&&W(),E||R||k.scrollTop()>700||Y()},B=function(){var e=k.get(0);k.scrollTop(e.scrollHeight)},N=function(){var e,t;A?k.animate({scrollTop:k[0].scrollHeight},200):(A=!0,T=s.getCurrentMessages(),x=null===(e=T[0])||void 0===e||null===(t=e.id)||void 0===t?void 0:t.messageId,messagesHtml=T.map((function(e,t,n){return H(e,t,n,!0)+F(e,search)})).join(""),M.html(messagesHtml),setTimeout((function(){R=!1}),200),k.animate({scrollTop:k[0].scrollHeight},200))},U=function(e){var t=i('[data-chat-id="'.concat(e,'"]')).offset().top,n=k.offset().top,o=k.scrollTop();k.scrollTop(t+o-(n+200))},z=function(e){var t={};switch(e.type){case 2:return t.src="".concat(p,"/image?id=").concat(e.id,"&small=1"),g(d.image,t);case 3:return t.src="".concat(p,"/audio?id=").concat(e.id),g(d.audio,t);case 4:return t.src="".concat(p,"/stream?id=").concat(e.id),g(d.video,t);default:return t.src="".concat(p,"/file?id=").concat(e.id),t.fileName=e.filename,t.fileSize=y(e.size),g(d.file,t)}},L=function(e){return e.posUnread?(e.posUnread=!1,g(d.unread,{})):""},H=function(e,n,o,a){var r=t(e.msgDate),s={},c={};if(0===n&&"up"!==a)return s.date=r.format("MMMM DD, YYYY"),s.dateCode=r.format("MMDDYYYY"),g(d.rangeDate,s);if(0===n&&"up"===a)return(c=t(T[T.length-1].msgDate)).isSame(r,"date")?"":(s.date=r.format("MMMM DD, YYYY"),s.dateCode=r.format("MMDDYYYY"),g(d.rangeDate,s));(c=t(o[n-1].msgDate),n===o.length-1&&"down"===a)&&(t(T[0].msgDate).isSame(r,"date")&&i("[data-mess-date-code='".concat(r.format("MMDDYYYY"),"']")).remove());return c.isSame(r,"date")?"":(s.date=r.format("MMMM DD, YYYY"),s.dateCode=r.format("MMDDYYYY"),g(d.rangeDate,s))},G=function(e){var t,n,o,a=s.getRoomInfoWasEdited(),i=_((null===(t=a[null==e||null===(n=e.sender)||void 0===n?void 0:n.id])||void 0===t?void 0:t.user_name)||(null==e||null===(o=e.sender)||void 0===o?void 0:o.name)),r=w(C(e.message));return e.file&&(function(e){throw new TypeError('"'+e+'" is read-only')}("message"),r=z(mess.file)),'<div class="comment-box-inline" style="margin-left: 0;">'.concat(i,": ").concat(r,"</div>")},F=function(e,t){var n=s.getInfomation(),o=s.getRoomInfoWasEdited(),a=C(e.message),i={id:e.id.messageId,chatType:e.type};try{var r;if(7===e.type)return i.who=a,g(d.leftGroup,i);if(5===e.type)return i.who=a,g(d.joinGroup,i);if(21===e.type||24===e.type)return i.mess=a,g(d.call,i);if(t&&t.offset&&t.offset===e.id.messageId&&(a=I(a,t.value)),i.src=h(e.sender.id),i.name=_((null===(r=o[e.sender.id])||void 0===r?void 0:r.user_name)||e.sender.name),i.officially_name=_(e.sender.name),i.userId=e.sender.id,i.show_internal=e.internal?"":"hidden",i.who=n.id===e.sender.id?"you":"",i.date=b(e.msgDate),i.forward=e.forwarded?"fwme":"",a.indexOf('"></c>')>-1&&-1===a.indexOf('<div class="col-xs-12 comment-box-inline" style="margin-left: 0;">')&&!a.quotedMessage)try{var c;splitMess=a.split('<c style="display:none" ob="');var l=JSON.parse(splitMess[1].replace('"></c>',""));i.comment='<div class="comment-box-inline" style="margin-left: 0;">'.concat(_((null===(c=o[null==l?void 0:l.userId])||void 0===c?void 0:c.user_name)||(null==l?void 0:l.name)),": ").concat(l.mess,"</div>"),i.mess=w(splitMess[0])}catch(e){i.mess=w(a)}else e.quotedMessage&&(i.comment=G(e.quotedMessage)),i.mess=w(a);return e.file&&(i.isFile="have-file",i.mess=z(e.file)),g(d.mess,i)}catch(t){return console.log("Bug render message"),console.log(t),console.log(e),console.log(T),""}},W=function(){var e,t,n,o,i=s.getCurrentMessages(),c=null===(e=T[T.length-1])||void 0===e||null===(t=e.id)||void 0===t?void 0:t.messageId,l=null===(n=i[i.length-1])||void 0===n||null===(o=n.id)||void 0===o?void 0:o.messageId,d={chatId:s.getCurrentRoomId(),offset:c+20};E=!0,a.get("messages",d).then((function(e){var t,n,o,a;if(c===(null===(t=T[T.length-1])||void 0===t||null===(n=t.id)||void 0===n?void 0:n.messageId)&&d.chatId===s.getCurrentRoomId()&&0===e.status){var i=e.data.messages.filter((function(e){return e.id.messageId>c})).reverse();messagesHtml=i.map((function(e,t,n){return H(e,t,n,"up")+F(e)})).join(""),T=[].concat(r(T),r(i)),k.scrollTop(k.scrollTop()-1),M.append(messagesHtml),l<=(null===(o=i[i.length-1])||void 0===o||null===(a=o.id)||void 0===a?void 0:a.messageId)&&(A=!0),setTimeout((function(){E=!1}),50)}else E=!1}))},Y=function(){var e={chatId:s.getCurrentRoomId(),offset:x};E=!0,a.get("messages",e).then((function(t){var n,o,a,i,c;if(e.offset===x&&e.chatId===s.getCurrentRoomId()&&0===t.status){var l,d=[];(null==t||null===(n=t.data)||void 0===n||null===(o=n.messages)||void 0===o?void 0:o.length)<20&&(R=!0),l=(d=d.concat((null==t||null===(a=t.data)||void 0===a?void 0:a.messages)||[]).reverse()).map((function(e,t,n){return H(e,t,n,"down")+F(e)})).join(""),T=[].concat(r(d),r(T)),x=null===(i=d[0])||void 0===i||null===(c=i.id)||void 0===c?void 0:c.messageId,k.scrollTop(k.scrollTop()+10),M.prepend(l),setTimeout((function(){E=!1}),50)}else E=!1}))},$=function(e){console.log(e),o.show("Unable to connect to the Internet"),s.setCurrentRoomId(null),i(".js_caption").show(),i(".js_wrap_mess").hide(),i("[".concat(n.ATTRIBUE_SIDEBAR_ROOM,"]")).removeClass("active")},V=function(e,t){return a.get("messages",{chatId:e.id,offset:0}).then((function(a){var c,d,m,p,g,h,b,y;if(e.id===s.getCurrentRoomId())if(0===a.status){var w,I,_,C=e.unreadMessages>0&&e.unreadMessages<16,O=null;if((null==a||null===(c=a.data)||void 0===c||null===(d=c.messages)||void 0===d?void 0:d.length)<20&&(R=!0),u.onRenderTimeActivity(null==a||null===(m=a.data)||void 0===m?void 0:m.partnerLastTimeActivity),C&&null!=a&&null!==(p=a.data)&&void 0!==p&&null!==(g=p.messages)&&void 0!==g&&g.length){var A=e.unreadMessages-1;a.data.messages[A]?(a.data.messages[A].posUnread=!0,O=a.data.messages[A].id.messageId):C=!1}T=T.concat(((null==a||null===(h=a.data)||void 0===h?void 0:h.messages)||[]).reverse()),s.setCurrentMessages(T),x=null===(b=T[0])||void 0===b||null===(y=b.id)||void 0===y?void 0:y.messageId,_=T.map((function(e,t,n){return H(e,t,n)+L(e)+F(e)})).join(""),M.html(_),S.hide(),v("chats").then((function(t){var n;(n=t||{})[e.id]=T,f("chats",n)})),C?U(O):k.scrollTop(k[0].scrollHeight),M.find(".--click-show-popup-up-img").on("load",B),setTimeout((function(){!function(e,t){var n=l({},e),o=r(s.getRooms());i('[data-room-id="'.concat(n.id,'"]')).find(".badge").html(""),n.unreadMessages=0,o[t]=l({},n),s.setRooms(o)}(e,t),E=!1}),50)}else 2===a.status&&(w=s.getCurrentRoomId(),I=s.getRooms().filter((function(e){return e.id!==w})),i(".js_caption").show(),i(".js_wrap_mess").hide(),i("[".concat(n.ATTRIBUE_SIDEBAR_ROOM,'="').concat(w,'"]')).remove(),s.setRooms(I),s.setCurrentRoomId(null),o.show("This chat room no longer exists"))})).catch($)};return{onInit:function(){D.hide(),m.onInit(),k.off("scroll").scroll(P),j.off("click").click(N),i(document).off(".btnMessageSettings").on("click.btnMessageSettings",".btn-message-settings",(function(e){return m.onShow(e)}))},onLoadMessage:function(e,t){S.show(),M.html(""),D.text(0),D.hide(),O=0,E=!0,A=!0,R=!1,T=[],s.setCurrentMessages([]),s.getNetworkStatus()?V(l({},e),t):v("chats").then((function(t){if(t&&t[e.id]){var n=t[e.id].map((function(e,t,n){return H(e,t,n)+L(e)+F(e)})).join("");M.html(n),S.hide(),i('[data-room-id="'.concat(e.id,'"]')).find(".badge").html(""),k.scrollTop(k[0].scrollHeight)}else $("")}))},onSync:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(i('[data-chat-id="'.concat(null===(e=n[0])||void 0===e||null===(t=e.id)||void 0===t?void 0:t.messageId,'"]')).length)return!1;if(k.scrollTop()+k.height()<k[0].scrollHeight-400&&s.getInfomation().id!==n[0].sender.id&&(O+=1,D.text(O),D.show()),A){var o=k.get(0),a=o.scrollHeight-o.scrollTop<=o.clientHeight,c=n.map((function(e,t){return 0===t&&T.length?H(e,1,[].concat(T[T.length-1],e))+F(e):F(e)})).join("");T=T.concat(n),M.append(c),a&&(k.scrollTop(o.scrollHeight),M.find(".--click-show-popup-up-img").on("load",B))}20===s.getCurrentMessages().length?s.setCurrentMessages([].concat(r(s.getCurrentMessages().slice(1,20)),[n[0]])):s.setCurrentMessages([].concat(r(s.getCurrentMessages()),[n[0]]))},onSyncRemove:function(e){var t=i('[data-chat-id="'.concat(e,'"]')),n=t.prev(),o=n.prev();n.hasClass("not-mess-li")&&n.remove(),o.hasClass("not-mess-li")&&o.remove(),t.remove(),s.setCurrentMessages(s.getCurrentMessages().filter((function(t){return t.id.messageId!==e})))},onSyncUpdate:function(e){var t=e.id.messageId;i('[data-chat-id="'.concat(t,'"]')).find(".--mess").html(w(C(e.message))),s.setCurrentMessages(s.getCurrentMessages().map((function(n){return n.id.messageId===t&&(n.message=e.message),n})))},onSearch:function(e,t){var n,o,a,r,c=s.getCurrentMessages(),l=null===(n=c[c.length-1])||void 0===n||null===(o=n.id)||void 0===o?void 0:o.messageId;t?i('[data-chat-id="'.concat(e.offset,'"] .--mess')).html(I(t.message,e.value)):(R=!1,T=s.getCurrentSearchMessages(),x=null===(a=T[0])||void 0===a||null===(r=a.id)||void 0===r?void 0:r.messageId,messagesHtml=T.map((function(t,n,o){return H(t,n,o,"down")+F(t,e)})).join(""),M.html(messagesHtml));A=!!i('[data-chat-id="'.concat(l,'"]')).length,U(e.offset)}}}.apply(t,o))||(e.exports=a)},8960:(e,t,n)=>{var o,a;o=[n(7759)],void 0===(a=function(e){var t={unread:'\n            <li class="not-mess-li">\n                <div class="messages__unreadLine">\n                    unread messages\n                </div>\n            </li>\n        ',call:'\n            <li class="not-mess-li call-mess" data-chat-id="{id}">\n                <div class="messages__unreadLine">\n                    {mess}\n                </div>\n            </li>\n        ',rangeDate:'\n            <li class="not-mess-li">\n                <div class="messages__time-chat" data-mess-date-code="{dateCode}">\n                    {date}\n                </div>\n             </li>\n        ',leftGroup:'\n            <li class="js_li_list_mess" data-chat-id="{id}">\n                <div class="messages__left-chat">\n                    {who} - left chat\n                </div>\n            </li>\n        ',joinGroup:'\n            <li class="js_li_list_mess" data-chat-id="{id}">\n                <div class="messages__join-chat">{who}  - joined chat\n                </div>\n            </li>\n        ',file:'<i class="xm xm-download"></i> <a href="{src}" target="_blank">{fileName}</a> {fileSize}',image:'<img class="p-cur --click-show-popup-up-img" src="{src}">',audio:'<audio controls>source src="{src}" type="audio/mpeg">Your browser does not support the audio element.</audio>',video:'<video width="400" controls><source src="{src}" type="video/mp4">Your browser does not support HTML video.</video>',mess:'\n            <li class="js_li_list_mess {who} messages__item {isFile}" data-chat-id="{id}" data-chat-type="{chatType}">\n                <div class="--content">\n                    <div class="--heading">\n                        <img '.concat(e.ATTRIBUTE_CHANGE_IMAGE,'="{userId}" class="--img avatar" src="{src}" onerror="this.src=\'/assets/images/user.jpg\'">\n                        <div class="--name" ').concat(e.ATTRIBUTE_CHANGE_NAME,'="{userId}" data-user-officially-name="{officially_name}">{name}</div>\n                        <div class="messages--internal {show_internal}">Internal</div>\n                    </div>\n                    {comment}\n                    <div class="above-of-mess {forward}">Forwarded message:</div>\n                    <div class="--mess {forward}">{mess}</div>\n                    <div class="messages__bottom">\n                        <div class="--date">{date}</div>\n                        <div class="xm xm-bars --bars --menu p-cur btn-message-settings"></div>\n                    </div>\n                </div>\n            </li>\n        ')};return Object.freeze(t)}.apply(t,o))||(e.exports=a)},3851:(e,t,n)=>{var o,a,i=n(9755);o=[n(7759),n(7025),n(6788),n(1433)],void 0===(a=function(e,t,n,o){var a=t.htmlDecode,r=(t.htmlEncode,t.stripTags),s=t.encodeStringBase64,c=t.transformLinkTextToHTML,l=(0,t.getDataToLocalApplication)(e.TOKEN)||"",d=i(".js_endter_mess"),u=i(".js_con_list_mess"),m=i(".btn__send"),p=i(".btn__attach"),f=i(".mess-comment-box"),v=f.find(".mess-fw-box"),g=f.find(".mess-fw-box-close"),h=[],b=!1,y=!1,w=0,I=function(){var e=d.get(0),t=u.get(0),n=t.scrollTop+t.clientHeight>=t.scrollHeight;setTimeout((function(){d.val().replace(/[\s\n]/g,"")?(m.show(),p.hide()):(m.hide(),p.show()),e.style.cssText="";var o=Math.min(window.outerHeight/5,e.scrollHeight);e.style.cssText="height: ".concat(o,"px"),t.style.cssText="height: calc(100% - ".concat(68+o,"px)"),n&&t.scrollTo(0,t.scrollHeight)}),0)},_=function(e){13!==e.keyCode||e.shiftKey||(e.preventDefault(),O()),I()},C=function(){return I()},T=function(){w=0,b=!1,y=!1,d.val(""),d.focus(),m.hide(),f.hide(),I()},x=function t(o){o.isDelete?n.delete("chats/".concat(o.chatId,"/messages/").concat(o.messageId)).then((function(){h.shift(),h.length&&t(h[0])})).catch((function(){return setTimeout((function(){return t(h[0])}),5e3)})):o.messageId?i.ajax({type:"PUT",url:"".concat(e.API_URL,"/chats/").concat(o.chatId,"/messages/").concat(o.messageId),data:o.params.message,headers:{"X-Authorization-Token":l},cache:!1,contentType:!1,processData:!1,success:function(){h.shift(),h.length&&t(h[0])},error:function(){return setTimeout((function(){return t(h[0])}),5e3)}}):n.post("chats/".concat(o.chatId,"/messages"),o.params).then((function(){h.shift(),h.length&&t(h[0])})).catch((function(){return setTimeout((function(){return t(h[0])}),5e3)}))},O=function(){var e,t,n=o.getRoomInfoWasEdited(),a=o.getCurrentRoomId(),i=d.val();i.replace(/[\s\n]/g,"")||b?(t={messageId:w,chatId:a,isDelete:b,params:{message:s(i),internal:!(null===(e=n[a])||void 0===e||!e.hide_mess),quotedMessageId:y.chatId}},h.length||x(t),T(),h=h.concat(t)):T()},E=function(){y=!1,f.hide()};return{onInit:function(){d.off("keydown").keydown(_),d.off("paste").bind("paste",C),m.off().click(O),g.off().click(E)},onUpdate:function(e,t){var n=a(r(t.replace(/<br>/g,"\n")));d.val(n),d.focus(),w=e,I()},onRemove:function(e,t){b=!0,w=e,O()},onComment:function(e){y={chatId:e.chatId,mess:e.mess,name:e.officiallyName,userId:e.userId},d.focus(),f.show(),v.html("<b>".concat(e.name,'</b>: <span class="span-mess-cmt span-mess-cmt-ids">').concat(e.hasFile?e.mess:c(e.mess),"</span>"))},onAddEmoji:function(e){d.val(d.val()+e),d.focus(),I()},onClear:T}}.apply(t,o))||(e.exports=a)},6992:(e,t,n)=>{var o,a,i=n(9755);o=[n(1433),n(6788),n(7025),n(7209)],void 0===(a=function(e,t,n,o){var a=n.debounce,r=i(".mess-search-box"),s=i("#msbg-input"),c=r.find(".pulse"),l=r.find(".msbp-cur"),d=r.find(".msbp-all"),u=r.find(".msbgb-up"),m=r.find(".msbgb-down"),p=r.find(".msb-close"),f=i(".btn-toggle-search-box"),v=[],g=0,h=0;f.hide();var b=function(){var e=i(".highlight-text").closest(".--mess");e.text(e.text()),l.text(0),d.text(0),c.hide(),g=0,h=0,v=[]},y=function(){r.addClass("open"),s.focus()},w=function(){r.removeClass("open"),s.val(""),b()},I=function(n,a,r,l){l===s.val()&&Promise.all([t.get("messages",{chatId:n,offset:a.id.messageId}),t.get("messages",{chatId:n,offset:a.id.messageId+20})]).then((function(t){if(l===s.val()&&r===g){c.hide();var n=i(".highlight-text").closest(".--mess");n.text(n.text());var d=t[0].data.messages.reverse(),u=t[1].data.messages.filter((function(e){return e.id.messageId>=a.id.messageId})).reverse();e.setCurrentSearchMessages(d.concat(u)),o.onSearch({value:l,offset:a.id.messageId})}}))},_=a((function(){if(i('[data-chat-id="'.concat(v[g].id.messageId,'"]')).length){var t=i(".highlight-text").closest(".--mess");t.text(t.text()),o.onSearch({value:s.val(),offset:v[g].id.messageId},v[g])}else c.show(),I(e.getCurrentRoomId(),v[g],g,s.val())}),500),C=function(){0!==h&&1!==h&&(g+1===h?g=0:g+=1,l.text(g+1),_())},T=function(){0!==h&&1!==h&&(g-1==-1?g=h-1:g-=1,l.text(g+1),_())},x=a((function(){var n=s.val(),a=e.getCurrentRoomId();b(),n.length<3||(c.show(),t.get("messages",{chatId:a,search:n}).then((function(e){n===s.val()&&(e.data.messages.length?(v=e.data.messages,h=e.data.messages.length,l.text(g+1),d.text(e.data.messages.length),i('[data-chat-id="'.concat(v[0].id.messageId,'"]')).length?(c.hide(),o.onSearch({value:s.val(),offset:v[0].id.messageId},v[0])):I(a,v[0],g,s.val())):c.hide())})))}),1e3);return{onInit:function(){f.off().click(y),p.off().click(w),u.off().click(C),m.off().click(T),s.off().bind("paste",x),s.attr("autocomplete","off"),i(document).off(".chatbotSearch").on("input.chatbotSearch","#msbg-input",x)},onCloseSearchBox:w}}.apply(t,o))||(e.exports=a)},4445:(e,t,n)=>{var o,a,i=n(9755);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}o=[n(381),n(7759),n(1433),n(6788),n(7025),n(2582),n(6908),n(2585),n(9265)],void 0===(a=function(e,t,n,o,a,r,c,l,d){var u=a.getAvatar,m=i(".js-group-option"),p=i("#chatbox-group-option"),f=p.find(".--edit-group"),v=p.find(".--internal"),g=v.find("span"),h=p.find(".--disabled"),b=h.find("span"),y=p.find(".--leave"),w=p.find(".--remove"),I=i(".js_info_parnter .toolbar-name .--name"),_=i(".js_info_parnter .--img.avatar"),C=i(".js_info_parnter .toolbar-name .--online"),T=function(){p.hide(),i(document).off(".hideChatboxTopBarOptionsSlice")},x=function(e){e.preventDefault(),e.stopPropagation(),p.show(),i(document).on("click.hideChatboxTopBarOptionsSlice",(function(e){p.is(e.target)||0!==p.has(e.target).length||T()}))},O=function(){r.onInit(n.getCurrentRoomId()),T()},E=function(){d.onInit(),T()},R=function(){l.onInit(),T()},A=function(){var e=n.getCurrentRoomId(),t=s({},n.getRoomInfoWasEdited());t[e]=t[e]||{},t[e].hide_mess?(g.html("Enable"),delete t[e].hide_mess):(g.html("Disable"),t[e].hide_mess=!0),n.setRoomInfoWasEdited(t),T(),o.put("users/preferences",{user_chat_info:t}).then((function(){}))},j=function(){var e=n.getCurrentRoomId(),a=i("[".concat(t.ATTRIBUE_SIDEBAR_ROOM,'="').concat(e,'"]')),r=s({},n.getRoomInfoWasEdited());r[e]=r[e]||{},!1===r[e].notification_mess?(a.removeClass("mute"),b.html("Disable"),delete r[e].notification_mess):(a.addClass("mute"),b.html("Enable"),r[e].notification_mess=!1),n.setRoomInfoWasEdited(r),T(),o.put("users/preferences",{user_chat_info:r}).then((function(){}))};return{onInit:function(){m.off().click(x),f.off().click(O),y.off().click(E),w.off().click(R),h.off().click(j),v.off().click(A),_.off().click(c.onInit)},onRenderInfomation:function(e){var o,a,i=n.getRoomInfoWasEdited();if(_.off("error"),C.html(""),!1===(null===(o=i[e.id])||void 0===o?void 0:o.notification_mess)?b.html("Enable"):b.html("Disable"),null!==(a=i[e.id])&&void 0!==a&&a.hide_mess?g.html("Disable"):g.html("Enable"),e.group)_.attr(t.ATTRIBUTE_CHANGE_IMAGE_GROUP,e.id),_.attr("src",u(e.id,!0)),_.on("error",(function(){return _.attr("src","/assets/images/group.svg")})),I.text(e.subject),I.removeAttr(t.ATTRIBUTE_CHANGE_NAME),f.show(),v.show(),y.show(),w.show(),C.hide();else{var r,s,c=e.partner.id,l=(null===(r=n.getRoomInfoWasEdited()[c])||void 0===r?void 0:r.user_name)||e.partner.name;_.removeAttr(t.ATTRIBUTE_CHANGE_IMAGE_GROUP),_.attr("src",u(null===(s=e.partner)||void 0===s?void 0:s.id)),_.on("error",(function(){return _.attr("src","/assets/images/user.jpg")})),I.text(l),I.attr(t.ATTRIBUTE_CHANGE_NAME,c),f.hide(),v.hide(),y.hide(),w.hide(),C.show()}},onRenderTimeActivity:function(t){t&&(e().diff(e(t),"seconds")<=30?C.html("online"):C.html("last seen ".concat(e(t).fromNow())))},onUpdateTitle:function(e){I.text(e)}}}.apply(t,o))||(e.exports=a)},1296:(e,t,n)=>{var o,a,i=n(9755);o=[n(3851)],void 0===(a=function(e){var t=["😄","😃","😀","😊","😉","😍","😘","😚","😗","😙","😜","😝","😛","😳","😁","😔","😌","😒","😞","😣","😢","😂","😭","😪","😥","😰","😅","😓","😩","😫","😨","😱","😠","😡","😤","😖","😆","😋","😷","😎","😴","😵","😲","😟","😦","😧","😈","👿","😮","😬","😐","😕","😯","😶","😇","😏","😑"],n=["👲","👳","👮","👷","💂","👶","👦","👧","👨","👩","👴","👵","👱","👼","👸","😺","😸","😻","😽","😼","🙀","😿","😹","😾","👹","👺","🙈","🙉","🙊","💀","👽","💩","🔥","✨","🌟","💫","💥","💢","💦","💧","💤","💨","👂","👀","👃","👅","👄","👍","👎","👌","👊","✊","✌️","👋","✋","👐","👆","👇","👉","👈","🙌","🙏","☝️","👏","💪","🚶","🏃","💃","👫","👪","👬","👭","💏","💑","👯","🙆","🙅","💁","🙋","💆","💇","💅","👰","🙎","🙍","🙇","🎩","👑","👒","👟","👞","👡","👠","👢","👕","👔","👚","👗","🎽","👖","👘","👙","💼","👜","👝","👛","👓","🎀","🌂","💄","💛","💙","💜","💚","❤️","💔","💗","💓","💕","💖","💞","💘","💌","💋","💍","💎","👤","👥","💬","👣","💭","🐶","🐺","🐱","🐭","🐹","🐰","🐸","🐯","🐨","🐻","🐷","🐽","🐮","🐗","🐵","🐒","🐴","🐑","🐘","🐼","🐧","🐦","🐤","🐥","🐣","🐔","🐍","🐢","🐛","🐝","🐜","🐞","🐌","🐙","🐚","🐠","🐟","🐬","🐳","🐋","🐄","🐏","🐀","🐃","🐅","🐇","🐉","🐎","🐐","🐓","🐕","🐖","🐁","🐂","🐲","🐡","🐊","🐫","🐪","🐆","🐈","🐩","🐾","💐","🌸","🌷","🍀","🌹","🌻","🌺","🍁","🍃","🍂","🌿","🌾","🍄","🌵","🌴","🌲","🌳","🌰","🌱","🌼","🌐","🌞","🌝","🌚","🌑","🌒","🌓","🌔","🌕","🌖","🌗","🌘","🌜","🌛","🌙","🌍","🌎","🌏","🌋","🌌","🌠","⭐","☀️","⛅","☁️","⚡","☔","❄️","⛄","🌀","🌁","🌈","🌊","🎍","💝","🎎","🎒","🎓","🎏","🎆","🎇","🎐","🎑","🎃","👻","🎅","🎄","🎁","🎋","🎉","🎊","🎈","🎌","🔮","🎥","📷","📹","📼","💿","📀","💽","💾","💻","📱","☎️","📞","📟","📠","📡","📺","📻","🔊","🔉","🔈","🔇","🔔","🔕","📢","📣","⏳","⌛","⏰","⌚","🔓","🔒","🔏","🔐","🔑","🔎","💡","🔦","🔆","🔅","🔌","🔋","🔍","🛁","🛀","🚿","🚽","🔧","🔩","🔨","🚪","🚬","💣","🔫","🔪","💊","💉","💰","💴","💵","💷","💶","💳","💸","📲","📧","📥","📤","✉️","📩","📨","📯","📫","📪","📬","📭","📮","📦","📝","📄","📃","📑","📊","📈","📉","📜","📋","📅","📆","📇","📁","📂","✂️","📌","📎","✒️","✏️","📏","📐","📕","📗","📘","📙","📓","📔","📒","📚","📖","🔖","📛","🔬","🔭","📰","🎨","🎬","🎤","🎧","🎼","🎵","🎶","🎹","🎻","🎺","🎷","🎸","👾","🎮","🃏","🎴","🀄","🎲","🎯","🏈","🏀","⚽","⚾️","🎾","🎱","🏉","🎳","⛳","🚵","🚴","🏁","🏇","🏆","🎿","🏂","🏊","🏄","🎣","☕","🍵","🍶","🍼","🍺","🍻","🍸","🍹","🍷","🍴","🍕","🍔","🍟","🍗","🍖","🍝","🍛","🍤","🍱","🍣","🍥","🍙","🍘","🍚","🍜","🍲","🍢","🍡","🍳","🍞","🍩","🍮","🍦","🍨","🍧","🎂","🍰","🍪","🍫","🍬","🍭","🍯","🍎","🍏","🍊","🍋","🍒","🍇","🍉","🍓","🍑","🍈","🍌","🍐","🍍","🍠","🍆","🍅","🌽","🏠","🏡","🏫","🏢","🏣","🏥","🏦","🏪","🏩","🏨","💒","⛪","🏬","🏤","🌇","🌆","🏯","🏰","⛺","🏭","🗼","🗾","🗻","🌄","🌅","🌃","🗽","🌉","🎠","🎡","⛲","🎢","🚢","⛵","🚤","🚣","⚓","🚀","✈️","💺","🚁","🚂","🚊","🚉","🚞","🚆","🚄","🚅","🚈","🚇","🚝","🚋","🚃","🚎","🚌","🚍","🚙","🚘","🚗","🚕","🚖","🚛","🚚","🚨","🚓","🚔","🚒","🚑","🚐","🚲","🚡","🚟","🚠","🚜","💈","🚏","🎫","🚦","🚥","⚠️","🚧","🔰","⛽","🏮","🎰","♨️","🗿","🎪","🎭","📍","🚩"],o=["1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣","0️⃣","🔟","🔢","#️⃣","🔣","⬆️","⬇️","⬅️","➡️","🔠","🔡","🔤","↗️","↖️","↘️","↙️","↔️","↕️","🔄","◀️","▶️","🔼","🔽","↩️","↪️","ℹ️","⏪","⏩","⏫","⏬","⤵️","⤴️","🆗","🔀","🔁","🔂","🆕","🆙","🆒","🆓","🆖","📶","🎦","🈁","🈯","🈳","🈵","🈴","🈲","🉐","🈹","🈺","🈶","🈚","🚻","🚹","🚺","🚼","🚾","🚰","🚮","🅿️","♿","🚭","🈷️","🈸","🈂️","Ⓜ️","🛂","🛄","🛅","🛃","🉑","㊙️","㊗️","🆑","🆘","🆔","🚫","🔞","📵","🚯","🚱","🚳","🚷","🚸","⛔","✳️","❇️","❎","✅","✴️","💟","🆚","📳","📴","🅰️","🅱️","🆎","🅾️","💠","➿","♻️","♈","♉","♊","♋","♌","♍","♎","♏","♐","♑","♒","♓","⛎","🔯","🏧","💹","💲","💱","©️","®️","™️","❌","‼️","⁉️","❗","❓","❕","❔","⭕","🔝","🔚","🔙","🔛","🔜","🔃","🕛","🕧","🕐","🕜","🕑","🕝","🕒","🕞","🕓","🕟","🕔","🕠","🕕","🕖","🕗","🕘","🕙","🕚","🕡","🕢","🕣","🕤","🕥","🕦","✖️","➕","➖","➗","♠️","♥️","♣️","♦️","💮","💯","✔️","☑️","🔘","🔗","➰","〰️","〽️","🔱","◼️","◻️","◾","◽","▪️","▫️","🔺","🔲","🔳","⚫","⚪","🔴","🔵","🔻","⬜","⬛","🔶","🔷","🔸","🔹"],a=!1,r=i(".wrap-emojis"),s=i(".btn__emoji"),c=i("[data-em-tab-btn]"),l=i('[data-em-tab-content="--tab-1"]'),d=i('[data-em-tab-content="--tab-2"]'),u=i('[data-em-tab-content="--tab-3"]'),m=function(e){return'<button data-em-btn="'.concat(e,'" class="btn-em">').concat(e,"</button>")},p=function(e){var t=i(e.currentTarget),n=t.data().emTabBtn;c.removeClass("active"),t.addClass("active"),i("[data-em-tab-content]").removeClass("active"),i('[data-em-tab-content="'.concat(n,'"]')).addClass("active")},f=function(){a=!1,r.hide(),i(document).off(".hideEmojiWrapper")},v=function(e){e.preventDefault(),e.stopPropagation(),a?f():(a=!0,r.show(),i(document).on("click.hideEmojiWrapper",(function(e){r.is(e.target)||0!==r.has(e.target).length||f()})))},g=function(t){var n=i(t.currentTarget).data().emBtn;e.onAddEmoji(n)};return{onInit:function(){l.html(t.map(m).join("")),d.html(n.map(m).join("")),u.html(o.map(m).join("")),c.off().click(p),s.off().click(v),i(document).off(".emoji").on("click.emoji","[data-em-btn]",g)}}}.apply(t,o))||(e.exports=a)},2244:(e,t,n)=>{var o,a,i=n(9755);o=[n(7025),n(3851),n(7857)],void 0===(a=function(e,t,n){var o,a=!1,r=i(".js_con_list_mess"),s=i(".js-menu-messages"),c=i(".js-menu-messages-cmt"),l=i(".js-menu-messages-forward"),d=i(".js-menu-messages-edit"),u=i(".js-menu-messages-remove"),m=function(){var n=o.data().chatId,a=o.find(".--name"),i=a.html(),r=o.find(".--mess").html(),s=a.data(),c=s.useridName,l=s.userOfficiallyName,d=e.stripTags(r),u=0;o.hasClass("have-file")&&(u=1,d=r),g(),t.onComment({chatId:n,userId:c,mess:d,name:i,hasFile:u,officiallyName:l})},p=function(){var e=o.data().chatId;g(),n.onInit(e)},f=function(){var e=o.data().chatId,n=o.find(".--mess").html();g(),t.onUpdate(e,n)},v=function(){var e=o.data().chatId,n=o.find(".--mess").html();g(),o.remove(),t.onRemove(e,n)},g=function(){a=!1,s.hide(),i(document).off(".hideMessageSettings")};return{onInit:function(){c.off().click(m),l.off().click(p),d.off().click(f),u.off().click(v)},onShow:function(e){if(e.preventDefault(),e.stopPropagation(),a)g();else{var t=i(e.currentTarget);o=t.closest(".js_li_list_mess"),a=!0,n=o.hasClass("you"),c=o.hasClass("have-file"),n?(d.show(),u.show()):(d.hide(),u.hide()),c&&d.hide(),function(e){i(window).width();var t=i(window).height(),n=s.height(),o=e.offset(),a=o.left-(r.offset().left+132),c=o.top+20;n+c+100>t&&(c=o.top-n-20),s.css({display:"block",top:"".concat(c,"px"),left:"".concat(a,"px")})}(t),i(document).on("click.hideMessageSettings",(function(e){s.is(e.target)||0!==s.has(e.target).length||g()}))}var n,c}}}.apply(t,o))||(e.exports=a)},8640:(e,t,n)=>{var o,a,i=n(9755);o=[n(7759),n(1433),n(6788),n(7025)],void 0===(a=function(e,t,o,a){var r,s,c,l=a.render,d=function(){if(!s){var e=i("#acceptInvitationModal"),a=e.find(".btn-outline-primary"),c=e.find(".btn-outline-secondary");c.hide(),a.prop("disabled",!0),s=!0,o.post("contacts/".concat(r,"/accept")).then((function(){o.get("chats").then((function(e){n(3814).onInit(),t.setRoomsWithAdapter(e),c.click()})).catch((function(e){console.log(e),s=!1,a.prop("disabled",!1)}))})).catch((function(){s=!1,a.prop("disabled",!1)}))}};return{onInit:function(t){c||(c=!0,i(document).on("click","#acceptInvitationModal .btn-outline-primary",d)),r=t.find("[".concat(e.ATTRIBUTE_CHANGE_NAME,"]")).data().userId;var n=t.find(".avatar").prop("src"),o=n.indexOf("users");r=n.substring(o+6,o+18),i("#acceptInvitationModal").remove&&i("#acceptInvitationModal").remove(),i("body").append(l('\n        <div class="modal fade" id="acceptInvitationModal" tabindex="-1" role="dialog" data-backdrop="static">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <h2>Invite confirmation</h2>\n                        <p>Do you accept invitation from {name}</p>\n                        <button type="button" class="btn btn-outline-primary btn-small float-right">\n                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>\n                            Accept\n                        </button>\n                        <button type="button" data-dismiss="modal" aria-label="Close" class="btn btn-outline-secondary btn-small float-right">Cancel</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    ',{name:t.find(".contact__name span").text()})),i("#acceptInvitationModal").modal("show")}}}.apply(t,o))||(e.exports=a)},2582:(e,t,n)=>{var o,a,i=n(9755);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}o=[n(7759),n(6379),n(6788),n(1433),n(7025),n(4436)],void 0===(a=function(e,t,o,a,r,c){var d,u,m,p,f,v,g,h,b,y,w,I=r.render,_=r.debounce,C=r.getAvatar,T=r.htmlDecode,x=r.htmlEncode,O=[],E=!1,R=null,A='\n        <div data-mcg-id="{id}" data-mcg-name="{name}" class="crm-room">\n            <img class="--img avatar" src="{src}">\n            <span '.concat(e.ATTRIBUTE_CHANGE_NAME,'="{id}">{currentName}</span>\n            <div class="styled-checkbox"></div>\n        </div>\n    '),j="\n        <div ".concat(e.ATTRIBUTE_CHANGE_NAME,'="{id}" data-mcgs-id="{id}" class="crm-room {admin}">\n            <img class="--img avatar" src="{src}">\n            <span ').concat(e.ATTRIBUTE_CHANGE_NAME,'="{id}">{currentName}</span>\n            <div class="crmr-group-icon">\n                <div class="crmrgi-icon crmrgii-admin" data-toggle="tooltip" data-placement="left" title="Granting administrator permissions">\n                    ').concat(t.ADMIN,'\n                </div>\n                <div class="crmrgi-icon crmrgii-removeadmin" data-toggle="tooltip" data-placement="left" title="Removing administrator permissions">\n                    ').concat(t.REMOVE_ADMIN,'\n                </div>\n                <div class="crmrgi-icon crmrgii-cross" data-toggle="tooltip" data-placement="left" title="Remove this member">\n                    ').concat(t.CROSS,"\n                </div>\n            </div>\n        </div>\n    "),M=function(e){var t,n,o=null==e||null===(t=e.partner)||void 0===t?void 0:t.name,a=(null==e||null===(n=e.partner)||void 0===n?void 0:n.id)||"";return!(!e.id||!o||e.channel||e.group||!a)},k=function(e){var t,n,o,i,r=a.getRoomInfoWasEdited(),s=null==e||null===(t=e.partner)||void 0===t?void 0:t.name,c=(null==e||null===(n=e.partner)||void 0===n?void 0:n.id)||"",l=(null===(o=r[null==e||null===(i=e.partner)||void 0===i?void 0:i.id])||void 0===o?void 0:o.user_name)||s;return{id:c,src:C(c),name:x(s),currentName:x(l)}},S=function(){var e=u.find(".crm-room"),t=b.val().trim().toUpperCase();t?e.each((function(n){var o=e.eq(n),a=o.find("span").text();String(a).toUpperCase().indexOf(t)>-1?o.css("display",""):o.hide()})):e.css("display","")},D=_(S,300),P=function(e){var t=i(e.currentTarget),n=t.data(),o=n.mcgId,r=n.mcgName;if(t.attr("data-mcgi-selected"))O=O.filter((function(e){return e.id!==o})),i('[data-mcgs-id="'.concat(o,'"]')).remove(),t.removeAttr("data-mcgi-selected");else{var s=a.getRoomInfoWasEdited()[o],c=null!=s&&s.user_name?x(s.user_name):r;O=O.concat({id:o,currentName:c,src:C(o),data:{id:o,name:T(r),alias:null,selected:!0}}).sort((function(e,t){return e.currentName.localeCompare(t.currentName)})),t.attr("data-mcgi-selected",o),f.html(O.map((function(e){return I(j,e)}))),u.find('[data-toggle="tooltip"]').tooltip(),b.val()&&S()}w.text(O.length)},B=function(e){var t=i(e.target).closest(".crm-room"),n=t.data().mcgsId;O=O.filter((function(e){return e.id!==n})),i('[data-mcg-id="'.concat(n,'"]')).removeAttr("data-mcgi-selected"),w.text(O.length),i(".tooltip.show").remove(),t.remove()},N=function(e){var t=i(e.target).closest(".crm-room"),n=t.data().mcgsId;O=O.map((function(e){var o=s({},e);return e.id===n&&(t.addClass("admin"),o.admin="admin",o.data.admin=!0),o}))},U=function(e){var t=i(e.target).closest(".crm-room"),n=t.data().mcgsId;O=O.map((function(e){var o=s({},e);return e.id===n&&(t.removeClass("admin"),delete o.admin,delete o.data.admin),o}))},z=function(){g.click(),c.show("Unable to connect to the Internet")},L=function(){if((y.val()?O.length||(c.show("Please select at least one member."),0):(c.show("Please enter group name."),0))&&!d){var e=n(3814),t=n(4445);h.addClass("loading-btn"),d=!0;var i={members:O.map((function(e){return e.data})),id:R,subject:y.val()};if(R){var r=a.getCurrentRoomId();o.put("chats",i).then((function(n){n&&(t.onUpdateTitle(i.subject),e.onUpdateRoomName(r,i.subject),a.setRooms(a.getRooms().map((function(e){var t=s({},e);return r===e.id&&(t.subject=i.subject),t}))),g.click())})).catch(z)}else o.post("chats",i).then((function(t){if(t){var n=e.onRenderRoom(t);a.setRooms([a.setRoomWithAdapter(t)].concat(l(a.getRooms()))),e.onPrepend(n),g.click()}})).catch(z)}},H=function(){var e,t,n,o;i("body").append((o=l(a.getRooms().filter(M)).map(k),e={html:o.sort((function(e,t){return e.currentName.localeCompare(t.currentName)})).map((function(e){return I(A,e)})).join(""),numMembers:o.length},t=e.html,n=e.numMembers,'\n        <div class="modal fade" id="createGroupModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h5 class="modal-title">\n                            New group chat\n                        </h5>\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n                    <div class="modal-body">\n                        <div class="crm-loading">\n                            <div class="pulse"></div>\n                        </div>\n                        <input type="text" name="name" id="cgm-input-name" placeholder="Enter Group Name..." maxlength="50" />\n                        <div class="crm-frame-wrapper">\n                            <div class="crmfwu">\n                                <div class="crmfwu-search-box">\n                                    <i class="xm xm-search"></i>\n                                    <input type="search" name="search" id="cgm-input-search" placeholder="Search..." />\n                                    <span class="crmfwusb-title">Group members: <span class="crmfwusbt-num">'.concat(n,'</span> member(s)</span>\n                                </div>\n                                <div class="crmfwus crmfwu-default-user">\n                                    ').concat(t,'\n                                </div>\n                            </div>\n                            <div class="crmfwu">\n                                <h2 class="crmfwu-title">\n                                    Selected: <span class="crmfwut-num">0</span> member(s)\n                                </h2>\n                                <div class="crmfwus crmfwu-selected-user"></div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-outline-primary">\n                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>\n                            Save\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '))),u=i("#createGroupModal"),m=u.find(".modal-title"),h=u.find(".btn-outline-primary"),g=u.find(".close"),f=u.find(".crmfwu-selected-user"),v=u.find(".crmfwu-default-user"),p=u.find(".crm-loading"),w=u.find(".crmfwut-num"),b=i("#cgm-input-search"),y=i("#cgm-input-name"),b.attr("autocomplete","off"),y.attr("autocomplete","off"),u.on("click","[data-mcg-id]",P),u.on("click",".crmrgii-cross",B),u.on("click",".crmrgii-admin",N),u.on("click",".crmrgii-removeadmin",U),u.on("input","#cgm-input-search",D),h.click(L)};return{onInit:function(e){E||(E=!0,H()),u.find("[data-mcg-id]").css("display","").removeAttr("data-mcgi-selected"),d=!1,R=null,O=[],m.html("New group chat"),w.text(O.length),p.hide(),b.val(""),y.val(""),f.html(""),h.removeClass("loading-btn"),u.modal("show"),setTimeout((function(){return v.scrollTop(0)}),200),setTimeout((function(){return y.focus()}),500),e&&(m.html("Edit group chat"),function(e){p.show(),o.get("chats/".concat(e)).then((function(t){if(t.members){var n=a.getRooms().filter((function(t){return t.id===e}))[0];if(R=e,p.hide(),!n)return void g.click();y.val(n.subject),w.text(t.members.length),t.members.forEach((function(e){var t=a.getRoomInfoWasEdited()[e.user.id],n=null!=t&&t.user_name?t.user_name:e.user.name,o={id:e.user.id,currentName:x(n),src:C(e.user.id),data:{id:e.user.id,name:e.user.name,alias:null,selected:!0}};e.admin&&(o.admin="admin",o.data.admin=!0),i('[data-mcg-id="'.concat(e.user.id,'"]')).attr("data-mcgi-selected",e.user.id),O=O.concat(o)})),O.sort((function(e,t){return e.currentName.localeCompare(t.currentName)})),f.html(O.map((function(e){return I(j,e)}))),u.find('[data-toggle="tooltip"]').tooltip()}}))}(e))}}}.apply(t,o))||(e.exports=a)},6908:(e,t,n)=>{var o,a,i=n(9755);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}o=[n(7759),n(4436),n(6788),n(1433),n(7025)],void 0===(a=function(e,t,n,o,a){a.render;var c,l,d,u,m,p,f,v,g,h,b,y,w,I,_=a.getAvatar,C=a.getDataToLocalApplication,T=e.API_URL,x=e.TOKEN,O=e.ATTRIBUTE_CHANGE_NAME,E=e.ATTRIBUTE_CHANGE_IMAGE_GROUP,R=C(x)||"",A=!1,j=function(e){console.log(e),w.click(),t.show("Unable to connect to the Internet")},M=function(){if(!l){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o.getRoomInfoWasEdited());l=!0,y.addClass("loading-btn"),c.group?(e[c.id]=e[c.id]||{},e[c.id].user_des=b.val()):(e[c.partner.id]=e[c.partner.id]||{},e[c.partner.id].user_des=b.val(),e[c.partner.id].user_name=h.val()),n.put("users/preferences",{user_chat_info:e}).then((function(){if(w.click(),o.setRoomInfoWasEdited(e),!c.group){var t=h.val()||c.partner.name;i("[".concat(O,'="').concat(c.partner.id,'"]')).text(t)}})).catch(j)}},k=function(){var e=I.get(0).files[0],t=new FormData,n=new FileReader;e&&(n.addEventListener("load",(function(e){p.attr("src",e.target.result),i("[".concat(E,'="').concat(o.getCurrentRoomId(),'"]')).attr("src",e.target.result)})),n.readAsDataURL(e),t.append("avatarfile",e),t.append("id",o.getCurrentRoomId()),i.ajax({type:"POST",url:"".concat(T,"/uploadgroupavatar"),data:t,headers:{"X-Authorization-Token":R},cache:!1,contentType:!1,processData:!1,success:function(){},error:function(){}}))};return{onInit:function(){A||(A=!0,i("body").append('\n        <div class="modal fade xmmc-modal" id="editRoomModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h5 class="modal-title">\n                            Edit Room\n                        </h5>\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n                    <div class="modal-body not-live-assistance">\n                        <label class="erm-image-wrapper input-freeze">\n                            <input class="ermiw-file" type="file" accept="image/*" style="display: none" />\n                            <img />\n                            <div class="ermiw-icon">\n                                <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16" height="16" viewBox="0 0 36.174 36.174" style="filter: grayscale(1) invert(1);" xml:space="preserve"><g><path d="M23.921,20.528c0,3.217-2.617,5.834-5.834,5.834s-5.833-2.617-5.833-5.834s2.616-5.834,5.833-5.834 S23.921,17.312,23.921,20.528z M36.174,12.244v16.57c0,2.209-1.791,4-4,4H4c-2.209,0-4-1.791-4-4v-16.57c0-2.209,1.791-4,4-4h4.92 V6.86c0-1.933,1.566-3.5,3.5-3.5h11.334c1.934,0,3.5,1.567,3.5,3.5v1.383h4.92C34.383,8.244,36.174,10.035,36.174,12.244z M26.921,20.528c0-4.871-3.963-8.834-8.834-8.834c-4.87,0-8.833,3.963-8.833,8.834s3.963,8.834,8.833,8.834 C22.958,29.362,26.921,25.399,26.921,20.528z"/></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>\n                            </div>\n                        </label>\n                        <div class="xmmcm-form-group erm-userid">\n                            <label>User Id</label>\n                            <input class="input-freeze" tabindex="-1" />\n                            <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                        </div>\n                        <div class="xmmcm-form-group erm-chatid">\n                            <label>Chat Id</label>\n                            <input class="input-freeze" tabindex="-1" />\n                            <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                        </div>\n                        <div class="xmmcm-form-group erm-email">\n                            <label>Email</label>\n                            <input class="input-freeze" tabindex="-1" />\n                            <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                        </div>\n                        <div class="xmmcm-form-group erm-name">\n                            <label>Name</label>\n                            <input tabindex="-1" placeholder="Enter name" maxlength="50" />\n                        </div>\n                        <div class="xmmcm-form-group erm-des">\n                            <label>Description</label>\n                            <textarea style="margin-bottom: 0" placeholder="Enter description"></textarea>\n                        </div>\n                    </div>\n                    <div class="modal-body modal-live-assistance hidden"></div>\n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-outline-primary">\n                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>\n                            Save\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),d=i("#editRoomModal"),u=d.find(".not-live-assistance"),m=d.find(".modal-live-assistance"),p=d.find(".erm-image-wrapper img"),f=d.find(".erm-userid input"),v=d.find(".erm-chatid input"),g=d.find(".erm-email input"),h=d.find(".erm-name input"),b=d.find(".erm-des textarea"),y=d.find(".btn-outline-primary"),I=d.find(".erm-image-wrapper .ermiw-file"),w=d.find(".close"),y.click(M),I.change(k),d.find('[data-toggle="tooltip"]').tooltip());var e,t,a,r=o.getRoomInfoWasEdited(),s=o.getCurrentRoomId();if(c=o.getRooms().filter((function(e){return e.id===s}))[0]||{},l=!1,p.off("error"),v.val(c.id),y.removeClass("loading-btn"),d.modal("show"),u.removeClass("hidden"),m.addClass("hidden"),c.group&&c.isLiveAssistance)return u.addClass("hidden"),m.removeClass("hidden"),m.html('<div class="--load-mess" style="display: block;"><div class="pulse"></div></div>'),void function(){var e=o.getCurrentRoomId();n.get("chats/".concat(e,"/description")).then((function(e){var t=e.guest,n=t.id,o=t.name,a=t.email,i=t.ipAddress,r=t.deviceType,s=(t.creationDate,t.browser),c=t.platform,l=t.platformVersion,u=t.userAgent;m.html('\n                <div class="xmmcm-form-group">\n                    <label>Chat Id</label>\n                    <input class="input-freeze" tabindex="-1" value="'.concat(e.id,'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                </div>\n                <div class="xmmcm-form-group">\n                    <label>Guest Id</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(n||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                </div>\n                <div class="xmmcm-form-group">\n                    <label>Guest Name</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(o||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                </div>\n                <div class="xmmcm-form-group">\n                    <label>Guest Email</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(a||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                </div>\n                <div class="xmmcm-form-group">\n                    <label>IP Address</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(i||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                </div>\n                <div class="xmmcm-form-group">\n                    <label>Device Type</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(r||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                </div>\n                <div class="xmmcm-form-group">\n                    <label>Browser</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(s||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                </div>\n                <div class="xmmcm-form-group">\n                    <label>Platform</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(c||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                </div>\n                <div class="xmmcm-form-group">\n                    <label>Platform Version</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(l||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                </div>\n                <div class="xmmcm-form-group">\n                    <label>User Agent</label>\n                    <textarea class="input-freeze" tabindex="-1">').concat(u||"none",'</textarea>\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard" style="top: 30px"></div>\n                </div>\n            ')),d.find('[data-toggle="tooltip"]').tooltip()}))}();c.group?(p.closest(".erm-image-wrapper").removeClass("input-freeze"),p.on("error",(function(){return p.attr("src","/assets/images/group.svg")})),p.attr("src",_(c.id,!0)),h.closest(".erm-name").hide(),f.closest(".erm-userid").hide(),g.closest(".erm-email").hide(),b.val((null===(e=r[c.id])||void 0===e?void 0:e.user_des)||"")):(p.closest(".erm-image-wrapper").addClass("input-freeze"),p.attr("src",_(c.partner.id)),p.on("error",(function(){return p.attr("src","/assets/images/user.jpg")})),h.closest(".erm-name").show(),f.closest(".erm-userid").show(),g.closest(".erm-email").show(),g.val(c.partner.email),f.val(c.partner.id),h.val((null===(t=r[c.partner.id])||void 0===t?void 0:t.user_name)||c.partner.name),b.val((null===(a=r[c.partner.id])||void 0===a?void 0:a.user_des)||""))}}}.apply(t,o))||(e.exports=a)},7857:(e,t,n)=>{var o,a,i=n(9755);o=[n(6788),n(1433),n(7025)],void 0===(a=function(e,t,n){var o,a,r,s,c=n.render,l=n.debounce,d=n.getAvatar,u=n.htmlEncode,m=!1,p=function(e){var n,o,a,i,r,s="",l=t.getRoomInfoWasEdited(),m=e.group?e.subject:(null===(n=l[null===(o=e.partner)||void 0===o?void 0:o.id])||void 0===n?void 0:n.user_name)||(null===(a=e.partner)||void 0===a?void 0:a.name);if(!e.id||!m||e.channel)return"";(e.group&&(s=d(e.id,!0)),e.group)||(s=d(null===(r=e.partner)||void 0===r?void 0:r.id));return i={id:e.id,group:e.group?"hagr":"",handleImageErr:"onerror=\"this.src='".concat(e.group?"/assets/images/group.svg":"/assets/images/user.jpg","'\""),src:s,name:u(m)},c('\n        <div data-fmm-room-id="{id}" data-fmm-room-name="{name}" class="fmm-room">\n            <img class="--img avatar {group}" src="{src}" {handleImageErr}>\n            <span>{name}</span>\n        </div>\n    ',i)},f=function(){return t.getRooms().map(p).join("")},v=function(n){a.click(),e.post("messages/forward",{sourceChatId:t.getCurrentRoomId(),destChatId:i(n.currentTarget).data().fmmRoomId,messageId:s}).then()},g=l((function(){var e=r.val().trim().toUpperCase();e?$rooms.each((function(){var t=i(this),n=t.data().fmmRoomName;String(n).toUpperCase().indexOf(e)>-1?t.show():t.hide()})):$rooms.show()}),300);return{onInit:function(e){var n,c=t.getRooms().filter((function(e){return e.id}));m||(m=!0,i(document).on("click","[data-fmm-room-id]",v),i(document).on("input","#fmm-input",g),i("body").append((n=f(),'\n        <div class="modal fade" id="forwardMessageModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h5 class="modal-title">\n                            Forward message to chat...\n                        </h5>\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n                    <div class="modal-body">\n                        <input type="search" name="search" id="fmm-input" placeholder="Search..." />\n                        <div class="fmm-room-wrapper">\n                            '.concat(n,"\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    "))),o=i("#forwardMessageModal"),a=o.find(".close"),$rooms=i("[data-fmm-room-id]"),(r=i("#fmm-input")).attr("autocomplete","off")),c.length!==$rooms.length&&(o.find(".fmm-room-wrapper").html(f()),$rooms=i("[data-fmm-room-id]")),s=e,r.val(""),$rooms.show(),i('[data-fmm-room-id="'.concat(t.getCurrentRoomId(),'"]')).hide(),o.modal("show")}}}.apply(t,o))||(e.exports=a)},2450:(e,t,n)=>{var o,a,i=n(9755);o=[n(1433),n(6788),n(4436)],void 0===(a=function(e,t,n){var o,a,r,s,c=!1,l=function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},d=function(){var e=o.val();l(e)?(o.removeClass("error"),r.prop("disabled",!1)):(o.addClass("error"),r.prop("disabled",!0))},u=function(){var e=o.val();l(e)&&(s.click(),t.post("contacts/invite?email=".concat(e)).then((function(e){400===e.status&&n.show(e.details)})).catch((function(e){n.show(e)})))},m=function(e){13!==e.keyCode||e.shiftKey||(e.preventDefault(),u())};return{onInit:function(){c||(c=!0,i("body").append('\n        <div class="modal fade" id="inviteModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <p>Enter email address to send invitation</p>\n                        <input id="im-email-input" placeholder="user@mail.com" />\n                        <button type="button" class="btn btn-outline-primary btn-small float-right" disabled>Send</button>\n                        <button type="button" data-dismiss="modal" aria-label="Close" class="btn btn-outline-secondary btn-small float-right">Cancel</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),a=i("#inviteModal"),o=i("#im-email-input"),r=a.find(".btn-outline-primary"),s=a.find(".btn-outline-secondary"),i(document).on("input","#im-email-input",d),o.keydown(m),r.click(u)),a.modal("show"),o.val(""),r.prop("disabled",!0),setTimeout((function(){return o.focus()}),500)}}}.apply(t,o))||(e.exports=a)},9265:(e,t,n)=>{var o,a,i=n(9755);o=[n(7759),n(1433),n(6788),n(4436)],void 0===(a=function(e,t,n,o){var a,r,s,c,l=!1,d=i(".js_caption"),u=i(".js_wrap_mess"),m=function(){c.click(),o.show("Unable to connect to the Internet")},p=function(){var r=t.getCurrentRoomId();s.prop("disabled",!0),c.hide(),a.data("bs.modal")._config.backdrop="static",a.data("bs.modal")._config.keyboard=!1,n.delete("chats/".concat(r,"/leave")).then((function(n){if(400===n.status)return o.show(n.details),void c.click();var a=t.getRooms().filter((function(e){return e.id!==r}));t.setRooms(a),t.setCurrentRoomId(null),c.click(),d.show(),u.hide(),i("[".concat(e.ATTRIBUE_SIDEBAR_ROOM,'="').concat(r,'"]')).remove()})).catch(m)};return{onInit:function(){var e=t.getCurrentRoomId(),n=t.getRooms().filter((function(t){return t.id===e}))[0]||{};l||(l=!0,i("body").append('\n        <div class="modal fade" id="leaveGroupModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <h2>Leaving group chat "<span></span>" </h2>\n                        <p>You will not be able to see this group anymore. Are you sure you want to proceed?</p>\n                        <button type="button" class="btn btn-outline-primary btn-small float-right">\n                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>\n                            Leave\n                        </button>\n                        <button type="button" data-dismiss="modal" aria-label="Close" class="btn btn-outline-secondary btn-small float-right">Cancel</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),a=i("#leaveGroupModal"),r=a.find("h2 span"),s=a.find(".btn-outline-primary"),c=a.find(".btn-outline-secondary"),s.click(p)),c.show(),s.prop("disabled",!1),r.html(n.subject),a.modal("show"),a.data("bs.modal")&&(a.data("bs.modal")._config.backdrop=!0,a.data("bs.modal")._config.keyboard=!0)}}}.apply(t,o))||(e.exports=a)},3741:(e,t,n)=>{var o,a,i=n(9755);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],o=!0,a=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}o=[n(5931),n(1433),n(6788),n(4436),n(7025)],void 0===(a=function(e,t,n,o,a){var s,c,l,d,u,m,p,f,v,g,h,b,y,w,I,_,C,T,x,O,E,R,A,j,M=a.getAvatar,k=0,S=0,D=0,P=!1,B="hidden",N="selfVideo",U="btn-slash",z=function(){return n.post("chats/".concat(v.id,"/call/end"))},L=function(){easyrtc.leaveRoom(f,null,null),easyrtc.setRoomOccupantListener(null),easyrtc.disconnect(),d&&!c&&z(),setTimeout((function(){easyrtc.getLocalStream().getTracks().forEach((function(e){return e.stop()})),E.addClass(B),R.removeClass("calling"),T.removeClass("btn-calling"),p=!1,d=!1,D=!1,C.off(),y.off(),T.off()}),500)},H=function(){k?(C.removeClass(U),O.get(0).srcObject.getTracks()[1].enabled=!0):(C.addClass(U),O.get(0).srcObject.getTracks()[1].enabled=!1),k=!k},G=function(){S?(y.removeClass(U),O.get(0).srcObject.getTracks()[0].enabled=!0):(y.addClass(U),O.get(0).srcObject.getTracks()[0].enabled=!1),S=!S},F=function(e,t){if("default"!==e){var o=JSON.stringify(t).length;if(o>2&&e===f&&(c=!0,b.addClass(B)),p&&o<3&&!u&&(z(),w.click()),!p&&e===f){p=!0;var a=[],i=0,r=0;Object.keys(t).forEach((function(e){Object.prototype.hasOwnProperty.call(t,e)&&(r||(r=t[e].roomJoinTime),r>t[e].roomJoinTime&&(r=t[e].roomJoinTime),a.push(e))}));a.length>0?function e(t){easyrtc.call(a[t],(function(){(i+=1)<m.length&&t>0&&e(t-1)}),(function(){i<m.length&&t>0&&e(t-1)}))}(a.length-1):(n.post("chats/".concat(v.id,"/call/place")),d=!0,b.removeClass(B))}}},W=function(){D?w.click():(D=!D,T.addClass("btn-calling"),R.addClass("calling"),E.removeClass(B),easyrtc.joinRoom(f,"",null,null),easyrtc.setRoomOccupantListener(F),easyrtc.setAcceptChecker((function(e,t){D&&t(!0)})))},Y=function(){l=!0,x.show(),x.removeClass(B),R.removeClass(B),b.addClass(B),C.click(H),y.click(G),T.click(W)},$=function(){if(!v.group){var e="callerVideo";switch(f=v.id,u=v.group,m=[e],l=!1,E.find("video").remove(),E.append('<video autoplay="autoplay" playsinline="playsinline" id="'.concat(e,'"></video>')),m.length){case 1:E.attr("class","").addClass("video-caller");break;case 2:E.addClass("total-num-2");break;default:E.addClass("total-num-3")}easyrtc.initMediaSource((function(){easyrtc.dontAddCloseButtons(!0),easyrtc.easyApp("easyrtc.videoChatHd",N,m,Y)}),(function(e){o.show("Browser does not support calls or you have locked mic and camera"),console.log(e)}))}},V=function(){A.removeClass("accept-state"),$(),s=setInterval((function(){l&&(T.click(),clearInterval(s))}),100)},Z=function(){j.modal("hide"),v.group||z()};return{onInit:function(n,o){if(!p){if(P||(P=!0,i("body").append('\n        <div class="modal fade" id="modalPhoneRequest" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">\n            <div class="modal-dialog modal-lg modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <button type="button" class="close" id="video_close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n\n                        <div class="video-call-notify-form">\n                            <h2>Incoming video call...</h2>\n                            <img class="vcnf-image" />\n                            <h3 class="vcnf-name">Bonnie</h3>\n                            <div class="vcnf-group clearfix">\n                                <button class="vcnf-hangup">\n                                    <i class="xm xm-phone"></i>\n                                </button>\n                                <button class="vcnf-accept">\n                                    <i class="xm xm-phone"></i>\n                                </button>\n                            </div>\n                        </div>\n\n                        <div class="video-call-modal-body">\n                            <div class="video-call-wrapper">\n                                <div class="video-caller hidden">\n                                    <div class="call-animation hidden">\n                                        <i class="xm xm-phone"></i>\n                                    </div>\n                                </div>\n                                <div class="video-self">\n                                    <video autoplay="" playsinline="playsinline" id="selfVideo" muted="" volume="0"></video>\n                                </div>\n                            </div>\n                            <div class="video-call-setting">\n                                <button id="video-mic-btn">\n                                    <span></span>\n                                    <i class="xm xm-microphone"></i>\n                                </button>\n                                <button id="video-camera-btn">\n                                    <span></span>\n                                    <i class="xm xm-video-camera"></i>\n                                </button>\n                                <button id="video-phone-btn">\n                                    <i class="xm xm-phone"></i>\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),easyrtc.setSocketUrl(e),j=i("#modalPhoneRequest"),A=j.find(".modal-dialog"),x=i(".video-call-setting"),O=i("#".concat(N)),E=i(".video-caller"),R=i(".video-self"),b=i(".call-animation"),y=i("#video-mic-btn"),C=i("#video-camera-btn"),T=i("#video-phone-btn"),w=i("#video_close"),g=i(".vcnf-image"),h=i(".vcnf-name"),_=i(".vcnf-accept"),I=i(".vcnf-hangup"),w.click(L),I.click(Z),_.click(V)),n){var a,s=(null===(a=t.getRoomInfoWasEdited()[n.id])||void 0===a?void 0:a.user_name)||n.name,d=r(t.getRooms().filter((function(e){return e.id===o})),1);v=d[0],A.addClass("accept-state"),h.html(s),v.group?g.attr("src",M(v.id,!0)):g.attr("src",M(n.id)),l&&(l=!1,L())}else{var u=r(t.getRooms().filter((function(e){return e.id===t.getCurrentRoomId()})),1);v=u[0],A.removeClass("accept-state"),$()}c=!1,x.hide(),b.addClass(B),j.modal("show")}},onEndCall:function(e,t){t===v.id&&d&&D&&(c=!0,T.click()),!j.hasClass("show")||d||D||(s&&clearInterval(s),j.modal("hide"))}}}.apply(t,o))||(e.exports=a)},7914:(e,t,n)=>{var o,a,i=n(9755);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}o=[n(7759),n(4436),n(6788),n(1433),n(7025)],void 0===(a=function(e,t,n,o,a){a.render;var c,l,d,u,m,p,f,v,g=a.getAvatar,h=a.getDataToLocalApplication,b=e.API_URL,y=e.TOKEN,w=e.ATTRIBUTE_CHANGE_NAME,I=e.ATTRIBUTE_CHANGE_IMAGE,_=h(y)||"",C=!1,T=function(){p.click(),t.show("Unable to connect to the Internet")},x=function(){if(!c){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o.getInfomation());c=!0,v.addClass("loading-btn"),n.post("saveprofile",{name:"".concat(u.val()||e.name),url:"".concat(m.val())}).then((function(){u.val()&&(e.name=u.val(),i("[".concat(w,'="').concat(e.id,'"]')).html(u.val())),e.erp_url=m.val(),p.click(),o.setInfomation(e)})).catch(T)}},O=function(){var e=f.get(0).files[0],t=new FormData,n=new FileReader;e&&(n.addEventListener("load",(function(e){d.attr("src",e.target.result),i("[".concat(I,'="').concat(o.getInfomation().id,'"]')).attr("src",e.target.result)})),n.readAsDataURL(e),t.append("avatarfile",e),i.ajax({type:"POST",url:"".concat(b,"/uploadavatar"),data:t,headers:{"X-Authorization-Token":_},cache:!1,contentType:!1,processData:!1,success:function(){},error:function(){}}))};return{onInit:function(e){var t=o.getInfomation();C||(C=!0,i("body").append('\n        <div class="modal fade xmmc-modal" id="profileModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h5 class="modal-title">\n                            Edit Infomation\n                        </h5>\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n                    <div class="modal-body">\n                        <label class="pmm-image-wrapper">\n                            <input class="pmmiw-file" type="file" accept="image/*" style="display: none" />\n                            <img onerror="this.src = \'/assets/images/user.jpg\'" />\n                            <div class="pmmiw-icon">\n                                <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16" height="16" viewBox="0 0 36.174 36.174" style="filter: grayscale(1) invert(1);" xml:space="preserve"><g><path d="M23.921,20.528c0,3.217-2.617,5.834-5.834,5.834s-5.833-2.617-5.833-5.834s2.616-5.834,5.833-5.834 S23.921,17.312,23.921,20.528z M36.174,12.244v16.57c0,2.209-1.791,4-4,4H4c-2.209,0-4-1.791-4-4v-16.57c0-2.209,1.791-4,4-4h4.92 V6.86c0-1.933,1.566-3.5,3.5-3.5h11.334c1.934,0,3.5,1.567,3.5,3.5v1.383h4.92C34.383,8.244,36.174,10.035,36.174,12.244z M26.921,20.528c0-4.871-3.963-8.834-8.834-8.834c-4.87,0-8.833,3.963-8.833,8.834s3.963,8.834,8.833,8.834 C22.958,29.362,26.921,25.399,26.921,20.528z"/></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>\n                            </div>\n                        </label>\n                        <div class="pmm-form-group pmm-userid">\n                            <label>User Id</label>\n                            <input class="input-freeze" tabindex="-1" />\n                            <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                        </div>\n                        <div class="pmm-form-group pmm-email">\n                            <label>Email</label>\n                            <input class="input-freeze" tabindex="-1" />\n                            <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                        </div>\n                        <div class="pmm-form-group pmm-name">\n                            <label>Name</label>\n                            <input placeholder="Enter name" maxlength="50" />\n                        </div>\n                        <div class="pmm-form-group pmm-erp">\n                            <label>ERP/CRM URL</label>\n                            <input style="margin-bottom: 0" placeholder="https://erp.iptp.net/erp/dispatcher" />\n                        </div>\n                    </div>\n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-outline-primary">\n                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>\n                            Save\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),l=i("#profileModal"),(d=l.find(".pmm-image-wrapper img")).attr("src",g(t.id)),l.find(".pmm-form-group.pmm-userid input").val(t.id),u=l.find(".pmm-form-group.pmm-name input"),l.find(".pmm-form-group.pmm-email input").val(t.email),m=l.find(".pmm-form-group.pmm-erp input"),v=l.find(".btn-outline-primary"),p=l.find(".close"),f=l.find(".pmm-image-wrapper .pmmiw-file"),l.find('[data-toggle="tooltip"]').tooltip(),v.click(x),f.change(O)),c=!1,v.removeClass("loading-btn"),u.val(t.name),m.val(t.erp_url),l.modal("show")}}}.apply(t,o))||(e.exports=a)},2585:(e,t,n)=>{var o,a,i=n(9755);o=[n(7759),n(1433),n(6788),n(4436)],void 0===(a=function(e,t,n,o){var a,r,s,c=!1,l=i(".js_caption"),d=i(".js_wrap_mess"),u=function(){s.click(),o.show("Unable to connect to the Internet")},m=function(){var c=t.getCurrentRoomId();r.prop("disabled",!0),s.hide(),a.data("bs.modal")._config.backdrop="static",a.data("bs.modal")._config.keyboard=!1,n.delete("chats/".concat(c)).then((function(n){if(400===n.status||403===n.status)return o.show(n.details),void s.click();var a=t.getRooms().filter((function(e){return e.id!==c}));t.setRooms(a),t.setCurrentRoomId(null),s.click(),l.show(),d.hide(),i("[".concat(e.ATTRIBUE_SIDEBAR_ROOM,'="').concat(c,'"]')).remove()})).catch(u)};return{onInit:function(){c||(c=!0,i("body").append('\n        <div class="modal fade" id="removeGroupModal" tabindex="-1" role="dialog" data-backdrop="static">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <h2>Delete Group Chat</h2>\n                        <p>Group Chat including history will be deleted, are you sure?</p>\n                        <button type="button" class="btn btn-outline-primary btn-small float-right" disabled>\n                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>\n                            Remove\n                        </button>\n                        <button type="button" data-dismiss="modal" aria-label="Close" class="btn btn-outline-secondary btn-small float-right">Cancel</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),a=i("#removeGroupModal"),r=a.find(".btn-outline-primary"),s=a.find(".btn-outline-secondary"),r.click(m)),r.prop("disabled",!1),a.modal("show"),a.data("bs.modal")&&(a.data("bs.modal")._config.backdrop=!0,a.data("bs.modal")._config.keyboard=!0)}}}.apply(t,o))||(e.exports=a)},5173:(e,t,n)=>{var o,a,i=n(9755);o=[n(1433),n(6788),n(4436)],void 0===(a=function(e,t,o){var a,r,s,c,l=!1,d=function(){a.val()?(a.removeClass("error"),s.prop("disabled",!1)):(a.addClass("error"),s.prop("disabled",!0))},u=function(){var i=a.val();i&&(c.click(),t.postForm("integrateERP","url=".concat(i,"&email=").concat(e.getInfomation().email)).then((function(a){2!==a.status?t.get("chats").then((function(t){n(3814).onInit(),e.setRoomsWithAdapter(t),c.click()})):o.show(a.message)})).catch((function(e){o.show(e)})))},m=function(e){13!==e.keyCode||e.shiftKey||(e.preventDefault(),u())};return{onInit:function(){l||(l=!0,i("body").append('\n        <div class="modal fade" id="sendErpModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <p>Enter ERP URL to load contacts</p>\n                        <input id="sem-url-input" placeholder="https://erp.iptp.net/erp/dispatcher" />\n                        <button type="button" class="btn btn-outline-primary btn-small float-right" disabled>Send</button>\n                        <button type="button" data-dismiss="modal" aria-label="Close" class="btn btn-outline-secondary btn-small float-right">Cancel</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),r=i("#sendErpModal"),a=i("#sem-url-input"),s=r.find(".btn-outline-primary"),c=r.find(".btn-outline-secondary"),i(document).on("input","#sem-url-input",d),a.keydown(m),s.click(u));var t=e.getInfomation().erp_url||"";t?s.prop("disabled",!1):s.prop("disabled",!0),r.modal("show"),a.val(t),setTimeout((function(){return a.focus()}),500)}}}.apply(t,o))||(e.exports=a)},441:(e,t,n)=>{var o,a=n(9755);void 0===(o=function(){var e,t,n=function(n){e.modal("show"),t.attr("src",n.target.src.replace("&small=1","&large=1")),t.removeClass("zoomout"),t.removeAttr("style")},o=function(){if(t.hasClass("zoomout"))t.removeAttr("style"),t.removeClass("zoomout");else{var e=t.get(0),n=e.clientWidth,o=e.clientHeight,a=n/o,i=0,r=0;n>o?r=(i=1.5*o)*a:i=(r=1.5*n)/a,t.css({height:"".concat(i,"px"),width:"".concat(r,"px")}),t.addClass("zoomout")}};return{onInit:function(){a("body").append('\n        <div class="modal fade" id="showImageFull" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                        <img />\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),e=a("#showImageFull"),t=e.find("img"),a(document).on("click",".--click-show-popup-up-img",n),t.click(o)}}}.call(t,n,t,e))||(e.exports=o)},8501:(e,t,n)=>{var o,a=n(9755);void 0===(o=function(){var e,t=!1;return{onInit:function(){t||(t=!0,a("body").append('\n        <div class="modal fade" id="updateVersionModal" tabindex="-1" role="dialog" data-backdrop="static">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <p>A new version of Cross Messenger is avaible</p>\n                        <button type="button" class="btn btn-outline-primary btn-small float-right">\n                            Refresh\n                        </button>\n                        <button type="button" data-dismiss="modal" aria-label="Close" class="btn btn-outline-secondary btn-small float-right">\n                            Cancel\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),e=a("#updateVersionModal"),e.find(".btn-outline-primary").click((function(){return window.location.reload(!0)}))),e.modal("show")}}}.call(t,n,t,e))||(e.exports=o)},1410:(e,t,n)=>{var o,a,i=n(9755);o=[n(6788),n(1433),n(7025),n(7759)],void 0===(a=function(e,t,n,o){var a,r,s,c,l,d,u,m=n.render,p=n.setDataToLocalApplication,f=o.BODY_BG_THEME,v=o.BODY_FZ,g=o.THEMES,h=o.FONTSIZES,b=!1,y=function(e){$this=i(e.currentTarget),l.removeClass("active"),$this.addClass("active"),a=$this.data().uimwTheme},w=function(e){$this=i(e.currentTarget),d.removeClass("active"),$this.addClass("active"),r=$this.data().uimwFont},I=function(){var n=i("body");c.click(),n.removeClass(t.getBodyBgTheme()),n.addClass(a),n.css("font-size",r),t.setBodyBgTheme(a),t.setBodyFontSize(r),p(f,a),p(v,r),e.put("users/preferences",{body_bg_theme:a,body_fz:r}).then((function(){}))};return{onInit:function(){if(!b){var e=g.map((function(e){return m('<div class="uimw-theme-item" data-uimw-theme="{name}" style="background: {color}"></div>',e)})).join(""),n=h.map((function(e){return m('<div class="uimw-font-item" data-uimw-font="{size}" style="font-size: {size}">Aa</div>',{size:e})})).join("");b=!0,i("body").append(function(e,t){return'\n        <div class="modal fade" id="userInterfaceModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h5 class="modal-title">\n                            User Interface\n                        </h5>\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n                    <div class="modal-body">\n                        <div class="uim-wrapper">\n                            <div class="uimw-title">\n                                Theme\n                            </div>\n                            '.concat(e,'\n                        </div>\n                        <div class="uim-wrapper">\n                            <div class="uimw-title">\n                                Font\n                            </div>\n                            ').concat(t,'\n                        </div>\n                        <button type="button" class="btn btn-outline-primary float-right">\n                            Save\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    ')}(e,n)),s=i("#userInterfaceModal"),c=s.find(".close"),l=i("[data-uimw-theme]"),d=i("[data-uimw-font]"),u=s.find(".btn-outline-primary"),l.click(y),d.click(w),u.click(I)}a=t.getBodyBgTheme()||g[0].name,r=t.getBodyFontSize()||h[2],l.removeClass("active"),d.removeClass("active"),i('[data-uimw-theme="'.concat(a,'"]')).addClass("active"),i('[data-uimw-font="'.concat(r,'"]')).addClass("active"),s.modal("show")}}}.apply(t,o))||(e.exports=a)},4226:(e,t,n)=>{var o,a,i=n(9755);o=[n(1433)],void 0===(a=function(e){var t,n=!1;return{onInit:function(){var o;n||(n=!0,i("body").append((o=e.getVersion(),'\n        <div class="modal fade" id="versionModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <img src="assets/images/icon.png" alt="Cross messenger">\n                        <h2>Cross messenger</h2>\n                        <p>\n                            Web Version: #XM_VERSION\n                        </p>\n                        <p>\n                            Server Version: '.concat(o,"\n                        </p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    "))),t=i("#versionModal")),t.modal("show")}}}.apply(t,o))||(e.exports=a)},7741:(e,t,n)=>{var o,a;o=[n(1433),n(7025)],void 0===(a=function(e,t){return{onInit:function(){return Notification.requestPermission().then((function(){}))},pushNotificationForMessage:function(n){var o,a=e.getInfomation(),i=e.getRoomInfoWasEdited();window.Notification&&"granted"===Notification.permission&&!document.hasFocus()&&a.id!==n.sender.id&&!1!==(null===(o=i[n.id.chatId])||void 0===o?void 0:o.notification_mess)&&function(e){var n=t.decodeStringBase64(e.message.replace(/<[^>]+>/g,"")),o=new Notification(e.sender.name,{body:n.replace(/<[^>]+>/g,""),icon:"/assets/images/icon.png"});o.onclick=function(e){e.preventDefault(),o.close()}}(n)}}}.apply(t,o))||(e.exports=a)},8335:(e,t,n)=>{var o,a=n(9755);void 0===(o=function(){var e=a("#frame");return{onInit:function(){a(".sidebar .sidebar-collapse-btn").off().click((function(){e.hasClass("indent")?e.removeClass("indent"):e.addClass("indent")}))}}}.call(t,n,t,e))||(e.exports=o)},3230:(e,t,n)=>{var o,a,i=n(9755);o=[n(7759),n(7025),n(1410),n(2450),n(5173),n(4226),n(2582)],void 0===(a=function(e,t,n,o,a,r,s){var c=e.SESSION_ID,l=e.TOKEN,d=i("#user-option"),u=i("#sidebar-options-btn"),m=i("#group-chat-options-btn"),p=d.find(".--start-conference"),f=d.find(".--use-interface"),v=d.find(".--send-invite"),g=d.find(".--erp-contact"),h=d.find(".--about"),b=d.find(".--logout"),y=!1,w=function(){y=!1,d.hide(),i(document).off(".hideOptionsSlide")},I=function(e){e.preventDefault(),e.stopPropagation(),y?w():(y=!0,d.show(),i(document).on("click.hideOptionsSlide",(function(e){d.is(e.target)||0!==d.has(e.target).length||w()})))},_=function(){return s.onInit()},C=function(){n.onInit(),w()},T=function(){window.open("/meeting.html","_blank").focus()},x=function(){o.onInit(),w()},O=function(){a.onInit(),w()},E=function(){r.onInit(),w()},R=function(){t.removeDataInLocalApplication(c),t.removeDataInLocalApplication(l),window.location="login.html"};return{onInit:function(){u.off().click(I),m.off().click(_),f.off().click(C),p.off().click(T),v.off().click(x),g.off().click(O),h.off().click(E),b.off().click(R)}}}.apply(t,o))||(e.exports=a)},4040:(e,t,n)=>{var o,a,i=n(9755);o=[n(7759),n(1433),n(7025),n(7914)],void 0===(a=function(e,t,n,o){var a=n.render,r=n.getAvatar,s=n.htmlEncode,c=i("#sidebarProfile"),l='\n        <a title="Edit Profile" class="sipr-image">\n            <img '.concat(e.ATTRIBUTE_CHANGE_IMAGE,'="{id}" class="--avatar avatar p-cur" src="{src}" onerror="this.src=\'/assets/images/user.jpg\'">\n        </a>\n        <p ').concat(e.ATTRIBUTE_CHANGE_NAME,'="{id}" class="--name">{name}</p>\n    ');return{onInit:function(){var e=t.getInfomation(),n={src:r(e.id),name:s(e.name),id:e.id};c.html(a(l,n)),i(document).off(".sidebarProfile").on("click.sidebarProfile","#sidebarProfile .sipr-image",o.onInit)}}}.apply(t,o))||(e.exports=a)},3814:(e,t,n)=>{var o,a,i=n(9755);o=[n(7759),n(1433),n(7025),n(7209),n(3851),n(4445),n(6512),n(6992),n(8640)],void 0===(a=function(e,t,n,o,a,r,s,c,l){var d=n.render,u=n.getAvatar,m=n.stripTags,p=n.htmlEncode,f=n.decodeStringBase64,v=i("#sidebar_room_list"),g=i(".js_caption"),h=i(".js_wrap_mess"),b='\n        <li class="js_li_list_user contact-list__item p-cur {status} {live} {mute}" '.concat(e.ATTRIBUE_SIDEBAR_ROOM,'="{id}" {isGroup}>\n            <img ').concat(e.ATTRIBUTE_CHANGE_IMAGE_GROUP,'="{id}" class="--img avatar {classImg}" src="{src}" {handleImageErr} />\n            <div class="badge badge-orange">{unread}</div>\n            <div class="p-pl-10 meta">\n                <div class="--name contact__name p-1-line">\n                    <i class="xm xm-volume-mute" aria-hidden="true"></i>\n                    <span ').concat(e.ATTRIBUTE_CHANGE_NAME,'="{userId}">{name}</span>\n                </div>\n                <div class="p-1-line preview">{mess}</div>\n            </div>\n        </li>\n    '),y=function(n){var d=0,u=i(n.currentTarget),m=u.data().roomId,p=t.getRooms().filter((function(e,t){return String(e.id)===String(m)&&(d=t,!0)}))[0]||{};if(!m)return g.show(),h.hide(),t.setCurrentRoomId(null),i("[".concat(e.ATTRIBUE_SIDEBAR_ROOM,"]")).removeClass("active"),void l.onInit(u);u.hasClass("p_disabled")||m===t.getCurrentRoomId()||(null!=p&&p.channel?i(".messages-input-wrap").hide():i(".messages-input-wrap").show(),t.setCurrentRoomId(m),i("[".concat(e.ATTRIBUE_SIDEBAR_ROOM,"]")).removeClass("active"),g.hide(),h.show(),u.addClass("active"),a.onClear(),c.onCloseSearchBox(),s.markPhone(p.group),r.onRenderInfomation(p),o.onLoadMessage(p,d))},w=function(e){var n,o,a,i=t.getRoomInfoWasEdited(),r=e.id,s=e.partner,c=e.unreadMessages,l=e.group,v=e.subject,g=e.sender,h=e.lastMessage,y="",w=r?"":"p_disabled",I=c||"",_=l?v:(null===(n=i[null==s?void 0:s.id])||void 0===n?void 0:n.user_name)||(null==s?void 0:s.name),C=h?p(m(f(h))):"",T=t.getCurrentRoomId()===r?"active":"",x=l?"":null==s?void 0:s.id;return l&&!_?"":(l&&(y=u(r,!0)),l||(y=u(null==s?void 0:s.id)),l||s||(y="/assets/images/user.svg"),!r&&g&&(_=null==s?void 0:s.name,C="Invite: pending",y=u(null==s?void 0:s.id)),r||g||(_=null==s?void 0:s.name,C="Invite: not accepted",y=u(null==s?void 0:s.id),w=""),a={id:r,isGroup:l?'data-is-group="true"':'data-is-group="false"',status:w,live:T,unread:I,handleImageErr:"onerror=\"this.src='".concat(l?"/assets/images/group.svg":"/assets/images/user.jpg","'\""),classImg:l?"hagr":"",src:y,name:p(_),mess:C,userId:x,mute:!1===(null===(o=i[r])||void 0===o?void 0:o.notification_mess)?"mute":""},d(b,a))};return{onInit:function(){var n=t.getRooms().map(w).join("");v.html("".concat('<a class="sidebar__toggle"><i class="xm xm-search --icon p-cur"></i></a>').concat(n)),i(document).off(".sidebarRoomList").on("click.sidebarRoomList","[".concat(e.ATTRIBUE_SIDEBAR_ROOM,"]"),y)},onRenderRoom:w,onPrepend:function(e){return v.prepend(e)},onUpdateRoomName:function(e,t){return i('[data-room-id="'.concat(e,'"]')).find(".--name.contact__name span").text(t)}}}.apply(t,o))||(e.exports=a)},4839:(e,t,n)=>{var o,a,i=n(9755);o=[n(7759),n(1433),n(7025)],void 0===(a=function(e,t,n){var o=n.debounce,a=1,r=i("#frame"),s=i("#search"),c=s.find(".search-toggle"),l=s.find(".js-menu"),d=s.find("[data-s]"),u=s.find(".search__option"),m=s.find(".search__input"),p=s.find(".clearable__clear"),f=o((function(){var t=i("[".concat(e.ATTRIBUE_SIDEBAR_ROOM,"]")),n=m.val().trim().toUpperCase();t.removeAttr("data-search-sidebar-hide"),n&&t.each((function(e){var o=t.eq(e),a=o.find("[data-userid-name]").html();String(a).toUpperCase().indexOf(n)>-1?o.removeAttr("data-search-sidebar-hide"):o.attr("data-search-sidebar-hide",!0)}))}),300),v=function(){l.hide(),i(document).off(".hideSearchFilter")},g=function(e){e.preventDefault(),e.stopPropagation(),l.show(),i(document).on("click.hideSearchFilter",(function(e){l.is(e.target)||0!==l.has(e.target).length||v()}))},h=function(t){var n=i("[".concat(e.ATTRIBUE_SIDEBAR_ROOM,"]")),o=i(t.currentTarget),r=o.data().s;v(),r!==a&&(a=r,d.removeClass("active"),o.addClass("active"),n.removeAttr("data-filter-sidebar-hide"),1!==r&&n.each((function(e){var t=n.eq(e),o=t.data().isGroup;(2!==r||t.find(".badge.badge-orange").html())&&(3!==r||o)?4===r&&o&&t.attr("data-filter-sidebar-hide",!0):t.attr("data-filter-sidebar-hide",!0)})))},b=function(){window.outerWidth>767?r.removeClass("indent"):r.addClass("indent"),setTimeout((function(){return m.focus()}),100)},y=function(){i("[".concat(e.ATTRIBUE_SIDEBAR_ROOM,"]")).removeAttr("data-search-sidebar-hide"),m.val("")};return{onInit:function(){m.val(""),d.off().click(h),u.off().click(g),p.off().click(y),c.off().click(b),i(document).off(".sidebarSearch").on("input.sidebarSearch","#search .search__input",f)}}}.apply(t,o))||(e.exports=a)},2400:(e,t,n)=>{var o,a,i=n(9755);function r(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}o=[n(7759),n(6788),n(1433),n(7025),n(3814),n(7209),n(4445),n(7741),n(3741)],void 0===(a=function(e,t,n,o,a,s,d,u,m){var p,f,v=!1,g=!1,h=e.SESSION_ID,b={timeout:1e4,onBackground:!1},y=function e(){if(p&&clearTimeout(p),document.hasFocus())return document.title="Messenger",void i("#favicon").attr("href","assets/images/favicon.ico");g?(document.title="New Message!",i("#favicon").attr("href","assets/images/favicon2.ico")):(document.title="Messenger",i("#favicon").attr("href","assets/images/favicon1.ico")),g=!g,p=setTimeout(e,1e3)},w=function(e,t){var o=n.getInfomation().id,a=n.getCurrentRoomId(),i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),r=t.length-1;if(t[r].updated||t[r].deleted||(i.lastMessage=t[t.length-1].message),a!==e.id){var s=i.unreadMessages;t.forEach((function(e){e.deleted||e.updated||(o===e.sender.id?s=0:s+=1)})),i.unreadMessages=s}else i.unreadMessages=0;return i},I=function(e,t){var o=!0,a=n.getCurrentRoomId()===t;return e.forEach((function(e){console.log(e),e.deleted?a&&s.onSyncRemove(e.id.messageId):e.updated?a&&s.onSyncUpdate(e):(7!==e.type&&(o=!1),21===e.type&&function(e,t){n.getInfomation().id!==e.sender.id&&m.onInit(e.sender,t)}(e,t),24===e.type&&function(e,t){n.getInfomation().id!==e.sender.id&&m.onEndCall(e.sender,t)}(e,t),a&&s.onSync([e]))})),o},_=function(e){var o,s=n.getRooms(),c=[],l=!1,d={};e.forEach((function(e){d[e.id.chatId]=(d[e.id.chatId]||[]).concat(e)})),s=s.filter((function(t){if(d[t.id]){var n=d[t.id];l||(l=!0,t.isLiveAssistance&&7===e[e.length-1].type||u.pushNotificationForMessage(n[0]));var o=I(d[t.id],t.id);if(!o){var r=w(t,n);y(),function(e){var t=a.onRenderRoom(e);i('[data-room-id="'.concat(e.id,'"]')).remove(),a.onPrepend(t)}(r),c=c.concat(r)}return o}return!0})),l||(o=e[0],t.get("chats").then((function(e){try{for(var t=e.length,i=0;i<t;i+=1)if(e[i].id===o.id.chatId){var s=a.onRenderRoom(e[i]);n.setRooms([n.setRoomWithAdapter(e[i])].concat(r(n.getRooms()))),a.onPrepend(s),u.pushNotificationForMessage(o);break}}catch(e){console.log(e)}}))),n.setRooms(c.concat(s))},C=function e(){var a=n.getCurrentRoomId();b[h]=o.getDataToLocalApplication(h),a&&(b.chatId=a),b.onBackground=document.hidden,v=!0,t.get("sync",b).then((function(t){var i;if(v=!1,e(),null!=t&&null!==(i=t.messages)&&void 0!==i&&i.length){var r=o.sortBy(t.messages,"msgDate");_(r)}a===n.getCurrentRoomId()&&d.onRenderTimeActivity(null==t?void 0:t.partnerLastTimeActivity)})).catch((function(){v=!1,f=setTimeout(e,5e3)}))};return{onInit:function(){f&&clearTimeout(f),v||C()}}}.apply(t,o))||(e.exports=a)},4436:(e,t,n)=>{var o,a,i=n(9755);o=[n(7025)],void 0===(a=function(e){var t,n=e.render,o=!1,a='\n        <div class="alert {class}" role="alert">\n            {message}\n            <button type="button" class="close">\n                <span aria-hidden="true">&times;</span>\n            </button>\n        </div>\n    ',r=function(e){i(e.currentTarget).closest(".alert").remove()};return{show:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";o||(o=!0,i("body").append('<div id="alert-wrapper"></div>'),t=i("#alert-wrapper"),i(document).on("click","#alert-wrapper .close",r));var c={class:"alert-danger",message:e};"success"===s&&(c.class="alert-success");var l=i(n(a,c));t.prepend(l),setTimeout((function(){return l.remove()}),3500)}}}.apply(t,o))||(e.exports=a)},6788:(e,t,n)=>{var o,a;o=[n(7759),n(7025)],void 0===(a=function(e,t){var n=e.TOKEN,o=e.SESSION_ID,a=e.API_URL,i=t.getDataToLocalApplication(o)||"",r=t.getDataToLocalApplication(n)||"",s={"Content-Type":"application/x-www-form-urlencoded","X-Authorization-Token":r},c={"Content-Type":"application/json","X-Authorization-Token":r};i&&r||(window.location="login.html");var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];for(var n in e)e.hasOwnProperty(n)&&t.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(e[n])));return t.length?"?".concat(t.join("&")):""},d=fetch;return fetch=function(){return d.apply(this,arguments).then((function(e){if(401===e.status)return t.removeDataInLocalApplication(o),t.removeDataInLocalApplication(n),window.location="login.html",e.json().then((function(e){throw e}));var a=e.headers.get("content-type");return a&&-1!==a.indexOf("application/json")?e.json():e.text()}))},{get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("".concat(a,"/").concat(e).concat(l(t)),{method:"GET",headers:c})},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("".concat(a,"/").concat(e),{method:"POST",headers:c,body:JSON.stringify(t)})},put:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("".concat(a,"/").concat(e),{method:"PUT",headers:c,body:JSON.stringify(t)})},delete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return fetch("".concat(a,"/").concat(e),{method:"DELETE",headers:c})},postForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return fetch("".concat(a,"/").concat(e),{method:"POST",headers:s,body:t})}}}.apply(t,o))||(e.exports=a)},1433:(e,t,n)=>{var o;void 0===(o=function(){var e=!0,t=null,n=!0,o=!0,a={},i=[],r="",s=[],c=[],l="",d="",u="",m={},p=[],f=function(e){return{channel:e.channel,group:e.group,groupAvatarType:e.groupAvatarType,id:e.id,isLiveAssistance:e.liveAssistance,lastMessage:e.lastMessage,partner:e.partner||{},subject:e.subject,ticket:e.ticket,unreadMessages:e.unreadMessages,updated:e.updated,sender:e.sender}};return{getInfomation:function(){return a},setInfomation:function(e){a=e},getVersion:function(){return l},setVersion:function(e){l=e},getBodyBgTheme:function(){return d},setBodyBgTheme:function(e){d=e},getBodyFontSize:function(){return u},setBodyFontSize:function(e){u=e},getRooms:function(){return i},setRooms:function(e){i=e},setRoomWithAdapter:f,setRoomsWithAdapter:function(e){i=e.map(f)},getCurrentRoomId:function(){return r},setCurrentRoomId:function(e){r=e},getCurrentMessages:function(){return s},setCurrentMessages:function(e){s=e},getCurrentSearchMessages:function(){return c},setCurrentSearchMessages:function(e){c=e},getRoomInfoWasEdited:function(){return m},setRoomInfoWasEdited:function(e){m=e},getNetworkStatus:function(){return e},setNetworkStatus:function(t){e=t},getEasyrtcIds:function(){return p},setEasyrtcIds:function(e){p=e},getIdShareScreen:function(){return t},setIdShareScreen:function(e){t=e},getIsEnabelCamera:function(){return n},setIsEnabelCamera:function(e){n=e},getIsEnabelMic:function(){return o},setIsEnabelMic:function(e){o=e}}}.call(t,n,t,e))||(e.exports=o)},7025:(e,t,n)=>{var o,a,i=n(9755);n(381).suppressDeprecationWarnings;o=[n(381),n(7759)],void 0===(a=function(e,t){return{setCookie:function(e,t){var n="";if(t){var o=new Date;o.setTime(o.getTime()+24*t*60*60*1e3),n="; expires=".concat(o.toUTCString())}document.cookie="token=".concat(e||"").concat(n,"; path=/")},setDataToLocalApplication:function(e,t){localStorage.setItem(e,t)},getDataToLocalApplication:function(e){return localStorage.getItem(e)},removeDataInLocalApplication:function(e){localStorage.removeItem(e)},getAvatar:function(e,n){if(e)return"".concat(t.API_URL,"/").concat(n?"chats":"users","/").concat(e,"/avatar")},sortBy:function(e,t){return e.sort((function(e,n){return e[t]<n[t]?-1:e[t]>n[t]?1:0}))},stripTags:function(e){return e.replace(/(<([^>]+)>)/gi,"")},convertMessagetime:function(t){var n=e(t),o=e(),a=e().subtract(1,"days");return o.isSame(n,"date")?"Today ".concat(n.format("H:mm")):a.isSame(n,"date")?"Yesterday ".concat(n.format("H:mm")):n.format("D MMM, H:mm")},humanFileSize:function(e){var t=1e3;if(Math.abs(e)<t)return"".concat(e," B");var n=["kB","MB","GB","TB","PB","EB","ZB","YB"],o=-1,a=Math.pow(10,1);do{e/=t,++o}while(Math.round(Math.abs(e)*a)/a>=t&&o<n.length-1);return"".concat(e.toFixed(1)," ").concat(n[o])},htmlDecode:function(e){var t=document.createElement("textarea");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue},htmlEncode:function(e){var t=document.createElement("textarea");return t.textContent=e,t.innerHTML},decodeStringBase64:function(e){var t;try{t=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(e)?decodeURIComponent(escape(window.atob(e))):e}catch(n){t=e,console.log(n)}return t},encodeStringBase64:function(e){var t;try{t=window.btoa(unescape(encodeURIComponent(e)))}catch(n){t=e,console.log(n)}return t},debounce:function(e,t,n){var o;return function(){var a=this,i=arguments,r=function(){o=null,n||e.apply(a,i)},s=n&&!o;clearTimeout(o),o=setTimeout(r,t),s&&e.apply(a,i)}},transformLinkTextToHTML:function(e){if(!e)return"";return e.replace(/(www|ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/g,(function(e){return"<a href='".concat(e,"' target='_blank' rel='noopener noreferrer'>").concat(e,"</a>")}))},truncate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return e.length>t?"".concat(e.substring(0,t-3),"..."):e},highlightText:function(e,t){var n=0,o=t.split(/\s+/).filter((function(e){return e.length>0})).map((function(e){return e.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}));if(0===o.length)return e;for(var a=new RegExp(o.join("|"),"gi"),i=[];;){var r=a.exec(e);if(!r)break;var s=r[0].length,c=e.slice(n,a.lastIndex-s);c.length>0&&i.push(c),n=a.lastIndex,i.push('<span class="highlight-text">'.concat(r[0],"</span>"))}var l=e.slice(n);return l.length>0&&i.push(l),i.join("")},confirm:function(e){var t;i("#confirmModal").remove(),i("body").append('\n    <div class="modal fade" id="confirmModal" tabindex="-1" role="dialog">\n        <div class="modal-dialog modal-dialog-centered" role="document">\n            <div class="modal-content">\n                <div class="modal-body">\n                    <h2>'.concat((t=e||{}).title||"Are you sure?","</h2>\n                    <p>").concat(t.des||"Are you sure you want to do this?",'</p>\n                    <button type="button" class="btn btn-outline-primary btn-small float-right" style="margin-left: 5px">\n                        ').concat(t.textOk||"Ok",'\n                    </button>\n                    <button type="button" data-dismiss="modal" aria-label="Close" class="btn btn-outline-secondary btn-small float-right">\n                        ').concat(t.textCancel||"Cancel","\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n"));var n=i("#confirmModal");n.modal("show"),n.find(".btn-outline-primary").off().click((function(){n.find(".btn-outline-secondary").click(),e.onOk&&e.onOk()}))},generateId:function(){return Math.random().toString(36).substr(2,9)},render:function(e,t){return i.templates(function(e){return e.replace(/{([^}]+)}/g,(function(e,t){var n=t.replace(/\./g,"^");return"{^{:".concat(n,"}}")}))}(e)).render(t)}}}.apply(t,o))||(e.exports=a)},6379:(e,t,n)=>{var o;void 0===(o=function(){return Object.freeze({CROSS:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path d="M31.708 25.708c-0-0-0-0-0-0l-9.708-9.708 9.708-9.708c0-0 0-0 0-0 0.105-0.105 0.18-0.227 0.229-0.357 0.133-0.356 0.057-0.771-0.229-1.057l-4.586-4.586c-0.286-0.286-0.702-0.361-1.057-0.229-0.13 0.048-0.252 0.124-0.357 0.228 0 0-0 0-0 0l-9.708 9.708-9.708-9.708c-0-0-0-0-0-0-0.105-0.104-0.227-0.18-0.357-0.228-0.356-0.133-0.771-0.057-1.057 0.229l-4.586 4.586c-0.286 0.286-0.361 0.702-0.229 1.057 0.049 0.13 0.124 0.252 0.229 0.357 0 0 0 0 0 0l9.708 9.708-9.708 9.708c-0 0-0 0-0 0-0.104 0.105-0.18 0.227-0.229 0.357-0.133 0.355-0.057 0.771 0.229 1.057l4.586 4.586c0.286 0.286 0.702 0.361 1.057 0.229 0.13-0.049 0.252-0.124 0.357-0.229 0-0 0-0 0-0l9.708-9.708 9.708 9.708c0 0 0 0 0 0 0.105 0.105 0.227 0.18 0.357 0.229 0.356 0.133 0.771 0.057 1.057-0.229l4.586-4.586c0.286-0.286 0.362-0.702 0.229-1.057-0.049-0.13-0.124-0.252-0.229-0.357z"></path></svg>',ADMIN:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path d="M30 19l-9 9-3-3-2 2 5 5 11-11z"></path><path d="M14 24h10v-3.598c-2.101-1.225-4.885-2.066-8-2.321v-1.649c2.203-1.242 4-4.337 4-7.432 0-4.971 0-9-6-9s-6 4.029-6 9c0 3.096 1.797 6.191 4 7.432v1.649c-6.784 0.555-12 3.888-12 7.918h14v-2z"></path></svg>',REMOVE_ADMIN:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path d="M12 23c0-4.726 2.996-8.765 7.189-10.319 0.509-1.142 0.811-2.411 0.811-3.681 0-4.971 0-9-6-9s-6 4.029-6 9c0 3.096 1.797 6.191 4 7.432v1.649c-6.784 0.555-12 3.888-12 7.918h12.416c-0.271-0.954-0.416-1.96-0.416-3z"></path><path d="M23 14c-4.971 0-9 4.029-9 9s4.029 9 9 9c4.971 0 9-4.029 9-9s-4.029-9-9-9zM28 24h-10v-2h10v2z"></path></svg>'})}.call(t,n,t,e))||(e.exports=o)},5931:(e,t,n)=>{var o;void 0===(o=function(){return"https://webrtc.iptp.net"}.call(t,n,t,e))||(e.exports=o)},1875:(e,t)=>{"use strict";function n(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function o(e,t){const o=indexedDB.open(e);o.onupgradeneeded=()=>o.result.createObjectStore(t);const a=n(o);return(e,n)=>a.then((o=>n(o.transaction(t,e).objectStore(t))))}let a;function i(){return a||(a=o("keyval-store","keyval")),a}function r(e,t){return e("readonly",(e=>(e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},n(e.transaction))))}Object.defineProperty(t,"__esModule",{value:!0}),t.clear=function(e=i()){return e("readwrite",(e=>(e.clear(),n(e.transaction))))},t.createStore=o,t.del=function(e,t=i()){return t("readwrite",(t=>(t.delete(e),n(t.transaction))))},t.entries=function(e=i()){const t=[];return r(e,(e=>t.push([e.key,e.value]))).then((()=>t))},t.get=function(e,t=i()){return t("readonly",(t=>n(t.get(e))))},t.getMany=function(e,t=i()){return t("readonly",(t=>Promise.all(e.map((e=>n(t.get(e)))))))},t.keys=function(e=i()){const t=[];return r(e,(e=>t.push(e.key))).then((()=>t))},t.promisifyRequest=n,t.set=function(e,t,o=i()){return o("readwrite",(o=>(o.put(t,e),n(o.transaction))))},t.setMany=function(e,t=i()){return t("readwrite",(t=>(e.forEach((e=>t.put(e[1],e[0]))),n(t.transaction))))},t.update=function(e,t,o=i()){return o("readwrite",(o=>new Promise(((a,i)=>{o.get(e).onsuccess=function(){try{o.put(t(this.result),e),a(n(o.transaction))}catch(e){i(e)}}}))))},t.values=function(e=i()){const t=[];return r(e,(e=>t.push(e.value))).then((()=>t))}}},t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,n.x=e=>{},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={826:0},t=[[6873,532,755,861]],o=e=>{},a=(a,i)=>{for(var r,s,[c,l,d,u]=i,m=0,p=[];m<c.length;m++)s=c[m],n.o(e,s)&&e[s]&&p.push(e[s][0]),e[s]=0;for(r in l)n.o(l,r)&&(n.m[r]=l[r]);for(d&&d(n),a&&a(i);p.length;)p.shift()();return u&&t.push.apply(t,u),o()},i=self.webpackChunkxm=self.webpackChunkxm||[];function r(){for(var o,a=0;a<t.length;a++){for(var i=t[a],r=!0,s=1;s<i.length;s++){var c=i[s];0!==e[c]&&(r=!1)}r&&(t.splice(a--,1),o=n(n.s=i[0]))}return 0===t.length&&(n.x(),n.x=e=>{}),o}i.forEach(a.bind(null,0)),i.push=a.bind(null,i.push.bind(i));var s=n.x;n.x=()=>(n.x=s||(e=>{}),(o=r)())})(),n.x()})();