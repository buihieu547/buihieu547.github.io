(()=>{var e={873:(e,t,n)=>{var o,a,i=n(743),r=n(755);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}o=[n(788),n(433),n(25),n(759),n(400),n(40),n(814),n(230),n(839),n(335),n(445),n(209),n(851),n(512),n(296),n(441),n(277)],void 0===(a=function(e,t,o,a,s,l,d,u,m,p,f,v,g,h,b,y,w){n(424),n(824),n(79),n(707),n(14),i(r);var I=o.setCookie,_=o.setDataToLocalApplication,T=o.getDataToLocalApplication,C=a.BODY_BG_THEME,O=a.BODY_FZ,R=a.THEMES,E=a.FONTSIZES,x=a.TOKEN,j=function(){var e=r("body"),t=T(C)||R[0].name,n=T(O)||E[2];R.forEach((function(t){return e.removeClass(t.name)})),e.addClass(t),e.css("font-size",n)};"serviceWorker"in navigator&&navigator.serviceWorker.register("sw.js").then((function(e){setInterval((function(){console.log("start update"),e.update()}),15e3)})),r(document).on("click",".input-only-view",(function(e){var t=r(e.currentTarget).prev();t.get(0).select(),t.get(0).setSelectionRange(0,99999),document.execCommand("copy"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()})),j(),e.get("version").then((function(e){return t.setVersion(e)})),Promise.all([e.post("validate"),e.get("users/preferences")]).then((function(e){var n,o,a,i;r(".xm-page-loading").remove(),n=e[1],o=(null==n?void 0:n.body_bg_theme)||R[0].name,a=(null==n?void 0:n.body_fz)||E[2],i=(null==n?void 0:n.user_chat_info)||{},t.setRoomInfoWasEdited(i),t.setBodyBgTheme(o),t.setBodyFontSize(a),_(C,o),_(O,a),j(),function(e){var n,o;0===e.status&&(I(T(x),3650),t.setInfomation(c(c({},e.data.user),{},{email:null==e||null===(n=e.data)||void 0===n?void 0:n.email,erp_url:null==e||null===(o=e.data)||void 0===o?void 0:o.erp_url})),t.setRooms(e.data.chats),l.onInit(),d.onInit(),p.onInit(),u.onInit(),m.onInit(),f.onInit(),v.onInit(),g.onInit(),h.onInit(),b.onInit(),y.onInit(),s.onInit(),w.onInit())}(e[0])}))}.apply(t,o))||(e.exports=a)},759:(e,t,n)=>{var o,a;o=[n(550)],void 0===(a=function(e){var t={API_URL:"".concat(e,"/api"),SESSION_ID:"sessionId",TOKEN:"token",BODY_BG_THEME:"body_bg_theme",BODY_FZ:"body_fz",THEMES:[{name:"body_theme_blue",color:"#3263d5"},{name:"body_theme_green",color:"#45d866"},{name:"body_theme_black",color:"#000"},{name:"body_theme_gray",color:"#808080"}],FONTSIZES:["12px","14px","16px","18px"],ATTRIBUTE_CHANGE_NAME:"data-userid-name",ATTRIBUTE_CHANGE_IMAGE:"data-userid-image",ATTRIBUTE_CHANGE_IMAGE_GROUP:"data-roomid-image",ATTRIBUE_SIDEBAR_ROOM:"data-room-id"};return Object.freeze(t)}.apply(t,o))||(e.exports=a)},550:(e,t,n)=>{var o;void 0===(o=function(){return"https://".concat("xm.iptp.net","/xm")}.call(t,n,t,e))||(e.exports=o)},512:(e,t,n)=>{var o,a,i=n(755);o=[n(759),n(433),n(25),n(741)],void 0===(a=function(e,t,n,o){var a=e.API_URL,r=e.TOKEN,s=n.getDataToLocalApplication(r)||"",c=i(".btn__attach"),l=i(".--input-up-file"),d=i(".--input-up-media"),u=i("#media-menu"),m=u.find(".js-up-phone"),p=i(".chatbox-progress-upload"),f=p.find("path"),v=p.find("span"),g=i(".dropzone"),h=!1,b=0,y=function(e){var t=e;return e<0&&(t=0),e>100&&(t=100),(100-t)/100*Math.PI*18},w=function(){h=!1,u.hide(),i(document).off(".hideAttachSlide")},I=function(e){e.preventDefault(),e.stopPropagation(),h?w():(h=!0,u.show(),i(document).on("click.hideAttachSlide",(function(e){u.is(e.target)||0!==u.has(e.target).length||w()})))},_=function(e){if(e.lengthComputable){var t=e.total,n=100*e.loaded/t,o=y(n);v.html(Math.round(n)),f.attr("stroke-dashoffset",o)}},T=function(){l.get(0).value="",d.get(0).value="",p.hide(),v.html(Math.round(0)),f.attr("stroke-dashoffset",y(0))},C=function(e,n){var o=new FormData;p.show(),o.append("file",n),o.append("chat_id",t.getCurrentRoomId()),i.ajax({type:"POST",url:"".concat(a,"/").concat(e),data:o,headers:{"X-Authorization-Token":s},xhr:function(){var e=i.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",_,!1),e},cache:!1,contentType:!1,processData:!1,success:T,error:T})},O=function(e){var t="fileupload"===e?l.get(0).files[0]:d.get(0).files[0];t&&C(e,t)},R=function(e){if(e.preventDefault(),e.stopPropagation(),b=0,g.hide(),e.originalEvent.dataTransfer.items&&e.originalEvent.dataTransfer.items.length){var t=e.originalEvent.dataTransfer.items[0],n=t.getAsFile();if(!t.type)return;/(gif|jpe?g|tiff?|png|webp|bmp)$/i.test(t.type)?C("imageupload",n):C("fileupload",n)}return!1},E=function(){o.onInit(),w()};return{onInit:function(){c.click(I),m.click(E),u.find(".menu__item").click(w),l.change((function(){return O("fileupload")})),d.change((function(){return O("imageupload")})),g.on("dragover",!1).on("drop",R),document.addEventListener("dragover",(function(e){e.preventDefault()})),document.addEventListener("dragenter",(function(e){e.preventDefault(),b+=1,g.show()}),!1),document.addEventListener("dragleave",(function(){0===(b-=1)&&g.hide()}),!1),document.addEventListener("drop",(function(e){b=0,g.hide()})),document.onpaste=function(e){var n=(event.clipboardData||event.originalEvent.clipboardData).items;for(index in n){var o=n[index];if("file"===o.kind&&t.getCurrentRoomId()){var a=o.getAsFile();/(gif|jpe?g|tiff?|png|webp|bmp)$/i.test(a.type)?C("imageupload",a):C("fileupload",a)}}}},markPhone:function(e){e?m.hide():m.show()}}}.apply(t,o))||(e.exports=a)},209:(e,t,n)=>{var o,a,i=n(755);function r(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}o=[n(381),n(759),n(436),n(788),n(433),n(25),n(960),n(445),n(244)],void 0===(a=function(e,t,n,o,a,s,c,d,u){var m=t.API_URL,p=(t.ATTRIBUE_SIDEBAR_ROOM,[]),f=!1,v=!1,g=s.render,h=s.getAvatar,b=s.convertMessagetime,y=s.humanFileSize,w=s.transformLinkTextToHTML,I=i(".scroll-to__bottom"),_=i(".messages__list"),T=i(".js_con_list_mess"),C=i(".--load-mess"),O=function(){T.scrollTop()+T.height()<T[0].scrollHeight-400?I.show():I.hide(),f||v||T.scrollTop()>700||A()},R=function(){var e=T.get(0);T.scrollTop(e.scrollHeight)},E=function(){return T.animate({scrollTop:T[0].scrollHeight},200)},x=function(t,n,o,a){var r=e(t.msgDate),s={},l={};if(0===n)return s.date=r.format("MMMM DD, YYYY"),s.dateCode=r.format("MMDDYYYY"),g(c.rangeDate,s);(l=e(o[n-1].msgDate),n===o.length-1&&a)&&(e(p[0].msgDate).isSame(r,"date")&&i("[data-mess-date-code='".concat(r.format("MMDDYYYY"),"']")).remove());return l.isSame(r,"date")?"":(s.date=r.format("MMMM DD, YYYY"),s.dateCode=r.format("MMDDYYYY"),g(c.rangeDate,s))},j=function(e){var t=a.getInfomation(),n=a.getRoomInfoWasEdited(),o={id:e.id.messageId,chatType:e.type};try{var i;if(7===e.type)return o.who=e.message,g(c.leftGroup,o);if(5===e.type)return o.who=e.message,g(c.joinGroup,o);if(21===e.type||24===e.type)return o.mess=e.message,g(c.call,o);if(o.src=h(e.sender.id),o.name=(null===(i=n[e.sender.id])||void 0===i?void 0:i.user_name)||e.sender.name,o.officially_name=e.sender.name,o.userId=e.sender.id,o.show_internal=e.internal?"":"hidden",o.who=t.id===e.sender.id?"you":"",o.date=b(e.msgDate),e.message.indexOf('"></c>')>-1&&-1===e.message.indexOf('<div class="col-xs-12 comment-box-inline" style="margin-left: 0;">'))try{var r;splitMess=e.message.split('<c style="display:none" ob="');var s=JSON.parse(splitMess[1].replace('"></c>',""));o.comment='<div class="comment-box-inline" style="margin-left: 0;">'.concat((null===(r=n[null==s?void 0:s.userId])||void 0===r?void 0:r.user_name)||(null==s?void 0:s.name),": ").concat(s.mess,"</div>"),o.mess=w(splitMess[0])}catch(t){console.log(t),o.mess=w(e.message)}else o.mess=w(e.message);return e.file&&(o.isFile="have-file",o.mess=function(e){var t={};switch(e.type){case 2:return t.src="".concat(m,"/image?id=").concat(e.id,"&small=1"),g(c.image,t);case 3:case 4:return;default:return t.src="".concat(m,"/file?id=").concat(e.id),t.fileName=e.filename,t.fileSize=y(e.size),g(c.file,t)}}(e.file)),g(c.mess,o)}catch(e){return console.log("Bug render message"),console.log(e),""}},A=function(){var e,t,n={chatId:a.getCurrentRoomId(),offset:null===(e=p[0])||void 0===e||null===(t=e.id)||void 0===t?void 0:t.messageId};f=!0,o.get("messages",n).then((function(e){var t,n,o,a,i=[];0===e.status&&((null==e||null===(t=e.data)||void 0===t||null===(n=t.messages)||void 0===n?void 0:n.length)<20&&(v=!0),a=(i=i.concat((null==e||null===(o=e.data)||void 0===o?void 0:o.messages)||[]).reverse()).map((function(e,t,n){return x(e,t,n,!0)+j(e)})).join(""),p=[].concat(r(i),r(p)),T.scrollTop(T.scrollTop()+10),_.prepend(a),setTimeout((function(){f=!1}),50))}))},k=function(e){console.log(e),n.show("Unable to connect to the Internet"),a.setCurrentRoomId(null),i(".js_caption").show(),i(".js_wrap_mess").hide(),i("[".concat(t.ATTRIBUE_SIDEBAR_ROOM,"]")).removeClass("active")},S=function(e,s){return o.get("messages",{chatId:e.id,offset:0}).then((function(o){var u,m,h,b,y,w;if(e.id===a.getCurrentRoomId()&&0===o.status){if(2===o.status)return I=a.getCurrentRoomId(),O=a.getRooms().filter((function(e){return e.id!==I})),i(".js_caption").show(),i(".js_wrap_mess").hide(),i("[".concat(t.ATTRIBUE_SIDEBAR_ROOM,'="').concat(I,'"]')).remove(),a.setRooms(O),a.setCurrentRoomId(null),void n.show("This chat room no longer exists");var I,O,E,A,k,S,M=e.member.messagecounter>0&&e.member.messagecounter<16,D=null;if((null==o||null===(u=o.data)||void 0===u||null===(m=u.messages)||void 0===m?void 0:m.length)<20&&(v=!0),d.onRenderTimeActivity(null==o||null===(h=o.data)||void 0===h?void 0:h.partnerLastTimeActivity),e.group&&o.data.members?a.setCurrentGroupMembers(o.data.members):a.setCurrentGroupMembers(null),M&&null!=o&&null!==(b=o.data)&&void 0!==b&&null!==(y=b.messages)&&void 0!==y&&y.length){var P=e.member.messagecounter-1;o.data.messages[P]?(o.data.messages[P].posUnread=!0,D=o.data.messages[P].id.messageId):M=!1}E=(p=p.concat(((null==o||null===(w=o.data)||void 0===w?void 0:w.messages)||[]).reverse())).map((function(e,t,n){return x(e,t,n)+function(e){return e.posUnread?(e.posUnread=!1,g(c.unread,{})):""}(e)+j(e)})).join(""),_.html(E),C.hide(),M?(A=i('[data-chat-id="'.concat(D,'"]')).offset().top,k=T.offset().top,S=T.scrollTop(),T.scrollTop(A+S-(k+200))):T.scrollTop(T[0].scrollHeight),_.find(".--click-show-popup-up-img").on("load",R),setTimeout((function(){!function(e,t){var n=l({},e),o=r(a.getRooms());i('[data-room-id="'.concat(n.id,'"]')).find(".badge").html(""),n.member.messagecounter=0,o[t]=l({},n),a.setRooms(o)}(e,s),f=!1}),50)}})).catch(k)};return{onInit:function(){u.onInit(),T.scroll(O),I.click(E),i(document).on("click",".btn-message-settings",(function(e){return u.onShow(e)}))},onLoadMessage:function(e,t){a.setCurrentGroupMembers(null),C.show(),_.html(""),f=!0,v=!1,p=[],S(l({},e),t)},onSync:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=T.get(0),n=t.scrollHeight-t.scrollTop<=t.clientHeight,o=e.map((function(e,t){return 0===t&&p.length?x(e,1,[].concat(p[p.length-1],e))+j(e):j(e)})).join("");p=p.concat(e),_.append(o),n&&(T.scrollTop(t.scrollHeight),_.find(".--click-show-popup-up-img").on("load",R))},onSyncRemove:function(e){var t=i('[data-chat-id="'.concat(e,'"]')),n=t.prev(),o=n.prev();n.hasClass("not-mess-li")&&n.remove(),o.hasClass("not-mess-li")&&o.remove(),t.remove(),p=p.filter((function(t){return t.id.messageId!==e}))},onSyncUpdate:function(e){var t=e.id.messageId;i('[data-chat-id="'.concat(t,'"]')).find(".--mess").html(w(e.message)),p=p.map((function(n){return n.id.messageId===t&&(n.message=e.message),n}))}}}.apply(t,o))||(e.exports=a)},960:(e,t,n)=>{var o,a;o=[n(759)],void 0===(a=function(e){var t={unread:'\n            <li class="not-mess-li">\n                <div class="messages__unreadLine">\n                    unread messages\n                </div>\n            </li>\n        ',call:'\n            <li class="not-mess-li call-mess" data-chat-id="{id}">\n                <div class="messages__unreadLine">\n                    {mess}\n                </div>\n            </li>\n        ',rangeDate:'\n            <li class="not-mess-li">\n                <div class="messages__time-chat" data-mess-date-code="{dateCode}">\n                    {date}\n                </div>\n             </li>\n        ',leftGroup:'\n            <li class="js_li_list_mess" data-chat-id="{id}">\n                <div class="messages__left-chat">\n                    {who} - left chat\n                </div>\n            </li>\n        ',joinGroup:'\n            <li class="js_li_list_mess" data-chat-id="{id}">\n                <div class="messages__join-chat">{who}  - joined chat\n                </div>\n            </li>\n        ',file:'<i class="xm xm-download"></i> <a href="{src}" target="_blank">{fileName}</a> {fileSize}',image:'<img class="p-cur --click-show-popup-up-img" src="{src}">',audio:'\n            <audio controls>\n                <source src="{audio}" type="audio/mpeg">\n                Your browser does not support the audio element.\n            </audio>\n        ',video:'\n            <div class="p-p-re">\n                <video width="400" controls>\n                    <source src="{video}" type="video/mp4">\n                    Your browser does not support HTML video.\n                </video>\n            </div>\n        ',mess:'\n            <li class="js_li_list_mess {who} messages__item {isFile}" data-chat-id="{id}" data-chat-type="{chatType}">\n                <div class="--content">\n                    <div class="--heading">\n                        <img '.concat(e.ATTRIBUTE_CHANGE_IMAGE,'="{userId}" class="--img avatar" src="{src}" onerror="this.src=\'/assets/images/user.jpg\'">\n                        <div class="--name" ').concat(e.ATTRIBUTE_CHANGE_NAME,'="{userId}" data-user-officially-name="{officially_name}">{name}</div>\n                        <div class="messages--internal {show_internal}">Internal</div>\n                    </div>\n                    {comment}\n                    <div class="--mess">{mess}</div>\n                    <div class="messages__bottom">\n                        <div class="--date">{date}</div>\n                        <div class="xm xm-bars --bars --menu p-cur btn-message-settings"></div>\n                    </div>\n                </div>\n            </li>\n        ')};return Object.freeze(t)}.apply(t,o))||(e.exports=a)},851:(e,t,n)=>{var o,a,i=n(755);o=[n(25),n(788),n(433)],void 0===(a=function(e,t,n){var o=e.htmlDecode,a=e.htmlEncode,r=e.stripTags,s=e.transformLinkTextToHTML,c=i(".js_endter_mess"),l=i(".js_con_list_mess"),d=i(".btn__send"),u=i(".mess-comment-box"),m=u.find(".mess-fw-box"),p=u.find(".mess-fw-box-close"),f=[],v=!1,g=!1,h=!1,b=0,y=function(){var e=c.get(0),t=l.get(0),n=t.scrollTop+t.clientHeight>=t.scrollHeight;setTimeout((function(){e.style.cssText="";var o=Math.min(window.outerHeight/5,e.scrollHeight);e.style.cssText="height: ".concat(o,"px"),t.style.cssText="height: calc(100% - ".concat(68+o,"px)"),n&&t.scrollTo(0,t.scrollHeight)}),0)},w=function(e){13!==e.keyCode||e.shiftKey||(e.preventDefault(),C()),y()},I=function(){return y()},_=function(){b=0,g=!1,v=!1,h=!1,c.val(""),c.focus(),u.hide(),y()},T=function e(n){return t.post("messages",n).then((function(){f.shift(),f.length&&e(f[0])})).catch((function(){return setTimeout((function(){return e(f[0])}),5e3)}))},C=function(){var e,t,o=n.getRoomInfoWasEdited(),i=n.getCurrentRoomId(),r=c.val();(new Date).getTime();r.replace(/[\s\n]/g,"")?(r=a(r),h&&(r="".concat(r,'<c style="display:none" ob="').concat(JSON.stringify(h),'"></c>')),t={sender:n.getInfomation(),id:{chatId:i,messageId:b},comment:1,message:r,type:1,deleted:g,updated:v,internal:!(null===(e=o[i])||void 0===e||!e.hide_mess)},_(),f.length||T(t),f=f.concat(t)):_()},O=function(){h=!1,u.hide()};return{onInit:function(){c.keydown(w),c.bind("paste",I),d.click(C),p.click(O)},onUpdate:function(e,t){var n=o(r(t.replace(/<br>/g,"\n")));c.val(n),c.focus(),v=!0,b=e,y()},onRemove:function(e,t){g=!0,b=e,c.val(t),C()},onComment:function(e){h={chatId:e.chatId,mess:e.mess,name:e.officiallyName,userId:e.userId},c.focus(),u.show(),m.html("<b>".concat(e.name,'</b>: <span class="span-mess-cmt span-mess-cmt-ids">').concat(e.hasFile?e.mess:s(e.mess),"</span>"))},onAddEmoji:function(e){c.val(c.val()+e),c.focus()},onClear:_}}.apply(t,o))||(e.exports=a)},445:(e,t,n)=>{var o,a,i=n(755);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}o=[n(381),n(759),n(433),n(788),n(25),n(582),n(908),n(585),n(265)],void 0===(a=function(e,t,n,o,a,r,c,l,d){var u=a.getAvatar,m=i(".js-group-option"),p=i("#chatbox-group-option"),f=p.find(".--edit-group"),v=p.find(".--internal"),g=v.find("span"),h=p.find(".--disabled"),b=h.find("span"),y=p.find(".--leave"),w=p.find(".--remove"),I=i(".js_info_parnter .toolbar-name .--name"),_=i(".js_info_parnter .--img.avatar"),T=i(".js_info_parnter .toolbar-name .--online"),C=function(){p.hide(),i(document).off(".hideChatboxTopBarOptionsSlice")},O=function(e){e.preventDefault(),e.stopPropagation(),p.show(),i(document).on("click.hideChatboxTopBarOptionsSlice",(function(e){p.is(e.target)||0!==p.has(e.target).length||C()}))},R=function(){r.onInit(n.getCurrentRoomId()),C()},E=function(){d.onInit(),C()},x=function(){l.onInit(),C()},j=function(){var e=n.getCurrentRoomId(),t=s({},n.getRoomInfoWasEdited());t[e]=t[e]||{},t[e].hide_mess?(g.html("Enable"),delete t[e].hide_mess):(g.html("Disable"),t[e].hide_mess=!0),n.setRoomInfoWasEdited(t),C(),o.put("users/preferences",{user_chat_info:t}).then((function(){}))},A=function(){var e=n.getCurrentRoomId(),a=i("[".concat(t.ATTRIBUE_SIDEBAR_ROOM,'="').concat(e,'"]')),r=s({},n.getRoomInfoWasEdited());r[e]=r[e]||{},!1===r[e].notification_mess?(a.removeClass("mute"),b.html("Disable"),delete r[e].notification_mess):(a.addClass("mute"),b.html("Enable"),r[e].notification_mess=!1),n.setRoomInfoWasEdited(r),C(),o.put("users/preferences",{user_chat_info:r}).then((function(){}))};return{onInit:function(){m.click(O),f.click(R),y.click(E),w.click(x),h.click(A),v.click(j),_.click(c.onInit)},onRenderInfomation:function(e){var o,a,i=n.getRoomInfoWasEdited();if(_.off("error"),T.html(""),!1===(null===(o=i[e.id])||void 0===o?void 0:o.notification_mess)?b.html("Enable"):b.html("Disable"),null!==(a=i[e.id])&&void 0!==a&&a.hide_mess?g.html("Disable"):g.html("Enable"),e.group)_.attr(t.ATTRIBUTE_CHANGE_IMAGE_GROUP,e.id),_.attr("src",u(e.id,!0)),_.on("error",(function(){return _.attr("src","/assets/images/group.svg")})),I.html(e.subject),I.removeAttr(t.ATTRIBUTE_CHANGE_NAME),f.show(),v.show(),y.show(),w.show(),T.hide();else{var r,s,c,l=e.members[0].user.id,d=(null===(r=n.getRoomInfoWasEdited()[l])||void 0===r?void 0:r.user_name)||e.members[0].user.name;_.removeAttr(t.ATTRIBUTE_CHANGE_IMAGE_GROUP),_.attr("src",u(null===(s=e.members[0])||void 0===s||null===(c=s.user)||void 0===c?void 0:c.id)),_.on("error",(function(){return _.attr("src","/assets/images/user.jpg")})),I.html(d),I.attr(t.ATTRIBUTE_CHANGE_NAME,l),f.hide(),v.hide(),y.hide(),w.hide(),T.show()}},onRenderTimeActivity:function(t){t&&(e().diff(e(t),"seconds")<=10?T.html("online"):T.html("last seen ".concat(e(t).fromNow())))},onUpdateTitle:function(e){I.html(e)}}}.apply(t,o))||(e.exports=a)},296:(e,t,n)=>{var o,a,i=n(755);o=[n(851)],void 0===(a=function(e){var t=["😄","😃","😀","😊","😉","😍","😘","😚","😗","😙","😜","😝","😛","😳","😁","😔","😌","😒","😞","😣","😢","😂","😭","😪","😥","😰","😅","😓","😩","😫","😨","😱","😠","😡","😤","😖","😆","😋","😷","😎","😴","😵","😲","😟","😦","😧","😈","👿","😮","😬","😐","😕","😯","😶","😇","😏","😑"],n=["👲","👳","👮","👷","💂","👶","👦","👧","👨","👩","👴","👵","👱","👼","👸","😺","😸","😻","😽","😼","🙀","😿","😹","😾","👹","👺","🙈","🙉","🙊","💀","👽","💩","🔥","✨","🌟","💫","💥","💢","💦","💧","💤","💨","👂","👀","👃","👅","👄","👍","👎","👌","👊","✊","✌️","👋","✋","👐","👆","👇","👉","👈","🙌","🙏","☝️","👏","💪","🚶","🏃","💃","👫","👪","👬","👭","💏","💑","👯","🙆","🙅","💁","🙋","💆","💇","💅","👰","🙎","🙍","🙇","🎩","👑","👒","👟","👞","👡","👠","👢","👕","👔","👚","👗","🎽","👖","👘","👙","💼","👜","👝","👛","👓","🎀","🌂","💄","💛","💙","💜","💚","❤️","💔","💗","💓","💕","💖","💞","💘","💌","💋","💍","💎","👤","👥","💬","👣","💭","🐶","🐺","🐱","🐭","🐹","🐰","🐸","🐯","🐨","🐻","🐷","🐽","🐮","🐗","🐵","🐒","🐴","🐑","🐘","🐼","🐧","🐦","🐤","🐥","🐣","🐔","🐍","🐢","🐛","🐝","🐜","🐞","🐌","🐙","🐚","🐠","🐟","🐬","🐳","🐋","🐄","🐏","🐀","🐃","🐅","🐇","🐉","🐎","🐐","🐓","🐕","🐖","🐁","🐂","🐲","🐡","🐊","🐫","🐪","🐆","🐈","🐩","🐾","💐","🌸","🌷","🍀","🌹","🌻","🌺","🍁","🍃","🍂","🌿","🌾","🍄","🌵","🌴","🌲","🌳","🌰","🌱","🌼","🌐","🌞","🌝","🌚","🌑","🌒","🌓","🌔","🌕","🌖","🌗","🌘","🌜","🌛","🌙","🌍","🌎","🌏","🌋","🌌","🌠","⭐","☀️","⛅","☁️","⚡","☔","❄️","⛄","🌀","🌁","🌈","🌊","🎍","💝","🎎","🎒","🎓","🎏","🎆","🎇","🎐","🎑","🎃","👻","🎅","🎄","🎁","🎋","🎉","🎊","🎈","🎌","🔮","🎥","📷","📹","📼","💿","📀","💽","💾","💻","📱","☎️","📞","📟","📠","📡","📺","📻","🔊","🔉","🔈","🔇","🔔","🔕","📢","📣","⏳","⌛","⏰","⌚","🔓","🔒","🔏","🔐","🔑","🔎","💡","🔦","🔆","🔅","🔌","🔋","🔍","🛁","🛀","🚿","🚽","🔧","🔩","🔨","🚪","🚬","💣","🔫","🔪","💊","💉","💰","💴","💵","💷","💶","💳","💸","📲","📧","📥","📤","✉️","📩","📨","📯","📫","📪","📬","📭","📮","📦","📝","📄","📃","📑","📊","📈","📉","📜","📋","📅","📆","📇","📁","📂","✂️","📌","📎","✒️","✏️","📏","📐","📕","📗","📘","📙","📓","📔","📒","📚","📖","🔖","📛","🔬","🔭","📰","🎨","🎬","🎤","🎧","🎼","🎵","🎶","🎹","🎻","🎺","🎷","🎸","👾","🎮","🃏","🎴","🀄","🎲","🎯","🏈","🏀","⚽","⚾️","🎾","🎱","🏉","🎳","⛳","🚵","🚴","🏁","🏇","🏆","🎿","🏂","🏊","🏄","🎣","☕","🍵","🍶","🍼","🍺","🍻","🍸","🍹","🍷","🍴","🍕","🍔","🍟","🍗","🍖","🍝","🍛","🍤","🍱","🍣","🍥","🍙","🍘","🍚","🍜","🍲","🍢","🍡","🍳","🍞","🍩","🍮","🍦","🍨","🍧","🎂","🍰","🍪","🍫","🍬","🍭","🍯","🍎","🍏","🍊","🍋","🍒","🍇","🍉","🍓","🍑","🍈","🍌","🍐","🍍","🍠","🍆","🍅","🌽","🏠","🏡","🏫","🏢","🏣","🏥","🏦","🏪","🏩","🏨","💒","⛪","🏬","🏤","🌇","🌆","🏯","🏰","⛺","🏭","🗼","🗾","🗻","🌄","🌅","🌃","🗽","🌉","🎠","🎡","⛲","🎢","🚢","⛵","🚤","🚣","⚓","🚀","✈️","💺","🚁","🚂","🚊","🚉","🚞","🚆","🚄","🚅","🚈","🚇","🚝","🚋","🚃","🚎","🚌","🚍","🚙","🚘","🚗","🚕","🚖","🚛","🚚","🚨","🚓","🚔","🚒","🚑","🚐","🚲","🚡","🚟","🚠","🚜","💈","🚏","🎫","🚦","🚥","⚠️","🚧","🔰","⛽","🏮","🎰","♨️","🗿","🎪","🎭","📍","🚩"],o=["1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣","0️⃣","🔟","🔢","#️⃣","🔣","⬆️","⬇️","⬅️","➡️","🔠","🔡","🔤","↗️","↖️","↘️","↙️","↔️","↕️","🔄","◀️","▶️","🔼","🔽","↩️","↪️","ℹ️","⏪","⏩","⏫","⏬","⤵️","⤴️","🆗","🔀","🔁","🔂","🆕","🆙","🆒","🆓","🆖","📶","🎦","🈁","🈯","🈳","🈵","🈴","🈲","🉐","🈹","🈺","🈶","🈚","🚻","🚹","🚺","🚼","🚾","🚰","🚮","🅿️","♿","🚭","🈷️","🈸","🈂️","Ⓜ️","🛂","🛄","🛅","🛃","🉑","㊙️","㊗️","🆑","🆘","🆔","🚫","🔞","📵","🚯","🚱","🚳","🚷","🚸","⛔","✳️","❇️","❎","✅","✴️","💟","🆚","📳","📴","🅰️","🅱️","🆎","🅾️","💠","➿","♻️","♈","♉","♊","♋","♌","♍","♎","♏","♐","♑","♒","♓","⛎","🔯","🏧","💹","💲","💱","©️","®️","™️","❌","‼️","⁉️","❗","❓","❕","❔","⭕","🔝","🔚","🔙","🔛","🔜","🔃","🕛","🕧","🕐","🕜","🕑","🕝","🕒","🕞","🕓","🕟","🕔","🕠","🕕","🕖","🕗","🕘","🕙","🕚","🕡","🕢","🕣","🕤","🕥","🕦","✖️","➕","➖","➗","♠️","♥️","♣️","♦️","💮","💯","✔️","☑️","🔘","🔗","➰","〰️","〽️","🔱","◼️","◻️","◾","◽","▪️","▫️","🔺","🔲","🔳","⚫","⚪","🔴","🔵","🔻","⬜","⬛","🔶","🔷","🔸","🔹"],a=!1,r=i(".wrap-emojis"),s=i(".btn__emoji"),c=i("[data-em-tab-btn]"),l=i('[data-em-tab-content="--tab-1"]'),d=i('[data-em-tab-content="--tab-2"]'),u=i('[data-em-tab-content="--tab-3"]'),m=function(e){return'<button data-em-btn="'.concat(e,'" class="btn-em">').concat(e,"</button>")},p=function(e){var t=i(e.currentTarget),n=t.data().emTabBtn;c.removeClass("active"),t.addClass("active"),i("[data-em-tab-content]").removeClass("active"),i('[data-em-tab-content="'.concat(n,'"]')).addClass("active")},f=function(){a=!1,r.hide(),i(document).off(".hideEmojiWrapper")},v=function(e){e.preventDefault(),e.stopPropagation(),a?f():(a=!0,r.show(),i(document).on("click.hideEmojiWrapper",(function(e){r.is(e.target)||0!==r.has(e.target).length||f()})))},g=function(t){var n=i(t.currentTarget).data().emBtn;e.onAddEmoji(n)};return{onInit:function(){l.html(t.map(m).join("")),d.html(n.map(m).join("")),u.html(o.map(m).join("")),c.click(p),s.click(v),i(document).on("click","[data-em-btn]",g)}}}.apply(t,o))||(e.exports=a)},244:(e,t,n)=>{var o,a,i=n(755);o=[n(25),n(851),n(857)],void 0===(a=function(e,t,n){var o,a=!1,r=i(".js_con_list_mess"),s=i(".js-menu-messages"),c=i(".js-menu-messages-cmt"),l=i(".js-menu-messages-forward"),d=i(".js-menu-messages-edit"),u=i(".js-menu-messages-remove"),m=function(){var n=o.data().chatId,a=o.find(".--name"),i=a.html(),r=o.find(".--mess").html(),s=a.data(),c=s.useridName,l=s.userOfficiallyName,d=e.stripTags(r),u=0;o.hasClass("have-file")&&(u=1,d=r),g(),t.onComment({chatId:n,userId:c,mess:d,name:i,hasFile:u,officiallyName:l})},p=function(){var e=o.data().chatId;g(),n.onInit(e)},f=function(){var e=o.data().chatId,n=o.find(".--mess").html();g(),t.onUpdate(e,n)},v=function(){var e=o.data().chatId,n=o.find(".--mess").html();g(),o.remove(),t.onRemove(e,n)},g=function(){a=!1,s.hide(),i(document).off(".hideMessageSettings")};return{onInit:function(){c.click(m),l.click(p),d.click(f),u.click(v)},onShow:function(e){if(e.preventDefault(),e.stopPropagation(),a)g();else{var t=i(e.currentTarget);o=t.closest(".js_li_list_mess"),a=!0,n=o.hasClass("you"),c=o.hasClass("have-file"),n?(d.show(),u.show()):(d.hide(),u.hide()),c&&d.hide(),function(e){i(window).width();var t=i(window).height(),n=s.height(),o=e.offset(),a=o.left-(r.offset().left+132),c=o.top+20;n+c+100>t&&(c=o.top-n-20),s.css({display:"block",top:"".concat(c,"px"),left:"".concat(a,"px")})}(t),i(document).on("click.hideMessageSettings",(function(e){s.is(e.target)||0!==s.has(e.target).length||g()}))}var n,c}}}.apply(t,o))||(e.exports=a)},640:(e,t,n)=>{var o,a,i=n(755);o=[n(759),n(433),n(788),n(25)],void 0===(a=function(e,t,o,a){var r,s,c,l=a.render,d=function(){if(!s){var e=i("#acceptInvitationModal"),a=e.find(".btn-outline-primary"),c=e.find(".btn-outline-secondary");c.hide(),a.prop("disabled",!0),s=!0,o.post("contacts/".concat(r,"/accept")).then((function(){o.get("chats").then((function(e){n(814).onInit(),t.setRooms(e.data.chats),c.click()})).catch((function(e){console.log(e),s=!1,a.prop("disabled",!1)}))})).catch((function(){s=!1,a.prop("disabled",!1)}))}};return{onInit:function(t){c||(c=!0,i(document).on("click","#acceptInvitationModal .btn-outline-primary",d)),r=t.find("[".concat(e.ATTRIBUTE_CHANGE_NAME,"]")).data().userId,i("#acceptInvitationModal").remove&&i("#acceptInvitationModal").remove(),i("body").append(l('\n        <div class="modal fade" id="acceptInvitationModal" tabindex="-1" role="dialog" data-backdrop="static">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <h2>Invite confirmation</h2>\n                        <p>Do you accept invitation from {name}</p>\n                        <button type="button" class="btn btn-outline-primary btn-small float-right">\n                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>\n                            Accept\n                        </button>\n                        <button type="button" data-dismiss="modal" aria-label="Close" class="btn btn-outline-secondary btn-small float-right">Cancel</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    ',{name:t.find(".contact__name span").text()})),i("#acceptInvitationModal").modal("show")}}}.apply(t,o))||(e.exports=a)},582:(e,t,n)=>{var o,a,i=n(755);function r(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}o=[n(788),n(433),n(25),n(436)],void 0===(a=function(e,t,o,a){var s,c,d,u,m,p,f,v,g,h,b,y,w,I,_,T,C=o.render,O=o.debounce,R=o.truncate,E=o.getAvatar,x=[],j=null,A=!1,k='\n        <div data-mcgs-id="{id}" class="crms-room {admin}">\n            <img class="--img avatar" src={src} data-toggle="tooltip" data-placement="right" title="{fullName}" />\n            <span>{name}</span>\n        </div>\n    ',S=function(e){var t,n,o=e.members[0],a=e.group?e.subject:null==o||null===(t=o.user)||void 0===t?void 0:t.name,i=(null==o||null===(n=o.user)||void 0===n?void 0:n.id)||"";return!e.id||!a||e.channel||e.group?"":C('\n        <div data-mcg-id="{id}" data-mcg-name="{name}" class="crm-room">\n            <img class="--img avatar" src="{src}">\n            <span>{name}</span>\n        </div>\n    ',{id:i,src:E(i),name:a})},M=O((function(){var e=y.val().trim().toUpperCase();e?f.each((function(t){var n=f.eq(t),o=n.data().mcgName;String(o).toUpperCase().indexOf(e)>-1?n.css("display",""):n.hide()})):f.css("display","")}),300),D=function(e){var t=i(e.currentTarget),n=t.data().mcgsId,o=t.offset().left-g.offset().left,a=t.offset().top-g.offset().top-5;o+150>=g.width()+g.offset().left&&(o=t.offset().left-g.offset().left-100),s=n,d.css({top:a,left:o}),d.show()},P=function(e){var t=i(e.currentTarget),n=t.data(),o=n.mcgId,a=n.mcgName,r={id:o,fullName:a,name:R(a.split(" ")[0],8),src:E(o)};x=x.concat({id:o,name:a,alias:null,selected:!0}),v.append(C(k,r)),u.addClass("room-selected"),t.attr("data-mcgi-selected",o),u.find('[data-toggle="tooltip"]').tooltip()},B=function(){return d.hide()},U=function(){x=x.filter((function(e){return e.id!==s})),i('[data-mcgs-id="'.concat(s,'"]')).remove(),i('[data-mcg-id="'.concat(s,'"]')).removeAttr("data-mcgi-selected"),x.length||u.removeClass("room-selected"),d.hide()},N=function(){x=x.map((function(e){var t=l({},e);return e.id===s&&(e.admin?(i('[data-mcgs-id="'.concat(s,'"]')).removeClass("admin"),delete t.admin):(i('[data-mcgs-id="'.concat(s,'"]')).addClass("admin"),t.admin=!0)),t})),d.hide()},G=function(){h.click(),a.show("Unable to connect to the Internet")},L=function(){if((T.val()?x.length||(a.show("Please select at least one member."),0):(a.show("Please enter group name."),0))&&!c){var o=n(814),i=n(445);b.addClass("loading-btn"),c=!0;var s={members:x,id:j,subject:T.val()};if(j){var d=t.getCurrentRoomId();e.put("chats",s).then((function(e){403===e.status&&(h.click(),a.show("Sorry, you don't have permission to perform this action")),e.chat&&(i.onUpdateTitle(s.subject),o.onUpdateRoomName(d,s.subject),t.setRooms(t.getRooms().map((function(e){var t=l({},e);return d===e.id&&(t.subject=s.subject),t}))),t.setCurrentGroupMembers(x.map((function(e){return{admin:!!e.admin,user:{id:e.id,name:e.name}}}))),h.click())})).catch(G)}else e.post("chats",s).then((function(e){if(e.chat){var n=o.onRenderRoom(e.chat);t.setRooms([e.chat].concat(r(t.getRooms()))),o.onPrepend(n),h.click()}})).catch(G)}},z=function(){var e;i("body").append((A=!0,e=t.getRooms().map(S).join(""),'\n        <div class="modal fade" id="createGroupModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h5 class="modal-title">\n                            New group chat\n                        </h5>\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n                    <div class="modal-body">\n                        <div class="crm-loading">\n                            <img src="./assets/images/double-ring--load.svg" alt="loading...">\n                        </div>\n                        <input type="text" name="name" id="cgm-input-name" placeholder="Group Name" maxlength="50" />\n                        <input type="search" name="search" id="cgm-input-search" placeholder="Search..." />\n                        <div class="crm-room-selected-wrapper"></div>\n                        <div class="crm-room-wrapper">'.concat(e,'</div>\n                        <div class="menu">\n                            <button type="button" class="menu__item crmm-admin-btn" data-dismiss=".menu">\n                                <i class="xm xm-key"></i>\n                                Admin\n                            </button>\n                            <button type="button" class="menu__item crmm-delete-btn" data-dismiss=".menu">\n                                <i class="xm xm-trash"></i>\n                                Delete\n                            </button>\n                            <button type="button" class="menu__item crmm-cancel-btn" data-dismiss=".menu">\n                                <i class="xm xm-close"></i>\n                                Cancel\n                            </button>\n                        </div>\n                    </div>\n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-outline-primary">\n                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>\n                            Save\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '))),u=i("#createGroupModal"),m=u.find(".modal-title"),g=u.find(".modal-content"),d=u.find(".menu"),f=u.find("[data-mcg-id]"),b=u.find(".btn-outline-primary"),h=u.find(".close"),v=u.find(".crm-room-selected-wrapper"),w=u.find(".crmm-cancel-btn"),I=u.find(".crmm-delete-btn"),_=u.find(".crmm-admin-btn"),p=u.find(".crm-loading"),y=i("#cgm-input-search"),T=i("#cgm-input-name"),y.attr("autocomplete","off"),T.attr("autocomplete","off"),u.on("click","[data-mcgs-id]",D),u.on("click","[data-mcg-id]",P),u.on("input","#cgm-input-search",M),w.click(B),I.click(U),_.click(N),b.click(L)},H=function e(n){if(t.getCurrentRoomId()===n){if(!t.getCurrentGroupMembers())return p.show(),b.prop("disabled",!0),void setTimeout((function(){u.hasClass("show")&&e(n)}),500);var o=t.getRooms().filter((function(e){return e.id===n}))[0];o?(j=n,p.hide(),u.addClass("room-selected"),b.prop("disabled",!1),T.val(o.subject),t.getCurrentGroupMembers().forEach((function(e){var t={id:e.user.id,name:e.user.name,alias:null,selected:!0},n={id:e.user.id,fullName:e.user.name,name:R(e.user.name.split(" ")[0],8),src:E(e.user.id)};e.admin&&(t.admin=!0,n.admin="admin"),x=x.concat(t),v.append(C(k,n)),i('[data-mcg-id="'.concat(e.user.id,'"]')).attr("data-mcgi-selected",e.user.id),u.find('[data-toggle="tooltip"]').tooltip()}))):h.click()}};return{onInit:function(e){A||z(),c=!1,s=!1,j=null,x=[],d.hide(),m.html("New group chat"),p.hide(),y.val(""),T.val(""),v.html(""),b.removeClass("loading-btn"),b.prop("disabled",!1),f.removeAttr("data-mcgi-selected"),f.css("display",""),u.removeClass("room-selected"),u.modal("show"),setTimeout((function(){return T.focus()}),500),e&&(m.html("Edit group chat"),H(e))}}}.apply(t,o))||(e.exports=a)},908:(e,t,n)=>{var o,a,i=n(755);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}o=[n(759),n(436),n(788),n(433),n(25)],void 0===(a=function(e,t,n,o,a){a.render;var c,l,d,u,m,p,f,v,g,h,b,y,w,I=a.getAvatar,_=a.getDataToLocalApplication,T=e.API_URL,C=e.TOKEN,O=e.ATTRIBUTE_CHANGE_NAME,R=e.ATTRIBUTE_CHANGE_IMAGE_GROUP,E=_(C)||"",x=!1,j=function(){y.click(),t.show("Unable to connect to the Internet")},A=function(){if(!l){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o.getRoomInfoWasEdited());if(l=!0,b.addClass("loading-btn"),c.group)e[c.id]=e[c.id]||{},e[c.id].user_des=h.val();else{var t=c.members[0].user;e[t.id]=e[t.id]||{},e[t.id].user_des=h.val(),e[t.id].user_name=g.val()}n.put("users/preferences",{user_chat_info:e}).then((function(){if(y.click(),o.setRoomInfoWasEdited(e),!c.group){var t=c.members[0].user,n=g.val()||t.name;i("[".concat(O,'="').concat(t.id,'"]')).html(n)}})).catch(j)}},k=function(){var e=w.get(0).files[0],t=new FormData,n=new FileReader;e&&(n.addEventListener("load",(function(e){p.attr("src",e.target.result),i("[".concat(R,'="').concat(o.getCurrentRoomId(),'"]')).attr("src",e.target.result)})),n.readAsDataURL(e),t.append("avatarfile",e),t.append("id",o.getCurrentRoomId()),i.ajax({type:"POST",url:"".concat(T,"/uploadgroupavatar"),data:t,headers:{"X-Authorization-Token":E},cache:!1,contentType:!1,processData:!1,success:function(){},error:function(){}}))};return{onInit:function(){x||(x=!0,i("body").append('\n        <div class="modal fade xmmc-modal" id="editRoomModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h5 class="modal-title">\n                            Edit Room\n                        </h5>\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n                    <div class="modal-body not-live-assistance">\n                        <label class="erm-image-wrapper input-freeze">\n                            <input class="ermiw-file" type="file" accept="image/*" style="display: none" />\n                            <img />\n                            <div class="ermiw-icon">\n                                <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16" height="16" viewBox="0 0 36.174 36.174" style="filter: grayscale(1) invert(1);" xml:space="preserve"><g><path d="M23.921,20.528c0,3.217-2.617,5.834-5.834,5.834s-5.833-2.617-5.833-5.834s2.616-5.834,5.833-5.834 S23.921,17.312,23.921,20.528z M36.174,12.244v16.57c0,2.209-1.791,4-4,4H4c-2.209,0-4-1.791-4-4v-16.57c0-2.209,1.791-4,4-4h4.92 V6.86c0-1.933,1.566-3.5,3.5-3.5h11.334c1.934,0,3.5,1.567,3.5,3.5v1.383h4.92C34.383,8.244,36.174,10.035,36.174,12.244z M26.921,20.528c0-4.871-3.963-8.834-8.834-8.834c-4.87,0-8.833,3.963-8.833,8.834s3.963,8.834,8.833,8.834 C22.958,29.362,26.921,25.399,26.921,20.528z"/></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>\n                            </div>\n                        </label>\n                        <div class="xmmcm-form-group erm-userid">\n                            <label>User Id</label>\n                            <input class="input-freeze" tabindex="-1" />\n                            <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                        </div>\n                        <div class="xmmcm-form-group erm-chatid">\n                            <label>Chat Id</label>\n                            <input class="input-freeze" tabindex="-1" />\n                            <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                        </div>\n                        <div class="xmmcm-form-group erm-name">\n                            <label>Name</label>\n                            <input tabindex="-1" placeholder="Enter name" maxlength="50" />\n                        </div>\n                        <div class="xmmcm-form-group erm-des">\n                            <label>Description</label>\n                            <textarea style="margin-bottom: 0" placeholder="Enter description"></textarea>\n                        </div>\n                    </div>\n                    <div class="modal-body modal-live-assistance hidden"></div>\n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-outline-primary">\n                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>\n                            Save\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),d=i("#editRoomModal"),u=d.find(".not-live-assistance"),m=d.find(".modal-live-assistance"),p=d.find(".erm-image-wrapper img"),f=d.find(".erm-userid input"),v=d.find(".erm-chatid input"),g=d.find(".erm-name input"),h=d.find(".erm-des textarea"),b=d.find(".btn-outline-primary"),w=d.find(".erm-image-wrapper .ermiw-file"),y=d.find(".close"),b.click(A),w.change(k),d.find('[data-toggle="tooltip"]').tooltip());var e=o.getRoomInfoWasEdited(),t=o.getCurrentRoomId();if(c=o.getRooms().filter((function(e){return e.id===t}))[0]||{},l=!1,p.off("error"),v.val(c.id),b.removeClass("loading-btn"),d.modal("show"),u.removeClass("hidden"),m.addClass("hidden"),c.group&&c.isLiveAssistance)return u.addClass("hidden"),m.removeClass("hidden"),m.html('<div class="--load-mess" style="display: block;"><div class="pulse"></div></div>'),void function(){var e=o.getCurrentRoomId();n.get("chats/".concat(e,"/description")).then((function(e){var t=e.guest,n=t.id,o=t.name,a=t.email,i=t.ipAddress,r=t.deviceType,s=(t.creationDate,t.browser),c=t.platform,l=t.platformVersion,u=t.userAgent;m.html('\n                <div class="xmmcm-form-group erm-userid">\n                    <label>Chat Id</label>\n                    <input class="input-freeze" tabindex="-1" value="'.concat(e.id,'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                </div>\n                <div class="xmmcm-form-group erm-userid">\n                    <label>Guest Id</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(n||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                </div>\n                <div class="xmmcm-form-group erm-userid">\n                    <label>Guest Name</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(o||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                </div>\n                <div class="xmmcm-form-group erm-userid">\n                    <label>Guest Email</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(a||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                </div>\n                <div class="xmmcm-form-group erm-userid">\n                    <label>IP Address</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(i||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                </div>\n                <div class="xmmcm-form-group erm-userid">\n                    <label>Device Type</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(r||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                </div>\n                <div class="xmmcm-form-group erm-userid">\n                    <label>Browser</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(s||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                </div>\n                <div class="xmmcm-form-group erm-userid">\n                    <label>Platform</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(c||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                </div>\n                <div class="xmmcm-form-group erm-userid">\n                    <label>Platform Version</label>\n                    <input class="input-freeze" tabindex="-1" value="').concat(l||"none",'" />\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                </div>\n                <div class="xmmcm-form-group erm-userid">\n                    <label>User Agent</label>\n                    <textarea class="input-freeze" tabindex="-1">').concat(u||"none",'</textarea>\n                    <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard" style="top: 30px"></div>\n                </div>\n            ')),d.find('[data-toggle="tooltip"]').tooltip()}))}();if(c.group){var a;p.closest(".erm-image-wrapper").removeClass("input-freeze"),p.on("error",(function(){return p.attr("src","/assets/images/group.svg")})),p.attr("src",I(c.id,!0)),g.closest(".erm-name").hide(),f.closest(".erm-userid").hide(),h.val((null===(a=e[c.id])||void 0===a?void 0:a.user_des)||"")}else{var r,s,_=c.members[0].user;p.closest(".erm-image-wrapper").addClass("input-freeze"),p.attr("src",I(_.id)),p.on("error",(function(){return p.attr("src","/assets/images/user.jpg")})),g.closest(".erm-name").show(),f.closest(".erm-userid").show(),f.val(_.id),g.val((null===(r=e[_.id])||void 0===r?void 0:r.user_name)||_.name),h.val((null===(s=e[_.id])||void 0===s?void 0:s.user_des)||"")}}}}.apply(t,o))||(e.exports=a)},857:(e,t,n)=>{var o,a,i=n(755);o=[n(788),n(433),n(25)],void 0===(a=function(e,t,n){var o,a,r,s,c=n.render,l=n.debounce,d=n.getAvatar,u=!1,m=function(e){var t,n,o,a="",i=e.members[0],r=e.group?e.subject:null==i||null===(t=i.user)||void 0===t?void 0:t.name;if(!e.id||!r||e.channel)return"";(e.group&&(a=d(e.id,!0)),e.group)||(a=d(null==i||null===(o=i.user)||void 0===o?void 0:o.id));return n={id:e.id,group:e.group?"hagr":"",handleImageErr:"onerror=\"this.src='".concat(e.group?"/assets/images/group.svg":"/assets/images/user.jpg","'\""),src:a,name:r},c('\n        <div data-fmm-room-id="{id}" data-fmm-room-name="{name}" class="fmm-room">\n            <img class="--img avatar {group}" src="{src}" {handleImageErr}>\n            <span>{name}</span>\n        </div>\n    ',n)},p=function(){return t.getRooms().map(m).join("")},f=function(n){a.click();var o="chatSrc=".concat(t.getCurrentRoomId(),"&chatDst=").concat(i(n.currentTarget).data().fmmRoomId,"&messageId=").concat(s);e.postForm("forwardmsg",o).then((function(e){}))},v=l((function(){var e=r.val().trim().toUpperCase();e?$rooms.each((function(){var t=i(this),n=t.data().fmmRoomName;String(n).toUpperCase().indexOf(e)>-1?t.show():t.hide()})):$rooms.show()}),300);return{onInit:function(e){var n,c=t.getRooms().filter((function(e){return e.id}));u||(u=!0,i(document).on("click","[data-fmm-room-id]",f),i(document).on("input","#fmm-input",v),i("body").append((n=p(),'\n        <div class="modal fade" id="forwardMessageModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h5 class="modal-title">\n                            Forward message to chat...\n                        </h5>\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n                    <div class="modal-body">\n                        <input type="search" name="search" id="fmm-input" placeholder="Search..." />\n                        <div class="fmm-room-wrapper">\n                            '.concat(n,"\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    "))),o=i("#forwardMessageModal"),a=o.find(".close"),$rooms=i("[data-fmm-room-id]"),(r=i("#fmm-input")).attr("autocomplete","off")),c.length!==$rooms.length&&(o.find(".fmm-room-wrapper").html(p()),$rooms=i("[data-fmm-room-id]")),s=e,r.val(""),$rooms.show(),i('[data-fmm-room-id="'.concat(t.getCurrentRoomId(),'"]')).hide(),o.modal("show")}}}.apply(t,o))||(e.exports=a)},450:(e,t,n)=>{var o,a,i=n(755);o=[n(433),n(788),n(436)],void 0===(a=function(e,t,n){var o,a,r,s,c=!1,l=function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},d=function(){var e=o.val();l(e)?(o.removeClass("error"),r.prop("disabled",!1)):(o.addClass("error"),r.prop("disabled",!0))},u=function(){var e=o.val();l(e)&&(s.click(),t.post("contacts/invite?email=".concat(e)).then((function(e){400===e.status&&n.show(e.details)})).catch((function(e){n.show(e)})))},m=function(e){13!==e.keyCode||e.shiftKey||(e.preventDefault(),u())};return{onInit:function(){c||(c=!0,i("body").append('\n        <div class="modal fade" id="inviteModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <p>Enter email address to send invitation</p>\n                        <input id="im-email-input" placeholder="user@mail.com" />\n                        <button type="button" class="btn btn-outline-primary btn-small float-right" disabled>Send</button>\n                        <button type="button" data-dismiss="modal" aria-label="Close" class="btn btn-outline-secondary btn-small float-right">Cancel</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),a=i("#inviteModal"),o=i("#im-email-input"),r=a.find(".btn-outline-primary"),s=a.find(".btn-outline-secondary"),i(document).on("input","#im-email-input",d),o.keydown(m),r.click(u)),a.modal("show"),o.val(""),r.prop("disabled",!0),setTimeout((function(){return o.focus()}),500)}}}.apply(t,o))||(e.exports=a)},265:(e,t,n)=>{var o,a,i=n(755);o=[n(759),n(433),n(788),n(436)],void 0===(a=function(e,t,n,o){var a,r,s,c,l=!1,d=i(".js_caption"),u=i(".js_wrap_mess"),m=function(){c.click(),o.show("Unable to connect to the Internet")},p=function(){var r=t.getCurrentRoomId();s.prop("disabled",!0),c.hide(),a.data("bs.modal")._config.backdrop="static",a.data("bs.modal")._config.keyboard=!1,n.delete("chats/".concat(r,"/leave")).then((function(n){if(400===n.status)return o.show(n.details),void c.click();var a=t.getRooms().filter((function(e){return e.id!==r}));t.setRooms(a),t.setCurrentRoomId(null),c.click(),d.show(),u.hide(),i("[".concat(e.ATTRIBUE_SIDEBAR_ROOM,'="').concat(r,'"]')).remove()})).catch(m)};return{onInit:function(){var e=t.getCurrentRoomId(),n=t.getRooms().filter((function(t){return t.id===e}))[0]||{};l||(l=!0,i("body").append('\n        <div class="modal fade" id="leaveGroupModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <h2>Leaving group chat "<span></span>" </h2>\n                        <p>You will not be able to see this group anymore. Are you sure you want to proceed?</p>\n                        <button type="button" class="btn btn-outline-primary btn-small float-right">\n                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>\n                            Leave\n                        </button>\n                        <button type="button" data-dismiss="modal" aria-label="Close" class="btn btn-outline-secondary btn-small float-right">Cancel</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),a=i("#leaveGroupModal"),r=a.find("h2 span"),s=a.find(".btn-outline-primary"),c=a.find(".btn-outline-secondary"),s.click(p)),c.show(),s.prop("disabled",!1),r.html(n.subject),a.modal("show"),a.data("bs.modal")&&(a.data("bs.modal")._config.backdrop=!0,a.data("bs.modal")._config.keyboard=!0)}}}.apply(t,o))||(e.exports=a)},741:(e,t,n)=>{var o,a,i=n(755);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],o=!0,a=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}o=[n(550),n(433),n(788),n(436),n(25)],void 0===(a=function(e,t,n,o,a){var s,c,l,d,u,m,p,f,v,g,h,b,y,w,I,_,T,C,O,R,E,x,j,A,k=a.getAvatar,S=0,M=0,D=0,P=!1,B="hidden",U="selfVideo",N="btn-slash",G=function(){return n.post("chats/".concat(v.id,"/call/end"))},L=function(){easyrtc.leaveRoom(f,null,null),easyrtc.setRoomOccupantListener(null),easyrtc.disconnect(),d&&!c&&G(),setTimeout((function(){easyrtc.getLocalStream().getTracks().forEach((function(e){return e.stop()})),E.addClass(B),x.removeClass("calling"),C.removeClass("btn-calling"),p=!1,d=!1,D=!1,T.off(),y.off(),C.off()}),500)},z=function(){S?(T.removeClass(N),R.get(0).srcObject.getTracks()[1].enabled=!0):(T.addClass(N),R.get(0).srcObject.getTracks()[1].enabled=!1),S=!S},H=function(){M?(y.removeClass(N),R.get(0).srcObject.getTracks()[0].enabled=!0):(y.addClass(N),R.get(0).srcObject.getTracks()[0].enabled=!1),M=!M},F=function(e,t){if("default"!==e){var o=JSON.stringify(t).length;if(o>2&&e===f&&(c=!0,b.addClass(B)),p&&o<3&&!u&&(G(),w.click()),!p&&e===f){p=!0;var a=[],i=0,r=0;Object.keys(t).forEach((function(e){Object.prototype.hasOwnProperty.call(t,e)&&(r||(r=t[e].roomJoinTime),r>t[e].roomJoinTime&&(r=t[e].roomJoinTime),a.push(e))}));a.length>0?function e(t){easyrtc.call(a[t],(function(){(i+=1)<m.length&&t>0&&e(t-1)}),(function(){i<m.length&&t>0&&e(t-1)}))}(a.length-1):(n.post("chats/".concat(v.id,"/call/place")),d=!0,b.removeClass(B))}}},Y=function(){D?w.click():(D=!D,C.addClass("btn-calling"),x.addClass("calling"),E.removeClass(B),easyrtc.joinRoom(f,"",null,null),easyrtc.setRoomOccupantListener(F),easyrtc.setAcceptChecker((function(e,t){D&&t(!0)})))},W=function(){l=!0,O.show(),O.removeClass(B),x.removeClass(B),b.addClass(B),T.click(z),y.click(H),C.click(Y)},$=function(){if(f=v.id,u=v.group,m=[],l=!1,E.find("video").remove(),v.group)for(var e=0;e<t.getCurrentGroupMembers().length;e+=1){var n="callerVideo".concat(e+1);m=m.concat(n),E.append('<video autoplay="autoplay" playsinline="playsinline" id="'.concat(n,'"></video>'))}else{var a="callerVideo";m=m.concat(a),E.append('<video autoplay="autoplay" playsinline="playsinline" id="'.concat(a,'"></video>'))}switch(m.length){case 1:E.attr("class","").addClass("video-caller");break;case 2:E.addClass("total-num-2");break;default:E.addClass("total-num-3")}easyrtc.initMediaSource((function(){easyrtc.dontAddCloseButtons(!0),easyrtc.easyApp("easyrtc.videoChatHd",U,m,W)}),(function(e){o.show("Browser does not support calls or you have locked mic and camera"),console.log(e)}))},V=function(){j.removeClass("accept-state"),$(),s=setInterval((function(){l&&(C.click(),clearInterval(s))}),100)},K=function(){A.modal("hide"),v.group||G()};return{onInit:function(e,n){if(!p){if(P||(P=!0,i("body").append('\n        <div class="modal fade" id="modalPhoneRequest" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">\n            <div class="modal-dialog modal-lg modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <button type="button" class="close" id="video_close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n\n                        <div class="video-call-notify-form">\n                            <h2>Incoming video call...</h2>\n                            <img class="vcnf-image" />\n                            <h3 class="vcnf-name">Bonnie</h3>\n                            <div class="vcnf-group clearfix">\n                                <button class="vcnf-hangup">\n                                    <i class="xm xm-phone"></i>\n                                </button>\n                                <button class="vcnf-accept">\n                                    <i class="xm xm-phone"></i>\n                                </button>\n                            </div>\n                        </div>\n\n                        <div class="video-call-modal-body">\n                            <div class="video-call-wrapper">\n                                <div class="video-caller hidden">\n                                    <div class="call-animation hidden">\n                                        <i class="xm xm-phone"></i>\n                                    </div>\n                                </div>\n                                <div class="video-self">\n                                    <video autoplay="" playsinline="playsinline" id="selfVideo" muted="" volume="0"></video>\n                                </div>\n                            </div>\n                            <div class="video-call-setting">\n                                <button id="video-mic-btn">\n                                    <span></span>\n                                    <i class="xm xm-microphone"></i>\n                                </button>\n                                <button id="video-camera-btn">\n                                    <span></span>\n                                    <i class="xm xm-video-camera"></i>\n                                </button>\n                                <button id="video-phone-btn">\n                                    <i class="xm xm-phone"></i>\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),easyrtc.setSocketUrl("https://xm.iptp.dev"),A=i("#modalPhoneRequest"),j=A.find(".modal-dialog"),O=i(".video-call-setting"),R=i("#".concat(U)),E=i(".video-caller"),x=i(".video-self"),b=i(".call-animation"),y=i("#video-mic-btn"),T=i("#video-camera-btn"),C=i("#video-phone-btn"),w=i("#video_close"),g=i(".vcnf-image"),h=i(".vcnf-name"),_=i(".vcnf-accept"),I=i(".vcnf-hangup"),w.click(L),I.click(K),_.click(V)),e){var o,a=(null===(o=t.getRoomInfoWasEdited()[e.id])||void 0===o?void 0:o.user_name)||e.name,s=r(t.getRooms().filter((function(e){return e.id===n})),1);v=s[0],j.addClass("accept-state"),h.html(a),v.group?g.attr("src",k(v.id,!0)):g.attr("src",k(e.id)),l&&(l=!1,L())}else{var d=r(t.getRooms().filter((function(e){return e.id===t.getCurrentRoomId()})),1);v=d[0],j.removeClass("accept-state"),$()}c=!1,O.hide(),b.addClass(B),A.modal("show")}},onEndCall:function(e,t){t===v.id&&d&&D&&(c=!0,C.click()),!A.hasClass("show")||d||D||(s&&clearInterval(s),A.modal("hide"))}}}.apply(t,o))||(e.exports=a)},914:(e,t,n)=>{var o,a,i=n(755);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}o=[n(759),n(436),n(788),n(433),n(25)],void 0===(a=function(e,t,n,o,a){a.render;var c,l,d,u,m,p,f,v,g=a.getAvatar,h=a.getDataToLocalApplication,b=e.API_URL,y=e.TOKEN,w=e.ATTRIBUTE_CHANGE_NAME,I=e.ATTRIBUTE_CHANGE_IMAGE,_=h(y)||"",T=!1,C=function(){p.click(),t.show("Unable to connect to the Internet")},O=function(){if(!c){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o.getInfomation()),t="email=".concat(e.email,"&id=").concat(e.id,"&name=").concat(u.val()||e.name,"&url=").concat(m.val());c=!0,v.addClass("loading-btn"),n.postForm("saveprofile",t).then((function(){u.val()&&(e.name=u.val(),i("[".concat(w,'="').concat(e.id,'"]')).html(u.val())),e.erp_url=m.val(),p.click(),o.setInfomation(e)})).catch(C)}},R=function(){var e=f.get(0).files[0],t=new FormData,n=new FileReader;e&&(n.addEventListener("load",(function(e){d.attr("src",e.target.result),i("[".concat(I,'="').concat(o.getInfomation().id,'"]')).attr("src",e.target.result)})),n.readAsDataURL(e),t.append("avatarfile",e),i.ajax({type:"POST",url:"".concat(b,"/uploadavatar"),data:t,headers:{"X-Authorization-Token":_},cache:!1,contentType:!1,processData:!1,success:function(){},error:function(){}}))};return{onInit:function(e){var t=o.getInfomation();T||(T=!0,i("body").append('\n        <div class="modal fade xmmc-modal" id="profileModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h5 class="modal-title">\n                            Edit Infomation\n                        </h5>\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n                    <div class="modal-body">\n                        <label class="pmm-image-wrapper">\n                            <input class="pmmiw-file" type="file" accept="image/*" style="display: none" />\n                            <img onerror="this.src = \'/assets/images/user.jpg\'" />\n                            <div class="pmmiw-icon">\n                                <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16" height="16" viewBox="0 0 36.174 36.174" style="filter: grayscale(1) invert(1);" xml:space="preserve"><g><path d="M23.921,20.528c0,3.217-2.617,5.834-5.834,5.834s-5.833-2.617-5.833-5.834s2.616-5.834,5.833-5.834 S23.921,17.312,23.921,20.528z M36.174,12.244v16.57c0,2.209-1.791,4-4,4H4c-2.209,0-4-1.791-4-4v-16.57c0-2.209,1.791-4,4-4h4.92 V6.86c0-1.933,1.566-3.5,3.5-3.5h11.334c1.934,0,3.5,1.567,3.5,3.5v1.383h4.92C34.383,8.244,36.174,10.035,36.174,12.244z M26.921,20.528c0-4.871-3.963-8.834-8.834-8.834c-4.87,0-8.833,3.963-8.833,8.834s3.963,8.834,8.833,8.834 C22.958,29.362,26.921,25.399,26.921,20.528z"/></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>\n                            </div>\n                        </label>\n                        <div class="pmm-form-group pmm-userid">\n                            <label>User Id</label>\n                            <input class="input-freeze" tabindex="-1" />\n                            <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                        </div>\n                        <div class="pmm-form-group pmm-email">\n                            <label>Email</label>\n                            <input class="input-freeze" tabindex="-1" />\n                            <div class="input-only-view" data-toggle="tooltip" data-placement="top" title="Copy to clipboard"></div>\n                        </div>\n                        <div class="pmm-form-group pmm-name">\n                            <label>Name</label>\n                            <input placeholder="Enter name" maxlength="50" />\n                        </div>\n                        <div class="pmm-form-group pmm-erp">\n                            <label>ERP/CRM URL</label>\n                            <input style="margin-bottom: 0" placeholder="https://erp.iptp.net/erp/dispatcher" />\n                        </div>\n                    </div>\n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-outline-primary">\n                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>\n                            Save\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),l=i("#profileModal"),(d=l.find(".pmm-image-wrapper img")).attr("src",g(t.id)),l.find(".pmm-form-group.pmm-userid input").val(t.id),u=l.find(".pmm-form-group.pmm-name input"),l.find(".pmm-form-group.pmm-email input").val(t.email),m=l.find(".pmm-form-group.pmm-erp input"),v=l.find(".btn-outline-primary"),p=l.find(".close"),f=l.find(".pmm-image-wrapper .pmmiw-file"),l.find('[data-toggle="tooltip"]').tooltip(),v.click(O),f.change(R)),c=!1,v.removeClass("loading-btn"),u.val(t.name),m.val(t.erp_url),l.modal("show")}}}.apply(t,o))||(e.exports=a)},585:(e,t,n)=>{var o,a,i=n(755);o=[n(759),n(433),n(788),n(436)],void 0===(a=function(e,t,n,o){var a,r,s,c=!1,l=i(".js_caption"),d=i(".js_wrap_mess"),u=function(){s.click(),o.show("Unable to connect to the Internet")},m=function(){var c=t.getCurrentRoomId();r.prop("disabled",!0),s.hide(),a.data("bs.modal")._config.backdrop="static",a.data("bs.modal")._config.keyboard=!1,n.delete("chats/".concat(c)).then((function(n){if(400===n.status||403===n.status)return o.show(n.details),void s.click();var a=t.getRooms().filter((function(e){return e.id!==c}));t.setRooms(a),t.setCurrentRoomId(null),s.click(),l.show(),d.hide(),i("[".concat(e.ATTRIBUE_SIDEBAR_ROOM,'="').concat(c,'"]')).remove()})).catch(u)};return{onInit:function(){c||(c=!0,i("body").append('\n        <div class="modal fade" id="removeGroupModal" tabindex="-1" role="dialog" data-backdrop="static">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <h2>Delete Group Chat</h2>\n                        <p>Group Chat including history will be deleted, are you sure?</p>\n                        <button type="button" class="btn btn-outline-primary btn-small float-right" disabled>\n                            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>\n                            Remove\n                        </button>\n                        <button type="button" data-dismiss="modal" aria-label="Close" class="btn btn-outline-secondary btn-small float-right">Cancel</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),a=i("#removeGroupModal"),r=a.find(".btn-outline-primary"),s=a.find(".btn-outline-secondary"),r.click(m)),r.prop("disabled",!1),a.modal("show"),a.data("bs.modal")&&(a.data("bs.modal")._config.backdrop=!0,a.data("bs.modal")._config.keyboard=!0)}}}.apply(t,o))||(e.exports=a)},173:(e,t,n)=>{var o,a,i=n(755);o=[n(433),n(788),n(436)],void 0===(a=function(e,t,o){var a,r,s,c,l=!1,d=function(){a.val()?(a.removeClass("error"),s.prop("disabled",!1)):(a.addClass("error"),s.prop("disabled",!0))},u=function(){var i=a.val();i&&(c.click(),t.postForm("integrateERP","url=".concat(i,"&email=").concat(e.getInfomation().email)).then((function(a){2!==a.status?t.get("chats").then((function(t){n(814).onInit(),e.setRooms(t.data.chats),c.click()})):o.show(a.message)})).catch((function(e){o.show(e)})))},m=function(e){13!==e.keyCode||e.shiftKey||(e.preventDefault(),u())};return{onInit:function(){l||(l=!0,i("body").append('\n        <div class="modal fade" id="sendErpModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <p>Enter ERP URL to load contacts</p>\n                        <input id="sem-url-input" placeholder="https://erp.iptp.net/erp/dispatcher" />\n                        <button type="button" class="btn btn-outline-primary btn-small float-right" disabled>Send</button>\n                        <button type="button" data-dismiss="modal" aria-label="Close" class="btn btn-outline-secondary btn-small float-right">Cancel</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),r=i("#sendErpModal"),a=i("#sem-url-input"),s=r.find(".btn-outline-primary"),c=r.find(".btn-outline-secondary"),i(document).on("input","#sem-url-input",d),a.keydown(m),s.click(u));var t=e.getInfomation().erp_url||"";t?s.prop("disabled",!1):s.prop("disabled",!0),r.modal("show"),a.val(t),setTimeout((function(){return a.focus()}),500)}}}.apply(t,o))||(e.exports=a)},441:(e,t,n)=>{var o,a=n(755);void 0===(o=function(){var e,t,n=function(n){e.modal("show"),t.attr("src",n.target.src.replace("&small=1","&large=1")),t.removeClass("zoomout"),t.removeAttr("style")},o=function(){if(t.hasClass("zoomout"))t.removeAttr("style"),t.removeClass("zoomout");else{var e=t.get(0),n=e.clientWidth,o=e.clientHeight,a=n/o,i=0,r=0;n>o?r=(i=1.5*o)*a:i=(r=1.5*n)/a,t.css({height:"".concat(i,"px"),width:"".concat(r,"px")}),t.addClass("zoomout")}};return{onInit:function(){a("body").append('\n        <div class="modal fade" id="showImageFull" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                        <img />\n                    </div>\n                </div>\n            </div>\n        </div>\n    '),e=a("#showImageFull"),t=e.find("img"),a(document).on("click",".--click-show-popup-up-img",n),t.click(o)}}}.call(t,n,t,e))||(e.exports=o)},410:(e,t,n)=>{var o,a,i=n(755);o=[n(788),n(433),n(25),n(759)],void 0===(a=function(e,t,n,o){var a,r,s,c,l,d,u,m=n.render,p=n.setDataToLocalApplication,f=o.BODY_BG_THEME,v=o.BODY_FZ,g=o.THEMES,h=o.FONTSIZES,b=!1,y=function(e){$this=i(e.currentTarget),l.removeClass("active"),$this.addClass("active"),a=$this.data().uimwTheme},w=function(e){$this=i(e.currentTarget),d.removeClass("active"),$this.addClass("active"),r=$this.data().uimwFont},I=function(){var n=i("body");c.click(),n.removeClass(t.getBodyBgTheme()),n.addClass(a),n.css("font-size",r),t.setBodyBgTheme(a),t.setBodyFontSize(r),p(f,a),p(v,r),e.put("users/preferences",{body_bg_theme:a,body_fz:r}).then((function(){}))};return{onInit:function(){if(!b){var e=g.map((function(e){return m('<div class="uimw-theme-item" data-uimw-theme="{name}" style="background: {color}"></div>',e)})).join(""),n=h.map((function(e){return m('<div class="uimw-font-item" data-uimw-font="{size}" style="font-size: {size}">Aa</div>',{size:e})})).join("");b=!0,i("body").append(function(e,t){return'\n        <div class="modal fade" id="userInterfaceModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h5 class="modal-title">\n                            User Interface\n                        </h5>\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n                    <div class="modal-body">\n                        <div class="uim-wrapper">\n                            <div class="uimw-title">\n                                Theme\n                            </div>\n                            '.concat(e,'\n                        </div>\n                        <div class="uim-wrapper">\n                            <div class="uimw-title">\n                                Font\n                            </div>\n                            ').concat(t,'\n                        </div>\n                        <button type="button" class="btn btn-outline-primary float-right">\n                            Save\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    ')}(e,n)),s=i("#userInterfaceModal"),c=s.find(".close"),l=i("[data-uimw-theme]"),d=i("[data-uimw-font]"),u=s.find(".btn-outline-primary"),l.click(y),d.click(w),u.click(I)}a=t.getBodyBgTheme()||g[0].name,r=t.getBodyFontSize()||h[2],l.removeClass("active"),d.removeClass("active"),i('[data-uimw-theme="'.concat(a,'"]')).addClass("active"),i('[data-uimw-font="'.concat(r,'"]')).addClass("active"),s.modal("show")}}}.apply(t,o))||(e.exports=a)},226:(e,t,n)=>{var o,a,i=n(755);o=[n(433)],void 0===(a=function(e){var t,n=!1;return{onInit:function(){var o;n||(n=!0,i("body").append((o=e.getVersion(),'\n        <div class="modal fade" id="versionModal" tabindex="-1" role="dialog">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        <img src="assets/images/icon.png" alt="Cross messenger">\n                        <h2>Cross messenger</h2>\n                        <p>\n                            Web Version: #XM_VERSION\n                        </p>\n                        <p>\n                            Server Version: '.concat(o,"\n                        </p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    "))),t=i("#versionModal")),t.modal("show")}}}.apply(t,o))||(e.exports=a)},277:(e,t,n)=>{var o,a;o=[n(433)],void 0===(a=function(e){return{onInit:function(){return Notification.requestPermission().then((function(){}))},pushNotificationForMessage:function(t){var n,o=e.getInfomation(),a=e.getRoomInfoWasEdited();window.Notification&&"granted"===Notification.permission&&!document.hasFocus()&&o.id!==t.sender.id&&!1!==(null===(n=a[t.id.chatId])||void 0===n?void 0:n.notification_mess)&&function(e){var t=new Notification(e.sender.name,{body:e.message.replace(/<[^>]+>/g,""),icon:"/assets/images/icon.png"});t.onclick=function(e){e.preventDefault(),t.close()}}(t)}}}.apply(t,o))||(e.exports=a)},335:(e,t,n)=>{var o,a=n(755);void 0===(o=function(){var e=a("#frame");return{onInit:function(){a(".sidebar .sidebar-collapse-btn").click((function(){e.hasClass("indent")?e.removeClass("indent"):e.addClass("indent")}))}}}.call(t,n,t,e))||(e.exports=o)},230:(e,t,n)=>{var o,a,i=n(755);o=[n(759),n(25),n(410),n(450),n(173),n(226),n(582)],void 0===(a=function(e,t,n,o,a,r,s){var c=e.SESSION_ID,l=e.TOKEN,d=i("#user-option"),u=i("#sidebar-options-btn"),m=i("#group-chat-options-btn"),p=d.find(".--use-interface"),f=d.find(".--send-invite"),v=d.find(".--erp-contact"),g=d.find(".--about"),h=d.find(".--logout"),b=!1,y=function(){b=!1,d.hide(),i(document).off(".hideOptionsSlide")},w=function(e){e.preventDefault(),e.stopPropagation(),b?y():(b=!0,d.show(),i(document).on("click.hideOptionsSlide",(function(e){d.is(e.target)||0!==d.has(e.target).length||y()})))},I=function(){return s.onInit()},_=function(){n.onInit(),y()},T=function(){o.onInit(),y()},C=function(){a.onInit(),y()},O=function(){r.onInit(),y()},R=function(){t.removeDataInLocalApplication(c),t.removeDataInLocalApplication(l),window.location="login.html"};return{onInit:function(){u.click(w),m.click(I),p.click(_),f.click(T),v.click(C),g.click(O),h.click(R)}}}.apply(t,o))||(e.exports=a)},40:(e,t,n)=>{var o,a,i=n(755);o=[n(759),n(433),n(25),n(914)],void 0===(a=function(e,t,n,o){var a=n.render,r=n.getAvatar,s=i("#sidebarProfile"),c='\n        <a title="Edit Profile" class="sipr-image">\n            <img '.concat(e.ATTRIBUTE_CHANGE_IMAGE,'="{id}" class="--avatar avatar p-cur" src="{src}" onerror="this.src=\'/assets/images/user.jpg\'">\n        </a>\n        <p ').concat(e.ATTRIBUTE_CHANGE_NAME,'="{id}" class="--name">{name}</p>\n    ');return{onInit:function(){var e=t.getInfomation(),n={src:r(e.id),name:e.name,id:e.id};s.html(a(c,n)),i(document).on("click","#sidebarProfile .sipr-image",o.onInit)}}}.apply(t,o))||(e.exports=a)},814:(e,t,n)=>{var o,a,i=n(755);o=[n(759),n(433),n(25),n(209),n(851),n(445),n(512),n(640)],void 0===(a=function(e,t,n,o,a,r,s,c){var l=n.render,d=n.getAvatar,u=n.stripTags,m=n.htmlEncode,p=i("#sidebar_room_list"),f=i(".js_caption"),v=i(".js_wrap_mess"),g='\n        <li class="js_li_list_user contact-list__item p-cur {status} {live} {mute}" '.concat(e.ATTRIBUE_SIDEBAR_ROOM,'="{id}" {isGroup}>\n            <img ').concat(e.ATTRIBUTE_CHANGE_IMAGE_GROUP,'="{id}" class="--img avatar {classImg}" src="{src}" {handleImageErr} />\n            <div class="badge badge-orange">{unread}</div>\n            <div class="p-pl-10 meta">\n                <div class="--name contact__name p-1-line">\n                    <i class="xm xm-volume-mute" aria-hidden="true"></i>\n                    <span ').concat(e.ATTRIBUTE_CHANGE_NAME,'="{userId}">{name}</span>\n                </div>\n                <div class="p-1-line preview">{mess}</div>\n            </div>\n        </li>\n    '),h=function(n){var l=0,d=i(n.currentTarget),u=d.data().roomId,m=t.getRooms().filter((function(e,t){return String(e.id)===String(u)&&(l=t,!0)}))[0]||{};if(m&&t.getCurrentRoomId()!==u&&!d.hasClass("p_disabled")){if(!u)return f.show(),v.hide(),t.setCurrentRoomId(null),i("[".concat(e.ATTRIBUE_SIDEBAR_ROOM,"]")).removeClass("active"),void c.onInit(d);null!=m&&m.channel?i(".messages-input-wrap").hide():i(".messages-input-wrap").show(),t.setCurrentRoomId(u),i("[".concat(e.ATTRIBUE_SIDEBAR_ROOM,"]")).removeClass("active"),f.hide(),v.show(),d.addClass("active"),a.onClear(),s.markPhone(m.group),r.onRenderInfomation(m),o.onLoadMessage(m,l)}},b=function(e){var n,o,a,i,r;if(!e.members)return"";var s,c,p=t.getRoomInfoWasEdited(),f="",v=e.members[0],h=e.id?"":"p_disabled",b=e.member.messagecounter||"",y=e.group?e.subject:(null===(n=p[null==v||null===(o=v.user)||void 0===o?void 0:o.id])||void 0===n?void 0:n.user_name)||(null==v||null===(a=v.user)||void 0===a?void 0:a.name),w=e.lastmessage?m(u(e.lastmessage)):"",I=t.getCurrentRoomId()===e.id?"active":"",_=e.group?"":null==v||null===(i=v.user)||void 0===i?void 0:i.id;if(e.group&&!y)return"";(e.group&&(f=d(e.id,!0)),e.group)||(f=d(null==v||null===(c=v.user)||void 0===c?void 0:c.id));return e.group||v||(f="/assets/images/user.svg"),!e.id&&e.sender&&(y=e.member.user.name,w="Invite: pending",f=d(e.member.user.id)),e.id||e.sender||(y=e.member.user.name,w="Invite: not accepted",f=d(e.member.user.id),h=""),s={id:e.id,isGroup:e.group?'data-is-group="true"':'data-is-group="false"',status:h,live:I,unread:b,handleImageErr:"onerror=\"this.src='".concat(e.group?"/assets/images/group.svg":"/assets/images/user.jpg","'\""),classImg:e.group?"hagr":"",src:f,name:y,mess:w,userId:_,mute:!1===(null===(r=p[e.id])||void 0===r?void 0:r.notification_mess)?"mute":""},l(g,s)};return{onInit:function(){var n=t.getRooms().map(b).join("");p.html("".concat('<a class="sidebar__toggle"><i class="xm xm-search --icon p-cur"></i></a>').concat(n)),i(document).off(".sidebarRoomList"),i(document).on("click.sidebarRoomList","[".concat(e.ATTRIBUE_SIDEBAR_ROOM,"]"),h)},onRenderRoom:b,onPrepend:function(e){return p.prepend(e)},onUpdateRoomName:function(e,t){return i('[data-room-id="'.concat(e,'"]')).find(".--name.contact__name span").html(t)}}}.apply(t,o))||(e.exports=a)},839:(e,t,n)=>{var o,a,i=n(755);o=[n(759),n(433),n(25)],void 0===(a=function(e,t,n){var o=n.debounce,a=1,r=i("#frame"),s=i("#search"),c=s.find(".search-toggle"),l=s.find(".js-menu"),d=s.find("[data-s]"),u=s.find(".search__option"),m=s.find(".search__input"),p=s.find(".clearable__clear"),f=o((function(){var t=i("[".concat(e.ATTRIBUE_SIDEBAR_ROOM,"]")),n=m.val().trim().toUpperCase();t.removeAttr("data-search-sidebar-hide"),n&&t.each((function(e){var o=t.eq(e),a=o.find("[data-userid-name]").html();String(a).toUpperCase().indexOf(n)>-1?o.removeAttr("data-search-sidebar-hide"):o.attr("data-search-sidebar-hide",!0)}))}),300),v=function(){l.hide(),i(document).off(".hideSearchFilter")},g=function(e){e.preventDefault(),e.stopPropagation(),l.show(),i(document).on("click.hideSearchFilter",(function(e){l.is(e.target)||0!==l.has(e.target).length||v()}))},h=function(t){var n=i("[".concat(e.ATTRIBUE_SIDEBAR_ROOM,"]")),o=i(t.currentTarget),r=o.data().s;v(),r!==a&&(a=r,d.removeClass("active"),o.addClass("active"),n.removeAttr("data-filter-sidebar-hide"),1!==r&&n.each((function(e){var t=n.eq(e),o=t.data().isGroup;(2!==r||t.find(".badge.badge-orange").html())&&(3!==r||o)?4===r&&o&&t.attr("data-filter-sidebar-hide",!0):t.attr("data-filter-sidebar-hide",!0)})))},b=function(){window.outerWidth>767?r.removeClass("indent"):r.addClass("indent"),setTimeout((function(){return m.focus()}),100)},y=function(){i("[".concat(e.ATTRIBUE_SIDEBAR_ROOM,"]")).removeAttr("data-search-sidebar-hide"),m.val("")};return{onInit:function(){m.val(""),d.click(h),u.click(g),p.click(y),c.click(b),i(document).on("input","#search .search__input",f)}}}.apply(t,o))||(e.exports=a)},400:(e,t,n)=>{var o,a,i=n(755);function r(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}o=[n(759),n(788),n(433),n(25),n(814),n(209),n(445),n(277),n(741)],void 0===(a=function(e,t,n,o,a,s,d,u,m){var p=e.SESSION_ID,f={timeout:1e4,onBackground:!1},v=function(e,t){var o=n.getInfomation().id,a=n.getCurrentRoomId(),i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),r=t.length-1;if(t[r].updated||t[r].deleted||(i.lastmessage=t[t.length-1].message),a!==e.id){var s=i.member.messagecounter;t.forEach((function(e){e.deleted||e.updated||(o===e.sender.id?s=0:s+=1)})),i.member.messagecounter=s}else i.member.messagecounter=0;return i},g=function(e,t){var o=!1,a=n.getCurrentRoomId()===t;return e.forEach((function(e){return e.deleted?(o=!0,void(a&&s.onSyncRemove(e.id.messageId))):e.updated?(o=!0,void(a&&s.onSyncUpdate(e))):(o=!1,7===e.type&&(o=!0),21===e.type&&function(e,t){n.getInfomation().id!==e.sender.id&&m.onInit(e.sender,t)}(e,t),24===e.type&&function(e,t){n.getInfomation().id!==e.sender.id&&m.onEndCall(e.sender,t)}(e,t),void(a&&s.onSync([e])))})),o},h=function(e){var o,s=n.getRooms(),c=[],l=!1,d={};e.forEach((function(e){d[e.id.chatId]=(d[e.id.chatId]||[]).concat(e)})),s=s.filter((function(t){if(d[t.id]){var n=d[t.id];l||(l=!0,t.isLiveAssistance&&7===e[e.length-1].type||u.pushNotificationForMessage(n[0]));var o=g(d[t.id],t.id);if(!o){var r=v(t,n);!function(e){var t=a.onRenderRoom(e);i('[data-room-id="'.concat(e.id,'"]')).remove(),a.onPrepend(t)}(r),c=c.concat(r)}return o}return!0})),l||(o=e[0],t.get("chats").then((function(e){try{for(var t=e.data.chats,i=t.length,s=0;s<i;s+=1)if(t[s].id===o.id.chatId){var c=a.onRenderRoom(t[s]);n.setRooms([t[s]].concat(r(n.getRooms()))),a.onPrepend(c),u.pushNotificationForMessage(o);break}}catch(e){console.log(e)}}))),n.setRooms(c.concat(s))},b=function e(){var a=n.getCurrentRoomId();f[p]=o.getDataToLocalApplication(p),a&&(f.chatId=a),t.get("sync",f).then((function(t){var i,r,s;if(null!=t&&null!==(i=t.data)&&void 0!==i&&null!==(r=i.messages)&&void 0!==r&&r.length){var c=o.sortBy(t.data.messages,"msgDate");h(c)}a===n.getCurrentRoomId()&&d.onRenderTimeActivity(null==t||null===(s=t.data)||void 0===s?void 0:s.partnerLastTimeActivity);e()})).catch((function(){return setTimeout(e,5e3)}))};return{onInit:function(){b()}}}.apply(t,o))||(e.exports=a)},436:(e,t,n)=>{var o,a,i=n(755);o=[n(25)],void 0===(a=function(e){var t,n=e.render,o=!1,a='\n        <div class="alert {class}" role="alert">\n            {message}\n            <button type="button" class="close">\n                <span aria-hidden="true">&times;</span>\n            </button>\n        </div>\n    ',r=function(e){i(e.currentTarget).closest(".alert").remove()};return{show:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";o||(o=!0,i("body").append('<div id="alert-wrapper"></div>'),t=i("#alert-wrapper"),i(document).on("click","#alert-wrapper .close",r));var c={class:"alert-danger",message:e};"success"===s&&(c.class="alert-success");var l=i(n(a,c));t.prepend(l),setTimeout((function(){return l.remove()}),3500)}}}.apply(t,o))||(e.exports=a)},788:(e,t,n)=>{var o,a;o=[n(759),n(25)],void 0===(a=function(e,t){var n=e.TOKEN,o=e.SESSION_ID,a=e.API_URL,i=t.getDataToLocalApplication(o)||"",r=t.getDataToLocalApplication(n)||"",s={"Content-Type":"application/x-www-form-urlencoded","X-Authorization-Token":r},c={"Content-Type":"application/json","X-Authorization-Token":r};i&&r||(window.location="login.html");var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];for(var n in e)e.hasOwnProperty(n)&&t.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(e[n])));return t.length?"?".concat(t.join("&")):""},d=fetch;return fetch=function(){return d.apply(this,arguments).then((function(e){if(401===e.status)return t.removeDataInLocalApplication(o),t.removeDataInLocalApplication(n),window.location="login.html",e.json().then((function(e){throw e}));var a=e.headers.get("content-type");return a&&-1!==a.indexOf("application/json")?e.json():e.text()}))},{get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("".concat(a,"/").concat(e).concat(l(t)),{method:"GET",headers:c})},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("".concat(a,"/").concat(e),{method:"POST",headers:c,body:JSON.stringify(t)})},put:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("".concat(a,"/").concat(e),{method:"PUT",headers:c,body:JSON.stringify(t)})},delete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return fetch("".concat(a,"/").concat(e),{method:"DELETE",headers:c})},postForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return fetch("".concat(a,"/").concat(e),{method:"POST",headers:s,body:t})}}}.apply(t,o))||(e.exports=a)},433:(e,t,n)=>{var o;void 0===(o=function(){var e={},t=[],n="",o=null,a="",i="",r="",s={};return{getInfomation:function(){return e},setInfomation:function(t){e=t},getVersion:function(){return a},setVersion:function(e){a=e},getBodyBgTheme:function(){return i},setBodyBgTheme:function(e){i=e},getBodyFontSize:function(){return r},setBodyFontSize:function(e){r=e},getRooms:function(){return t},setRooms:function(e){t=e},getCurrentRoomId:function(){return n},setCurrentRoomId:function(e){n=e},getCurrentGroupMembers:function(){return o},setCurrentGroupMembers:function(e){o=e},getRoomInfoWasEdited:function(){return s},setRoomInfoWasEdited:function(e){s=e}}}.call(t,n,t,e))||(e.exports=o)},25:(e,t,n)=>{var o,a,i=n(755);o=[n(381),n(759)],void 0===(a=function(e,t){return{setCookie:function(e,t){var n="";if(t){var o=new Date;o.setTime(o.getTime()+24*t*60*60*1e3),n="; expires=".concat(o.toUTCString())}document.cookie="token=".concat(e||"").concat(n,"; path=/")},setDataToLocalApplication:function(e,t){localStorage.setItem(e,t)},getDataToLocalApplication:function(e){return localStorage.getItem(e)},removeDataInLocalApplication:function(e){localStorage.removeItem(e)},getAvatar:function(e,n){if(e)return"".concat(t.API_URL,"/").concat(n?"chats":"users","/").concat(e,"/avatar")},sortBy:function(e,t){return e.slice(0).sort((function(e,n){return e[t]>n[t]?1:e[t]<n[t]?-1:0}))},stripTags:function(e){return e.replace(/(<([^>]+)>)/gi,"")},convertMessagetime:function(t){var n=e(t),o=e(),a=e().subtract(1,"days");return o.isSame(n,"date")?"Today ".concat(n.format("H:mm")):a.isSame(n,"date")?"Yesterday ".concat(n.format("H:mm")):n.format("D MMM, H:mm")},humanFileSize:function(e){var t=1e3;if(Math.abs(e)<t)return"".concat(e," B");var n=["kB","MB","GB","TB","PB","EB","ZB","YB"],o=-1,a=Math.pow(10,1);do{e/=t,++o}while(Math.round(Math.abs(e)*a)/a>=t&&o<n.length-1);return"".concat(e.toFixed(1)," ").concat(n[o])},htmlDecode:function(e){var t=document.createElement("textarea");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue},htmlEncode:function(e){var t=document.createElement("textarea");return t.textContent=e,t.innerHTML},debounce:function(e,t,n){var o;return function(){var a=this,i=arguments,r=function(){o=null,n||e.apply(a,i)},s=n&&!o;clearTimeout(o),o=setTimeout(r,t),s&&e.apply(a,i)}},transformLinkTextToHTML:function(e){if(!e)return"";return e.replace(/(www|ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/g,(function(e){return"<a href='".concat(e,"' target='_blank' rel='noopener noreferrer'>").concat(e,"</a>")}))},truncate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return e.length>t?"".concat(e.substring(0,t-3),"..."):e},generateId:function(){return Math.random().toString(36).substr(2,9)},render:function(e,t){return i.templates(function(e){return e.replace(/{([^}]+)}/g,(function(e,t){var n=t.replace(/\./g,"^");return"{^{:".concat(n,"}}")}))}(e)).render(t)}}}.apply(t,o))||(e.exports=a)}},t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,n.x=e=>{},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={826:0},t=[[873,532,755,861]],o=e=>{},a=(a,i)=>{for(var r,s,[c,l,d,u]=i,m=0,p=[];m<c.length;m++)s=c[m],n.o(e,s)&&e[s]&&p.push(e[s][0]),e[s]=0;for(r in l)n.o(l,r)&&(n.m[r]=l[r]);for(d&&d(n),a&&a(i);p.length;)p.shift()();return u&&t.push.apply(t,u),o()},i=self.webpackChunkxm=self.webpackChunkxm||[];function r(){for(var o,a=0;a<t.length;a++){for(var i=t[a],r=!0,s=1;s<i.length;s++){var c=i[s];0!==e[c]&&(r=!1)}r&&(t.splice(a--,1),o=n(n.s=i[0]))}return 0===t.length&&(n.x(),n.x=e=>{}),o}i.forEach(a.bind(null,0)),i.push=a.bind(null,i.push.bind(i));var s=n.x;n.x=()=>(n.x=s||(e=>{}),(o=r)())})(),n.x()})();